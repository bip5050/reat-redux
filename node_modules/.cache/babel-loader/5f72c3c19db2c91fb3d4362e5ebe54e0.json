{"ast":null,"code":"import _classCallCheck from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/biplab/Desktop/foodjets/src/containers/Modals/contextMenu.js\";\nimport React, { Component } from 'react';\nimport { success as notifysuccess } from '../../util/notify';\nimport { isEmpty } from 'lodash';\n\nvar CustomContext = /*#__PURE__*/function (_Component) {\n  _inherits(CustomContext, _Component);\n\n  var _super = _createSuper(CustomContext);\n\n  function CustomContext(props) {\n    var _this;\n\n    _classCallCheck(this, CustomContext);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      visible: false,\n      x: 0,\n      y: 0\n    };\n    _this.contextDiv = React.createRef();\n    _this.openEditWindow = _this.openEditWindow.bind(_assertThisInitialized(_this));\n    _this.updateTask = _this.updateTask.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CustomContext, [{\n    key: \"openEditWindow\",\n    value: function openEditWindow(uuid, mrchnt_address, recpnt_address, tsk_status) {\n      /* console.log('Task Status : ', tsk_status);\n      if(tsk_status === 'Scheduled') {\n          this.props.openEditWindow(uuid, mrchnt_address, recpnt_address);\n      }\n      else {\n          notifysuccess({message: `Task is already in ${tsk_status} mode.`});\n      } */\n      this.props.openEditWindow(uuid, mrchnt_address, recpnt_address);\n    }\n  }, {\n    key: \"updateTask\",\n    value: function updateTask(uuid, status, tsk_status) {\n      console.log('Task Status : ', tsk_status);\n\n      if (tsk_status === 'Scheduled') {\n        this.props.updateTask(uuid, status);\n      } else {\n        notifysuccess({\n          message: \"Task is already in \".concat(tsk_status, \" mode.\")\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var self = this;\n      document.addEventListener(\"click\", function (event) {\n        event.stopPropagation();\n        self.props.hideContextMenu();\n        /* self.setState({\n            visible: false,\n            x:0,\n            y:0\n        }, () => {\n        }); */\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      //console.log('Context Props : ', props);\n      this.setState({\n        visible: props.visible,\n        x: props.x,\n        y: props.y,\n        selOrder: props.selOrder\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"click\", function () {//console.log('Hide Context Menu ', this.state);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var myStyle = {\n        \"position\": \"absolute\",\n        \"top\": \"\".concat(this.state.y, \"px\"),\n        \"left\": \"\".concat(this.state.x + 5, \"px\")\n      };\n      var order = this.props.selOrder || {};\n      var items = [{\n        \"label\": \"Order #\" + order.order_number\n      }, {\n        \"label\": \"View Task\"\n      }, {\n        \"label\": \"View Map\"\n      }, {\n        \"label\": \"Edit Task\"\n      }, {\n        \"label\": \"Delete Task\"\n      }, {\n        \"label\": \"Change Status\",\n        \"submenu\": [\"Processing\", \"Picked up\"]\n      }, {\n        \"label\": \" \"\n      }]; //console.log('Context Menu : ', (!!this.props.selOrder) ? this.props.selOrder.tsk_status : '');\n\n      return !isEmpty(this.props.selOrder) ? /*#__PURE__*/React.createElement(\"div\", {\n        id: \"cmenu\",\n        ref: this.contextDiv,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, this.state.visible ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-context\",\n        id: \"text\",\n        style: myStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-context-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }\n      }, \"Order #\".concat(order.order_number)), /*#__PURE__*/React.createElement(\"div\", {\n        data: \"ignore-outer-click\",\n        className: \"custom-context-item\",\n        onClick: function onClick() {\n          return _this2.props.openDetailsWindow(order.order_uuid);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }\n      }, \"View Task\"), /*#__PURE__*/React.createElement(\"div\", {\n        data: \"ignore-outer-click\",\n        className: \"custom-context-item\",\n        onClick: function onClick() {\n          return _this2.props.openMapWindow(order.order_uuid);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }\n      }, \"View Map\"), /*#__PURE__*/React.createElement(\"div\", {\n        data: \"ignore-outer-click\",\n        className: \"custom-context-item\",\n        onClick: function onClick() {\n          return _this2.openEditWindow(order.order_uuid, order.mrchnt_address, order.recpnt_address, order.tsk_status);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, \"Edit Task\"), /*#__PURE__*/React.createElement(\"div\", {\n        data: \"ignore-outer-click\",\n        className: \"custom-context-item\",\n        onClick: function onClick() {\n          return _this2.props.deleteTask(order.order_uuid);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }\n      }, \"Delete Task\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-context-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      }, \"Change Status\", /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        data: \"ignore-outer-click\",\n        onClick: function onClick() {\n          return _this2.updateTask(order.order_uuid, 'R', order.tsk_status);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 33\n        }\n      }, \"Ready\"), /*#__PURE__*/React.createElement(\"li\", {\n        data: \"ignore-outer-click\",\n        onClick: function onClick() {\n          return _this2.updateTask(order.order_uuid, 'W', order.tsk_status);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 33\n        }\n      }, \"Work In Progress\")))) : null) : null;\n    }\n  }]);\n\n  return CustomContext;\n}(Component);\n\nexport default CustomContext;","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/containers/Modals/contextMenu.js"],"names":["React","Component","success","notifysuccess","isEmpty","CustomContext","props","state","visible","x","y","contextDiv","createRef","openEditWindow","bind","updateTask","uuid","mrchnt_address","recpnt_address","tsk_status","status","console","log","message","self","document","addEventListener","event","stopPropagation","hideContextMenu","setState","selOrder","removeEventListener","myStyle","order","items","order_number","openDetailsWindow","order_uuid","openMapWindow","deleteTask"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {success as notifysuccess} from '../../util/notify';\nimport {isEmpty} from 'lodash';\n\nclass CustomContext extends Component{\n    constructor(props) {\n        super(props);\n        this.state      =   {\n            visible     :   false,\n            x           :   0,\n            y           :   0\n        };\n        this.contextDiv = React.createRef();\n        this.openEditWindow     =   this.openEditWindow.bind(this);\n        this.updateTask         =   this.updateTask.bind(this);\n    }\n\n    openEditWindow(uuid, mrchnt_address, recpnt_address, tsk_status){\n        /* console.log('Task Status : ', tsk_status);\n        if(tsk_status === 'Scheduled') {\n            this.props.openEditWindow(uuid, mrchnt_address, recpnt_address);\n        }\n        else {\n            notifysuccess({message: `Task is already in ${tsk_status} mode.`});\n        } */\n        this.props.openEditWindow(uuid, mrchnt_address, recpnt_address);\n    }\n\n    updateTask(uuid, status, tsk_status){\n        console.log('Task Status : ', tsk_status);\n        if(tsk_status === 'Scheduled') {\n            this.props.updateTask(uuid, status);\n        }\n        else {\n            notifysuccess({message: `Task is already in ${tsk_status} mode.`});\n        }\n    }\n\n    componentDidMount(){\n        var self            =   this;       \n        document.addEventListener(\"click\", function(event){\n            event.stopPropagation();\n            self.props.hideContextMenu();\n            /* self.setState({\n                visible: false,\n                x:0,\n                y:0\n            }, () => {\n            }); */\n        });\n    }\n\n    componentWillReceiveProps(props) {\n        //console.log('Context Props : ', props);\n        this.setState({\n            visible     :   props.visible,\n            x           :   props.x,\n            y           :   props.y,\n            selOrder    :   props.selOrder\n        })\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(\"click\", function(){\n            //console.log('Hide Context Menu ', this.state);\n        });\n    }\n\n    render() {        \n        var myStyle     =   {\n            \"position\"  :   \"absolute\",\n            \"top\"       :   `${this.state.y}px`,\n            \"left\"      :   `${this.state.x+5}px`\n        }\n        let order           =   this.props.selOrder || {};\n        let items           =   [\n                                    {\"label\"        :   \"Order #\" + order.order_number},\n                                    {\"label\"        :   \"View Task\"},\n                                    {\"label\"        :   \"View Map\"},\n                                    {\"label\"        :   \"Edit Task\"},\n                                    {\"label\"        :   \"Delete Task\"},\n                                    {\n                                        \"label\"     :   \"Change Status\",\n                                        \"submenu\"   :   [\"Processing\", \"Picked up\"]\n                                    },\n                                    {\"label\"        :   \" \"}\n                                ];\n\n        //console.log('Context Menu : ', (!!this.props.selOrder) ? this.props.selOrder.tsk_status : '');\n        return (\n            (!isEmpty(this.props.selOrder)) ?\n            <div id=\"cmenu\" ref={this.contextDiv}>\n                {\n                    this.state.visible ? \n                    <div className=\"custom-context\" id=\"text\" style={myStyle}>\n                        <div className=\"custom-context-item\">{`Order #${order.order_number}`}</div>\n                        <div data=\"ignore-outer-click\" className=\"custom-context-item\" onClick={() => this.props.openDetailsWindow(order.order_uuid)}>View Task</div>\n                        <div data=\"ignore-outer-click\" className=\"custom-context-item\" onClick={() => this.props.openMapWindow(order.order_uuid)}>View Map</div>\n                        <div data=\"ignore-outer-click\" className=\"custom-context-item\" onClick={() => this.openEditWindow(order.order_uuid, order.mrchnt_address, order.recpnt_address, order.tsk_status)}>Edit Task</div>\n                        <div data=\"ignore-outer-click\" className=\"custom-context-item\" onClick={() => this.props.deleteTask(order.order_uuid)}>Delete Task</div>\n                        <div className=\"custom-context-item\">\n                            Change Status\n                            <ul>\n                                <li data=\"ignore-outer-click\" onClick={() => this.updateTask(order.order_uuid, 'R', order.tsk_status)}>Ready</li>\n                                <li data=\"ignore-outer-click\" onClick={() => this.updateTask(order.order_uuid, 'W', order.tsk_status)}>Work In Progress</li>\n                            </ul>\n                        </div>\n                    </div>\n                    : null\n                }\n            </div> : null\n        )\n    }\n}\nexport default CustomContext;"]},"metadata":{},"sourceType":"module"}