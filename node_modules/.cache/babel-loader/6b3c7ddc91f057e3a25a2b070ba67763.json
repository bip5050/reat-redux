{"ast":null,"code":"import _regeneratorRuntime from\"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(get_settings),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(authenticate),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(watchHeaderStore);import{takeEvery,put,call}from'redux-saga/effects';import*as headerConstant from'../constants';import{error as notifyerror}from'../../../util/notify';import*as headerAction from'../actions';import{callApi,callApiV2}from'../../../Helper/api';import{setFilter}from'../../../Helper/common';//Get Settings\nexport function get_settings(action){var url,payload,result,filter;return _regeneratorRuntime.wrap(function get_settings$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;url='';url=\"auth/get-user-settings\";_context.next=5;return call(callApiV2,'GET',url);case 5:payload=_context.sent;if(!payload.data.error){_context.next=9;break;}_context.next=9;return put(headerAction.listenSettingsError());case 9:if(!payload.data.result){_context.next=16;break;}result=payload.data.result;filter=result.filter||{};if(!!filter){Object.keys(filter||{}).forEach(function(k){filter[k]=JSON.parse(filter[k]||'{}');});};_context.next=16;return put(headerAction.listenSettingsSuccess({settings:result.settings||{},userType:result.user_type||'',logo:{path:result.path,image:result.logo},showReport:result.show_report,filterData:filter}));case 16:_context.next=23;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);_context.next=22;return put(headerAction.listenSettingsError());case 22:console.log({message:_context.t0.message});case 23:case\"end\":return _context.stop();}}},_marked,null,[[0,18]]);}//Authenticate\nexport function authenticate(action){var url,payload,result;return _regeneratorRuntime.wrap(function authenticate$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;url='';url=\"auth/authenticate\";_context2.next=5;return call(callApi,'GET',url);case 5:payload=_context2.sent;if(!payload.data.error){_context2.next=9;break;}_context2.next=9;return put(headerAction.listenAuthenticateError());case 9:if(!payload.data.result){_context2.next=13;break;}result=payload.data.result;//console.log('Saga : ', result)\n//notifysuccess({message:result.message});\n_context2.next=13;return put(headerAction.listenAuthenticateSuccess(result));case 13:_context2.next=20;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](0);_context2.next=19;return put(headerAction.listenAuthenticateError());case 19:console.log(_context2.t0.message);case 20:case\"end\":return _context2.stop();}}},_marked2,null,[[0,15]]);}export function watchHeaderStore(){return _regeneratorRuntime.wrap(function watchHeaderStore$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return takeEvery(headerConstant.GET_SETTINGS,get_settings);case 3:_context3.next=5;return takeEvery(headerConstant.AUTHENTICATE,authenticate);case 5:_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_marked3,null,[[0,7]]);}","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/containers/Header/Saga/index.js"],"names":["get_settings","authenticate","watchHeaderStore","takeEvery","put","call","headerConstant","error","notifyerror","headerAction","callApi","callApiV2","setFilter","action","url","payload","data","listenSettingsError","result","filter","Object","keys","forEach","k","JSON","parse","listenSettingsSuccess","settings","userType","user_type","logo","path","image","showReport","show_report","filterData","console","log","message","listenAuthenticateError","listenAuthenticateSuccess","GET_SETTINGS","AUTHENTICATE"],"mappings":"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","sourcesContent":["import { takeEvery, put, call } from 'redux-saga/effects';\nimport * as headerConstant from '../constants';\nimport {error as notifyerror} from '../../../util/notify';\nimport * as headerAction from '../actions';\nimport {callApi, callApiV2} from '../../../Helper/api';\nimport { setFilter } from '../../../Helper/common';\n\n//Get Settings\nexport function* get_settings(action){\n    try {\n        let url             =  '';\n        url                 =  `auth/get-user-settings`;\n        const payload = yield call(callApiV2, 'GET', url);\n\n        // check for error\n        if(payload.data.error){\n            //notifyerror(payload.data.error);\n            yield put(headerAction.listenSettingsError());\n        }\n\n        // handle success result\n        if(payload.data.result){\n            let result = payload.data.result;\n            let filter  =   result.filter || {};\n            if(!!filter) {\n                Object.keys(filter || {}).forEach(k => {\n                    filter[k]       =   JSON.parse(filter[k] || '{}');\n                })\n            };\n\n            yield put(headerAction.listenSettingsSuccess({\n                settings: result.settings || {},\n                userType: result.user_type || '',\n                logo: {path: result.path, image: result.logo},\n                showReport: result.show_report,\n                filterData: filter\n            }));\n        }\n    } catch (e) {\n        //notifyerror(e);\n        yield put(headerAction.listenSettingsError());\n        console.log({message: e.message});\n    }\n}\n\n\n//Authenticate\nexport function* authenticate(action){\n    try {\n        let url             =  '';\n        url                 =  `auth/authenticate`;\n        const payload = yield call(callApi, 'GET', url);\n        \n        // check for error\n        if(payload.data.error){\n            //notifyerror(payload.data.error);\n            yield put(headerAction.listenAuthenticateError());\n        }\n\n        // handle success result\n        if(payload.data.result){\n            let result = payload.data.result;\n            //console.log('Saga : ', result)\n            //notifysuccess({message:result.message});\n            yield put(headerAction.listenAuthenticateSuccess(result));\n        }\n    } catch (e) {\n        //notifyerror(e);\n        yield put(headerAction.listenAuthenticateError());\n        console.log(e.message);\n    }\n}\n\nexport function* watchHeaderStore() {\n    try{\n        yield takeEvery( headerConstant.GET_SETTINGS, get_settings );\n        yield takeEvery( headerConstant.AUTHENTICATE, authenticate );\n    } catch(e){\n        console.log(e)\n    }\n}"]},"metadata":{},"sourceType":"module"}