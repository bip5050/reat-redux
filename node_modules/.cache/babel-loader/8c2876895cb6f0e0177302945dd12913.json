{"ast":null,"code":"import _objectSpread from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/biplab/Desktop/foodjets/src/routes.js\";\nimport React from 'react';\nimport { Switch, Route, Redirect } from 'react-router';\nimport { useLocation } from 'react-router-dom';\nimport { isEmpty } from 'lodash';\nimport Dashboard from './components/Dashboard';\nimport Feedback from './components/Feedbacks';\nimport Settings from './components/Settings';\nimport Reports from './components/Reports';\nimport Login from './components/Login';\nimport ForgotPassword from './components/ForgotPassword';\nimport ResetPassword from './components/ResetPassword';\nimport Home from './components/Home';\nimport Header from './components/common/Header';\nimport Sidebar from './components/common/Sidebar';\nimport TaskHistory from './components/TaskHistory';\nimport { get as getDomainCookie, getCookie, setCookie } from './util/cookies';\nimport Config from './config';\nimport { Container } from 'reactstrap';\nexport var routes = [{\n  path: '/',\n  exact: true,\n  component: Home\n}, {\n  path: '/login',\n  component: Login\n}, {\n  path: '/reset-password/:id',\n  component: ResetPassword\n}, {\n  path: '/forgot-password',\n  component: ForgotPassword\n}];\nexport var privateRoutes = [{\n  path: '/dashboard',\n  component: Dashboard\n}, {\n  path: '/feedback',\n  component: Feedback\n}, {\n  path: '/reports',\n  component: Reports\n}, {\n  path: '/settings',\n  component: Settings\n}, {\n  path: '/task-history',\n  component: TaskHistory\n}];\nexport default function Router() {\n  var _this = this;\n\n  //console.log(getCookie('foodjets_merchant'), getDomainCookie());\n  var user = {};\n\n  if (typeof window !== 'undefined') {\n    var newCookie = getDomainCookie() || {};\n    var currentCookie = getCookie('foodjets_merchant') || {}; //user              = newCookie || {};\n\n    user = currentCookie || {};\n\n    if (newCookie.token != currentCookie.token) {\n      //  setCookie(newCookie, 'foodjets_merchant');\n      var states = JSON.parse(localStorage.getItem('states') || '[]'); //console.log('States : ', states, Config, Config.states, !!states, states.length === 0);\n\n      if (states.length === 0) localStorage.setItem('states', JSON.stringify(Config.states || [])); //window.location.reload();\n    }\n  } //console.log('Routes User : ', user);\n\n  /* if(typeof window !== 'undefined' && !isEmpty(localStorage.getItem('user'))) {\n    user            = JSON.parse(localStorage.getItem('user'));\n  } */\n\n\n  var location = useLocation();\n  var currentPage = location.pathname; //console.log(location.pathname, currentPage, currentPage !== '/' && currentPage !== '/login', window.location.pathname);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    user: user,\n    currentPage: currentPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    className: \"p-0 section_wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, currentPage !== '/' && currentPage !== '/login' && currentPage !== '/forgot-password' && !currentPage.includes(\"/reset-password\") ? /*#__PURE__*/React.createElement(Sidebar, {\n    user: user,\n    currentPage: currentPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 146\n    }\n  }) : null, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, privateRoutes.map(function (route) {\n    return /*#__PURE__*/React.createElement(PrivateRoute, {\n      key: route.path,\n      path: route.path,\n      component: route.component,\n      userData: user,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    });\n  }), routes.map(function (route) {\n    return /*#__PURE__*/React.createElement(Route, Object.assign({\n      key: \"index \".concat(route.path)\n    }, route, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }));\n  }))));\n}\n\nfunction PrivateRoute(_ref) {\n  var _this2 = this;\n\n  var Component = _ref.component,\n      rest = _objectWithoutProperties(_ref, [\"component\"]);\n\n  var obj = _objectSpread({\n    component: Component\n  }, rest);\n\n  var user = obj.userData; //console.log('Private Route : ', !isEmpty(user));\n\n  if (!isEmpty(user)) {\n    return /*#__PURE__*/React.createElement(Route, {\n      key: obj.path,\n      path: obj.path,\n      component: function component() {\n        return /*#__PURE__*/React.createElement(obj.component, {\n          userData: user,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 62\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    });\n  } else {\n    //console.log('Unauthorised');\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: \"/login\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    });\n  }\n}","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/routes.js"],"names":["React","Switch","Route","Redirect","useLocation","isEmpty","Dashboard","Feedback","Settings","Reports","Login","ForgotPassword","ResetPassword","Home","Header","Sidebar","TaskHistory","get","getDomainCookie","getCookie","setCookie","Config","Container","routes","path","exact","component","privateRoutes","Router","user","window","newCookie","currentCookie","token","states","JSON","parse","localStorage","getItem","length","setItem","stringify","location","currentPage","pathname","includes","map","route","PrivateRoute","Component","rest","obj","userData"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport { Switch, Route, Redirect } from 'react-router';\nimport { useLocation } from 'react-router-dom';\nimport { isEmpty } from 'lodash';\nimport Dashboard from './components/Dashboard';\nimport Feedback from './components/Feedbacks';\nimport Settings from './components/Settings';\nimport Reports from './components/Reports';\nimport Login from './components/Login';\nimport ForgotPassword from './components/ForgotPassword';\nimport ResetPassword from './components/ResetPassword';\nimport Home from './components/Home';\nimport Header from './components/common/Header';\nimport Sidebar from './components/common/Sidebar';\nimport TaskHistory from './components/TaskHistory';\nimport {get as getDomainCookie, getCookie, setCookie} from './util/cookies';\nimport Config from './config';\nimport {\n  Container\n} from 'reactstrap';\n\nexport const routes = [{\n    path: '/',\n    exact: true,\n    component: Home\n  }, {\n    path: '/login',\n    component: Login,\n    \n  }, \n  {\n    path: '/reset-password/:id',\n    component: ResetPassword,\n    \n  },\n  {\n    path: '/forgot-password',\n    component: ForgotPassword,\n    \n  }];\n\nexport const privateRoutes = [{\n  path: '/dashboard',\n  component: Dashboard\n}, {\n  path: '/feedback',\n  component: Feedback\n}, {\n  path: '/reports',\n  component: Reports\n}, {\n  path: '/settings',\n  component: Settings\n}, {\n  path: '/task-history',\n  component: TaskHistory\n}\n];\n\nexport default function Router() {\n  //console.log(getCookie('foodjets_merchant'), getDomainCookie());\n  let user          = {};\n  if(typeof window !== 'undefined') {\n    let newCookie     = getDomainCookie() || {};\n    let currentCookie = getCookie('foodjets_merchant') || {};\n    //user              = newCookie || {};\n    user              = currentCookie || {};\n    if(newCookie.token != currentCookie.token) {\n    //  setCookie(newCookie, 'foodjets_merchant');\n      let states      = JSON.parse(localStorage.getItem('states') || '[]');\n      //console.log('States : ', states, Config, Config.states, !!states, states.length === 0);\n      if(states.length === 0)\n        localStorage.setItem('states', JSON.stringify(Config.states || []));\n      //window.location.reload();\n    }\n  }\n  //console.log('Routes User : ', user);\n  /* if(typeof window !== 'undefined' && !isEmpty(localStorage.getItem('user'))) {\n    user            = JSON.parse(localStorage.getItem('user'));\n  } */\n  let location      = useLocation();\n  let currentPage   = location.pathname;\n  //console.log(location.pathname, currentPage, currentPage !== '/' && currentPage !== '/login', window.location.pathname);\n  return (\n    <React.Fragment>\n      <Header user={user} currentPage={currentPage}/>\n      <Container fluid className=\"p-0 section_wrap\" >\n        {\n          (currentPage !== '/' && currentPage !== '/login' && currentPage !== '/forgot-password' && !currentPage.includes(\"/reset-password\") ) ? <Sidebar user={user} currentPage={currentPage}/> : null\n        }\n        {/* <input type=\"checkbox\" name=\"check\" /> Yes */}\n        <Switch>\n          {privateRoutes.map((route) => (\n            <PrivateRoute key={route.path} path={route.path} component={route.component} userData={user} />\n          ))}\n          {routes.map(route => (\n            <Route key={`index ${route.path}`} {...route} />\n          ))}\n        </Switch>\n      </Container>\n    </ React.Fragment>  \n  );\n}\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n  let obj       = { component: Component, ...rest };\n  let user      = obj.userData;\n  //console.log('Private Route : ', !isEmpty(user));\n  if(!isEmpty(user)) {\n    return (\n      <Route key={obj.path} path={obj.path} component={() => <obj.component userData={user} />} />\n    )\n  } else {\n    //console.log('Unauthorised');\n    return (\n      <Redirect\n        to={{\n          pathname: \"/login\"\n        }}\n      />\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}