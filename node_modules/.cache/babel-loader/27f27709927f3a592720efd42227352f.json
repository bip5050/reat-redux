{"ast":null,"code":"import _objectSpread from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/biplab/Desktop/foodjets/src/containers/Filter/stateFilter.js\";\nimport React, { Component } from 'react';\nimport { sortBy as _sortBy } from 'lodash';\n\nvar StateFilter = /*#__PURE__*/function (_Component) {\n  _inherits(StateFilter, _Component);\n\n  var _super = _createSuper(StateFilter);\n\n  function StateFilter(props) {\n    var _this;\n\n    _classCallCheck(this, StateFilter);\n\n    _this = _super.call(this, props);\n\n    _this.handleStateChange = function (e, state) {\n      _this.setState({\n        stateTxt: ''\n      }, function () {\n        _this.dropdownInput.current.focus();\n      });\n\n      _this.props.handleStateChange(e, state);\n    };\n\n    _this.onChangeHandle = function (e) {\n      var _this$setState;\n\n      var name = e.target.name;\n      var value = e.target.value;\n\n      _this.setState((_this$setState = {}, _defineProperty(_this$setState, name, value), _defineProperty(_this$setState, \"sOpen\", true), _this$setState));\n    };\n\n    _this.handleClick = function (e) {\n      e.stopPropagation();\n\n      if (_this.nodeState.contains(e.target) || e.target.getAttribute('data') === 'ignore-outer-click') {\n        return;\n      }\n\n      if (!!_this.state.sOpen) {\n        _this.setState({\n          sOpen: false,\n          stateTxt: ''\n        });\n      }\n    };\n\n    _this.handleSelectbox = function () {\n      //console.log('Select Box : ')\n      _this.setState({\n        sOpen: !_this.state.sOpen\n      });\n    };\n\n    _this.state = {\n      stateTxt: '',\n      sOpen: false\n    };\n    _this.dropdownInput = React.createRef();\n    return _this;\n  }\n\n  _createClass(StateFilter, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //console.log(this.props);\n      document.addEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var statesLocalStorage = JSON.parse(localStorage.getItem('states') || '[]');\n      var unsortedStates = statesLocalStorage.map(function (item) {\n        return {\n          label: item.value,\n          value: item.id\n        };\n      });\n\n      var states = _sortBy(unsortedStates, 'value');\n\n      var stateFilter = this.props.stateFilter || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: function ref(nodeState) {\n          return _this2.nodeState = nodeState;\n        },\n        className: \"select-box\".concat(this.state.sOpen ? \" sopen\" : \" \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"s-result\",\n        onClick: this.handleSelectbox,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        ref: this.dropdownInput,\n        autoComplete: \"text\",\n        placeholder: \"State\",\n        name: \"stateTxt\",\n        value: this.state.stateTxt,\n        onChange: this.onChangeHandle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"ul\", {\n        className: stateFilter.length > 0 ? 'selected' : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }\n      }, (states || []).map(function (state, i) {\n        var index = stateFilter.indexOf(state.label);\n        return state.label.toLowerCase().includes(_this2.state.stateTxt.toLowerCase()) ? index > -1 ? /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          data: \"ignore-outer-click\",\n          onClick: function onClick(e) {\n            return _this2.props.handleRemoveFilter(e, 'State', index);\n          },\n          className: \"selected\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 33\n          }\n        }, state.label) : /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          data: \"ignore-outer-click\",\n          onClick: function onClick(e) {\n            return _this2.handleStateChange(e, _objectSpread({}, state));\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 41\n          }\n        }, state.label) : null;\n      })));\n    }\n  }]);\n\n  return StateFilter;\n}(Component);\n\nexport { StateFilter as default };","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/containers/Filter/stateFilter.js"],"names":["React","Component","sortBy","_sortBy","StateFilter","props","handleStateChange","e","state","setState","stateTxt","dropdownInput","current","focus","onChangeHandle","name","target","value","handleClick","stopPropagation","nodeState","contains","getAttribute","sOpen","handleSelectbox","createRef","document","addEventListener","removeEventListener","statesLocalStorage","JSON","parse","localStorage","getItem","unsortedStates","map","item","label","id","states","stateFilter","length","i","index","indexOf","toLowerCase","includes","handleRemoveFilter"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {sortBy as _sortBy} from 'lodash';\nexport default class StateFilter extends Component {\n    constructor(props) {\n        super(props);\n        this.state      =   {\n            stateTxt: '',\n            sOpen: false\n        }\n        this.dropdownInput = React.createRef();\n    } \n\n    handleStateChange = (e, state) => {\n        this.setState({\n            stateTxt    :   ''\n        }, () => {\n            this.dropdownInput.current.focus();\n        })\n        this.props.handleStateChange(e, state);\n    }   \n  \n    onChangeHandle = (e) => {\n        const name      =   e.target.name;\n        const value     =   e.target.value;\n        this.setState({\n            [name]      :   value,\n            sOpen       :   true\n        });\n    }\n\n    componentDidMount() {\n        //console.log(this.props);\n        document.addEventListener('click', this.handleClick);\n    };\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.handleClick);\n    };\n     \n    handleClick = (e) => {\n        e.stopPropagation();\n        if(this.nodeState.contains(e.target)\n        || e.target.getAttribute('data') === 'ignore-outer-click'){ return; }\n\t\tif(!!this.state.sOpen) {\n            this.setState({\n                sOpen       :   false,\n                stateTxt    :   ''\n            }); \n        }\n    }\n   \n    handleSelectbox = () => {   \n        //console.log('Select Box : ')\n        this.setState({\n            sOpen      :  !this.state.sOpen\n        })\n    }\n\n    render() {\n        let statesLocalStorage     =  JSON.parse(localStorage.getItem('states') || '[]');      \n        let unsortedStates         =  statesLocalStorage.map((item) => {\n            return {\n                label: item.value,\n                value: item.id\n            }\n        })\n        let states                  =   _sortBy(unsortedStates, 'value');\n        let stateFilter             =   this.props.stateFilter || [];\n        return (            \n            <div ref={nodeState => this.nodeState = nodeState} className={`select-box${this.state.sOpen ? \" sopen\" : \" \"}`}>\n                <div className=\"s-result\" onClick={this.handleSelectbox}>\n                <input type=\"text\" ref={this.dropdownInput} autoComplete=\"text\" placeholder=\"State\" name=\"stateTxt\" value={this.state.stateTxt} onChange={this.onChangeHandle}/>\n                </div>\n                <ul className={(stateFilter.length > 0) ? 'selected' : ''}>\n                {/* {\n                    (this.props.states.length > 0) ?\n                    this.props.states.map((filter, index) => {\n                        return (\n                        <li key={index + 'filtered'} data='ignore-outer-click' onClick={(e) => this.props.handleRemoveFilter(e, 'State', index)} className=\"selected\">{filter.label}</li>\n                        )\n                    }) : null\n                } */}\n                {\n                    (states || []).map((state, i) => {      \n                        let index       =   stateFilter.indexOf(state.label);                  \n                        return (\n                            (state.label.toLowerCase().includes(this.state.stateTxt.toLowerCase())) ?\n                            (index > -1) ?\n                                <li\n                                    key={i}\n                                    data='ignore-outer-click'\n                                    onClick={(e) => this.props.handleRemoveFilter(e, 'State', index)}\n                                    className='selected'\n                                >\n                                    {state.label}\n                                </li> : <li\n                                    key={i}\n                                    data='ignore-outer-click'\n                                    onClick={(e) => this.handleStateChange(e, {...state})}\n                                >\n                                    {state.label}\n                                </li>\n                            : null\n                        )\n                    })\n                }\n                </ul>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}