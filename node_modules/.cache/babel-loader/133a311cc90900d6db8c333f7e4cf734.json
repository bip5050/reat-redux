{"ast":null,"code":"import _classCallCheck from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/biplab/Desktop/foodjets/src/containers/Reports/filter.js\";\nimport { Form } from 'reactstrap';\nimport moment from 'moment-timezone';\nimport { sortBy as _sortBy, isEmpty } from 'lodash';\nimport React, { Component } from 'react';\nimport AreaFilter from '../Filter/areaFilter';\nimport StateFilter from '../Filter/stateFilter';\nimport StoreFilter from '../Filter/storeFilter';\nimport { error as notifyerror } from '../../util/notify';\nimport Calendar from '../../components/Calendar/calendar';\n\nvar Filter = /*#__PURE__*/function (_Component) {\n  _inherits(Filter, _Component);\n\n  var _super = _createSuper(Filter);\n\n  function Filter(props) {\n    var _this;\n\n    _classCallCheck(this, Filter);\n\n    _this = _super.call(this, props);\n\n    _this.handleStateChange = function (e, selectedState) {\n      e.stopPropagation();\n      var filterKeys = _this.state.filterKeys || {};\n      var selIndex = filterKeys.State.findIndex(function (item) {\n        return item.value === selectedState.value;\n      });\n\n      if (selIndex === -1) {\n        filterKeys.State.push({\n          label: selectedState.label,\n          value: selectedState.value\n        });\n      }\n\n      ;\n      filterKeys.State = _sortBy(filterKeys.State, 'value');\n\n      _this.setState({\n        filterKeys: filterKeys\n      }, function () {\n        // this.props.getReport();\n        _this.handleUpdateFilter();\n      });\n    };\n\n    _this.handleAreaChange = function (e, selectedArea) {\n      e.stopPropagation();\n      var filterKeys = _this.state.filterKeys || {};\n      var selIndex = filterKeys.Area.findIndex(function (item) {\n        return item.value === selectedArea.delivery_zone_name;\n      });\n\n      if (selIndex === -1) {\n        filterKeys.Area.push({\n          id: selectedArea.id,\n          state: selectedArea.state,\n          value: selectedArea.delivery_zone_name,\n          label: \"\".concat(selectedArea.delivery_zone_name, \" (\").concat(selectedArea.state, \")\")\n        });\n      }\n\n      ;\n      filterKeys.Area = _sortBy(filterKeys.Area, 'value');\n\n      _this.setState({\n        filterKeys: filterKeys\n      }, function () {\n        _this.handleUpdateFilter();\n      });\n    };\n\n    _this.handleStoreChange = function (e, selectedStore) {\n      e.stopPropagation();\n      var filterKeys = _this.state.filterKeys || {};\n      var selIndex = filterKeys.Store.findIndex(function (item) {\n        return item.value === selectedStore.label;\n      });\n\n      if (selIndex === -1) {\n        filterKeys.Store.push({\n          id: selectedStore.data.id,\n          store_id: selectedStore.data.store_id,\n          label: selectedStore.label,\n          value: selectedStore.label\n        });\n      }\n\n      ;\n      filterKeys.Store = _sortBy(filterKeys.Store, 'value');\n\n      _this.setState({\n        filterKeys: filterKeys\n      }, function () {\n        _this.handleUpdateFilter();\n      });\n    };\n\n    _this.onSelectStartDate = function (date) {\n      var startDate = moment(date).format('X');\n      var endDate = moment(_this.state.endDate).format('X');\n\n      if (startDate > endDate) {\n        notifyerror({\n          message: 'Start date should be lower than end date'\n        });\n        return false;\n      }\n\n      ;\n      var daysDiff = moment(_this.state.endDate).diff(moment(date), 'days');\n\n      if (daysDiff > 366) {\n        notifyerror({\n          message: 'Date range should not be greater than 1 year'\n        });\n        return false;\n      }\n\n      ;\n\n      _this.setState({\n        startDate: date\n      }, function () {\n        _this.handleUpdateFilter();\n      });\n    };\n\n    _this.onSelectEndDate = function (date) {\n      var startDate = moment(_this.state.startDate).format('X');\n      var endDate = moment(date).format('X');\n\n      if (!!!_this.state.startDate) {\n        notifyerror({\n          message: 'Please select start date first'\n        });\n        return false;\n      }\n\n      ;\n      var daysDiff = moment(date).diff(_this.state.startDate, 'days');\n\n      if (daysDiff > 366) {\n        notifyerror({\n          message: 'Date range should not be greater than 1 year'\n        });\n        return false;\n      }\n\n      ;\n\n      if (endDate < startDate) {\n        notifyerror({\n          message: 'End date should be greater than start date'\n        });\n        return false;\n      }\n\n      ;\n\n      _this.setState({\n        endDate: date\n      }, function () {\n        _this.handleUpdateFilter();\n      });\n    };\n\n    _this.onDateRange = function (date) {\n      var daysDiff = moment(date.endDate).diff(moment(date.startDate), 'days');\n\n      if (daysDiff > 365) {\n        notifyerror({\n          message: 'Date range should not be greater than 1 year'\n        });\n        return false;\n      }\n\n      ;\n\n      _this.setState({\n        startDate: date.startDate,\n        endDate: date.endDate\n      }, function () {\n        _this.handleUpdateFilter();\n      });\n    };\n\n    _this.handleTypeChange = function (type) {\n      _this.setState({\n        type: type\n      }, function () {\n        _this.handleUpdateFilter();\n      });\n      /* this.props.handleTypeChange(type, {\n      \tuser_type   :  this.props.userType,\n      \ttype        :  type,\n      \tstartDate   :  this.state.startDate,\n      \tendDate     :  this.state.endDate,\n      \tfilterKeys  :  this.state.filterKeys\n      }) */\n\n    };\n\n    _this.handleClick = function (e) {\n      e.stopPropagation();\n      if (_this.nodeResSrchButton.contains(e.target) || e.target.getAttribute('data') === 'autosuggest' || e.target.getAttribute('data') === 'ignore-outer-click' || !!e.target.getAttribute('aria-hidden')) return;\n\n      if (!!_this.state.showSearch) {\n        _this.setState({\n          showSearch: false\n        });\n      }\n    };\n\n    _this.tillDate = moment().format('YYYY-MM-DD');\n    _this.state = {\n      sOpen: false,\n      aOpen: false,\n      stOpen: false,\n      showFilter: false,\n      showSearch: false,\n      filterKeys: {\n        State: [],\n        Area: [],\n        Store: []\n      },\n      endDate: moment().format('YYYY-MM-DD'),\n      startDate: moment().subtract(1, 'months').format('YYYY-MM-DD')\n    };\n    _this.toggleResFilter = _this.toggleResFilter.bind(_assertThisInitialized(_this));\n    _this.handleRemoveFilter = _this.handleRemoveFilter.bind(_assertThisInitialized(_this));\n    _this.toggleCustomSearch = _this.toggleCustomSearch.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Filter, [{\n    key: \"toggleResFilter\",\n    value: function toggleResFilter() {\n      this.setState({\n        showSearch: false,\n        showFilter: !this.state.showFilter\n      });\n    }\n  }, {\n    key: \"toggleCustomSearch\",\n    value: function toggleCustomSearch() {\n      this.setState({\n        sOpen: false,\n        aOpen: false,\n        stOpen: false,\n        showFilter: false,\n        showSearch: !this.state.showSearch\n      });\n    }\n  }, {\n    key: \"handleRemoveFilter\",\n    value: function handleRemoveFilter(e, type, index) {\n      var _this2 = this;\n\n      e.stopPropagation();\n      var filters = this.state.filterKeys || [];\n      filters[type].splice(index, 1);\n\n      if (type === 'State' && filters[type].length === 0) {\n        filters.Area = [];\n        filters.Store = [];\n      }\n\n      ;\n\n      if (type === 'Area' && filters[type].length === 0) {\n        filters.Store = [];\n      }\n\n      ;\n      var selectedState = type !== 'State' ? this.state.selectedState : null;\n      var selectedArea = type !== 'Area' ? this.state.selectedArea : null;\n      var selectedStore = type !== 'Store' ? this.state.selectedStore : null;\n      this.setState({\n        filterKeys: filters,\n        selectedArea: selectedArea,\n        selectedState: selectedState,\n        selectedStore: selectedStore\n      }, function () {\n        _this2.handleUpdateFilter();\n      });\n    }\n  }, {\n    key: \"handleUpdateFilter\",\n    value: function handleUpdateFilter() {\n      var filterKeys = this.state.filterKeys || {};\n      var value_one = '';\n      var value_two = '';\n      var storeName = {};\n      var data = {};\n\n      if (filterKeys.Store.length === 0 && filterKeys.Area.length === 0 && filterKeys.State.length > 0) {\n        var states = (filterKeys.State || []).map(function (item) {\n          return {\n            state: item.value,\n            zone_id: []\n          };\n        });\n\n        if (states.length > 0) {\n          data = {\n            type: 'place',\n            place: states\n          }; //value_one         =  'state';\n          //value_two         =  states;\n        }\n      }\n\n      if (filterKeys.Store.length === 0 && filterKeys.Area.length > 0) {\n        var zones = [];\n        (filterKeys.Area || []).map(function (item) {\n          var index = zones.findIndex(function (z) {\n            return z.state === item.state;\n          }); //console.log(filterKeys.Area, index);\n\n          if (index > -1) {\n            zones[index].zone_id.push(item.id);\n          } else {\n            zones.push({\n              state: item.state,\n              zone_id: [item.id]\n            });\n          }\n        });\n\n        if (zones.length > 0) {\n          data = {\n            type: 'place',\n            place: zones\n          }; //type         \t\t=  'place';\n          //place         \t=  zones; \n        }\n      }\n\n      if (filterKeys.Store.length > 0) {\n        var store = [];\n        (filterKeys.Store || []).forEach(function (item) {\n          store.push(item.store_id.toString());\n          storeName[item.store_id] = item.label;\n        });\n\n        if (store.length > 0) {\n          data = {\n            type: 'store',\n            store_id: store\n          }; //type         \t\t=  'store';\n          //store_id         \t=  store;\n        }\n      }\n\n      var startDate = this.state.startDate;\n      var endDate = this.state.endDate;\n\n      if (!!startDate && !!endDate) {\n        startDate = startDate;\n        endDate = endDate;\n      } else {\n        if (!!!startDate && !!!endDate) {\n          startDate = moment().subtract(1, 'months').format('YYYY-MM-DD');\n          endDate = moment().format('YYYY-MM-DD');\n        }\n\n        if (!!startDate && !!!endDate) {\n          startDate = startDate;\n          endDate = startDate;\n        }\n\n        if (!!endDate && !!!startDate) {\n          startDate = endDate;\n          endDate = endDate;\n        }\n\n        this.setState({\n          startDate: value_one,\n          endDate: value_two\n        });\n      }\n\n      data.start = startDate;\n      data.end = endDate;\n      data.user_type = this.state.type;\n\n      if (!!!data.type) {\n        data.type = 'date';\n      } //console.log('Filter Data : ', data);\n\n      /* setFilter('reports', {\n      \tuser_type   :  this.props.userType,\n      \ttype        :  this.props.type,\n      \tstartDate   :  startDate,\n      \tendDate     :  endDate,\n      \tfilterKeys  :  filterKeys\n      }); */\n\n\n      this.props.getReport(data, {\n        user_type: this.props.userType,\n        type: this.state.type,\n        startDate: startDate,\n        endDate: endDate,\n        filterKeys: filterKeys\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var filter = this.props.filterData; //console.log('Filter Did Mount : ', filter);\n      //let filterKeys =  this.state.filterKeys;\n\n      if (!isEmpty(filter) && filter.user_type === this.props.userType) {\n        //type        =  filter.type;\n        var filterKeys = filter.filterKeys; //let fromDate    =  filter.startDate || this.state.startDate;\n        //let toDate      =  filter.endDate || this.state.endDate;\n\n        var fromDate = this.state.startDate;\n        var toDate = this.state.endDate;\n        this.setState({\n          filterKeys: filterKeys,\n          startDate: fromDate,\n          endDate: toDate,\n          type: filter.type\n        }, function () {\n          _this3.handleUpdateFilter();\n        });\n      } else {\n        var type = this.props.userType === 'admin' ? 'general' : this.props.userType;\n        this.setState({\n          type: type\n        }, function () {\n          _this3.handleUpdateFilter();\n        });\n      }\n\n      document.addEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          showFilter = _this$state.showFilter,\n          showSearch = _this$state.showSearch;\n      var stateFilter = [];\n      var stateCodeFilter = [];\n      this.state.filterKeys.State.forEach(function (state) {\n        stateFilter.push(state.label);\n        stateCodeFilter.push(state.value);\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(\"section\", {\n        className: \"con_top\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tab_pan-wrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tab_pan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        onClick: function onClick() {\n          return _this4.handleTypeChange('general');\n        },\n        className: this.state.type === 'general' ? ' active' : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 12\n        }\n      }, \"Grocery\"), /*#__PURE__*/React.createElement(\"span\", {\n        onClick: function onClick() {\n          return _this4.handleTypeChange('pharmacy');\n        },\n        className: this.state.type === 'pharmacy' ? ' active' : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 12\n        }\n      }, \"Rx\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"res_btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"resfilter_btn \".concat(showFilter ? \"showfilter\" : \"\", \" \"),\n        onClick: this.toggleResFilter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"/assets/search-ico.svg\",\n        alt: \"Search_ico\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 108\n        }\n      }), \" Filter\"), /*#__PURE__*/React.createElement(\"div\", {\n        ref: function ref(nodeResSrchButton) {\n          return _this4.nodeResSrchButton = nodeResSrchButton;\n        },\n        className: \"searchmod_btn \".concat(showSearch ? \"showpoint\" : \"\", \" \"),\n        onClick: this.toggleCustomSearch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"/assets/search-ico.svg\",\n        alt: \"Search_ico\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 180\n        }\n      }), \" Search\")), /*#__PURE__*/React.createElement(Form, {\n        method: \"get\",\n        action: \"\",\n        autoComplete: \"off\",\n        className: \"resfilter_box \".concat(showFilter ? \"showfilterbox\" : \"\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filter_label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 9\n        }\n      }, \"Filter by: \"), /*#__PURE__*/React.createElement(StateFilter, {\n        stateFilter: stateFilter,\n        states: this.state.filterKeys.State,\n        handleStateChange: this.handleStateChange,\n        handleRemoveFilter: this.handleRemoveFilter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(AreaFilter, {\n        area: this.state.filterKeys.Area,\n        states: this.state.filterKeys.State,\n        zones: this.props.zones,\n        stateCodeFilter: stateCodeFilter,\n        handleAreaChange: this.handleAreaChange,\n        handleRemoveFilter: this.handleRemoveFilter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(StoreFilter, {\n        store: this.state.filterKeys.Store,\n        area: this.state.filterKeys.Area,\n        stores: this.props.stores,\n        handleStoreChange: this.handleStoreChange,\n        handleRemoveFilter: this.handleRemoveFilter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 7\n        }\n      }))), /*#__PURE__*/React.createElement(\"section\", {\n        className: \"date_range_section\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filter_label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 18\n        }\n      }, \"Range: \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"InputFromTo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"DayPickerInput\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Calendar, {\n        selectDate: this.state.startDate,\n        startDate: this.state.startDate,\n        endDate: this.state.endDate,\n        onSelectDate: this.onSelectStartDate,\n        onDateRange: this.onDateRange,\n        className: \"t_box\",\n        placeholder: \"Start Date\",\n        tillDate: this.tillDate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 24\n        }\n      })), ' ', /*#__PURE__*/React.createElement(\"span\", {\n        className: \"to\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 21\n        }\n      }, \"to\"), \" \", ' ', /*#__PURE__*/React.createElement(\"span\", {\n        className: \"InputFromTo-to\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"DayPickerInput\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 24\n        }\n      }, /*#__PURE__*/React.createElement(Calendar, {\n        selectDate: this.state.endDate,\n        startDate: this.state.startDate,\n        endDate: this.state.endDate,\n        onSelectDate: this.onSelectEndDate,\n        onDateRange: this.onDateRange,\n        className: \"t_box\",\n        placeholder: \"End Date\",\n        disabled: !!!this.state.startDate,\n        tillDate: this.tillDate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 27\n        }\n      }))))), this.state.filterKeys.State.length > 0 || this.state.filterKeys.Area.length > 0 || this.state.filterKeys.Store.length > 0 ? /*#__PURE__*/React.createElement(\"section\", {\n        className: \"filter-tag_section\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 15\n        }\n      }, this.state.filterKeys.State.length > 0 ? this.state.filterKeys.State.map(function (filter, index) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          key: \"state-tag-\".concat(index),\n          className: \"f-tag\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 30\n          }\n        }, filter.label, /*#__PURE__*/React.createElement(\"a\", {\n          onClick: function onClick(e) {\n            return _this4.handleRemoveFilter(e, 'State', index);\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 34\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"/assets/cancel-ico.svg\",\n          alt: \"close\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 37\n          }\n        })));\n      }) : null, this.state.filterKeys.Area.length > 0 ? this.state.filterKeys.Area.map(function (filter, index) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          key: \"area-tag-\".concat(index),\n          className: \"f-tag\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 31\n          }\n        }, filter.label, /*#__PURE__*/React.createElement(\"a\", {\n          onClick: function onClick(e) {\n            return _this4.handleRemoveFilter(e, 'Area', index);\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 34\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"/assets/cancel-ico.svg\",\n          alt: \"close\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 37\n          }\n        })));\n      }) : null, this.state.filterKeys.Store.length > 0 ? this.state.filterKeys.Store.map(function (filter, index) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          key: \"store-tag-\".concat(index),\n          className: \"f-tag\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 31\n          }\n        }, filter.label, /*#__PURE__*/React.createElement(\"a\", {\n          onClick: function onClick(e) {\n            return _this4.handleRemoveFilter(e, 'Store', index);\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 34\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"/assets/cancel-ico.svg\",\n          alt: \"close\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 37\n          }\n        })));\n      }) : null) : null);\n    }\n  }]);\n\n  return Filter;\n}(Component);\n\n;\nexport default Filter;","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/containers/Reports/filter.js"],"names":["Form","moment","sortBy","_sortBy","isEmpty","React","Component","AreaFilter","StateFilter","StoreFilter","error","notifyerror","Calendar","Filter","props","handleStateChange","e","selectedState","stopPropagation","filterKeys","state","selIndex","State","findIndex","item","value","push","label","setState","handleUpdateFilter","handleAreaChange","selectedArea","Area","delivery_zone_name","id","handleStoreChange","selectedStore","Store","data","store_id","onSelectStartDate","date","startDate","format","endDate","message","daysDiff","diff","onSelectEndDate","onDateRange","handleTypeChange","type","handleClick","nodeResSrchButton","contains","target","getAttribute","showSearch","tillDate","sOpen","aOpen","stOpen","showFilter","subtract","toggleResFilter","bind","handleRemoveFilter","toggleCustomSearch","index","filters","splice","length","value_one","value_two","storeName","states","map","zone_id","place","zones","z","store","forEach","toString","start","end","user_type","getReport","userType","filter","filterData","fromDate","toDate","document","addEventListener","removeEventListener","stateFilter","stateCodeFilter","stores"],"mappings":"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","sourcesContent":["import { Form } from 'reactstrap';\nimport moment from 'moment-timezone';\nimport {sortBy as _sortBy, isEmpty} from 'lodash';\nimport React, { Component } from 'react';\nimport AreaFilter from '../Filter/areaFilter';\nimport StateFilter from '../Filter/stateFilter';\nimport StoreFilter from '../Filter/storeFilter';\nimport {error as notifyerror} from '../../util/notify';\nimport Calendar from '../../components/Calendar/calendar';\n\nclass Filter extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.tillDate\t=  moment().format('YYYY-MM-DD');\n\t\tthis.state = {\n\t\t\tsOpen: false,\n\t\t\taOpen: false,\n\t\t\tstOpen: false,\n\t\t \tshowFilter: false,\n\t \t \tshowSearch: false,\n\t \t \tfilterKeys: {State:[], Area: [], Store: []},\n         \tendDate:  moment().format('YYYY-MM-DD'),\n\t \t \tstartDate:  moment().subtract(1, 'months').format('YYYY-MM-DD'),\n\t\t};\n\n\t\tthis.toggleResFilter = this.toggleResFilter.bind(this);\n\t   \tthis.handleRemoveFilter = this.handleRemoveFilter.bind(this);\n\t \tthis.toggleCustomSearch = this.toggleCustomSearch.bind(this);\n\t};\n\n\ttoggleResFilter() {\n\t\tthis.setState({\n\t\t\tshowSearch:false,\n\t\t\tshowFilter: !this.state.showFilter\n\t\t});\n\t};\n\n\ttoggleCustomSearch() {\n\t\tthis.setState({\n\t\t\tsOpen: false,\n\t\t\taOpen: false,\n\t\t\tstOpen: false,\n\t\t\tshowFilter:  false,\n\t\t\tshowSearch:  !this.state.showSearch\n\t\t});\n\t};\n\n\thandleStateChange = (e, selectedState) => {\n\t\te.stopPropagation();\n\t\tlet filterKeys = this.state.filterKeys || {};\n\t\tlet selIndex = filterKeys.State.findIndex((item) => {\n\t\t\treturn item.value === selectedState.value;\n\t\t});\n\n\t\tif(selIndex === -1) {\n\t\t\tfilterKeys.State.push({\n\t\t\t\tlabel:  selectedState.label,\n\t\t\t\tvalue:  selectedState.value\n\t\t\t})\n\t\t};\n\n\t\tfilterKeys.State = _sortBy(filterKeys.State, 'value');\n\t\tthis.setState({\n\t\t\tfilterKeys: filterKeys\n\t\t}, () => {\n\t\t\t// this.props.getReport();\n\t\t\tthis.handleUpdateFilter();\n\t\t});\n\t}\n\n\thandleAreaChange = (e, selectedArea) => {\n\t\te.stopPropagation();\n\t\tlet filterKeys = this.state.filterKeys || {};\n\t\tlet selIndex = filterKeys.Area.findIndex((item) => {\n\t\t\treturn item.value === selectedArea.delivery_zone_name;\n\t\t});\n\n\t\tif(selIndex === -1) {\n\t\t\tfilterKeys.Area.push({\n\t\t\t\tid:  selectedArea.id,\n\t\t\t\tstate:  selectedArea.state,\n\t\t\t\tvalue:  selectedArea.delivery_zone_name,\n\t\t\t\tlabel:  `${selectedArea.delivery_zone_name} (${selectedArea.state})`\n\t\t\t});\n\t\t};\n\n\t\tfilterKeys.Area = _sortBy(filterKeys.Area, 'value');\n\t\tthis.setState({\n\t\t\tfilterKeys: filterKeys\n\t\t}, () => {\n\t\t\tthis.handleUpdateFilter();\n\t\t});\n\t};\n\n\thandleStoreChange = (e, selectedStore) => {\n\t\te.stopPropagation();\n\t\tlet filterKeys = this.state.filterKeys || {}; \n\t\tlet selIndex = filterKeys.Store.findIndex((item) => {\n\t\t\treturn item.value === selectedStore.label;\n\t\t});\n\n\t\tif(selIndex === -1) {\n\t\t\tfilterKeys.Store.push({\n\t\t\t\tid: selectedStore.data.id,\n\t\t\t\tstore_id:  selectedStore.data.store_id,\n\t\t\t\tlabel: selectedStore.label,\n\t\t\t\tvalue: selectedStore.label\n\t\t\t});\n\t\t};\n\n\t\tfilterKeys.Store = _sortBy(filterKeys.Store, 'value');\n\t\tthis.setState({\n\t\t\tfilterKeys: filterKeys\n\t\t}, () => {\n\t\t\tthis.handleUpdateFilter();\n\t\t});\n\t};\n\n\thandleRemoveFilter(e, type, index) {\n\t\te.stopPropagation();\n\t\tlet filters = this.state.filterKeys || [];\n\t\tfilters[type].splice(index, 1);\n\t\tif(type === 'State' && filters[type].length === 0){\n\t\t\tfilters.Area = [];\n\t\t\tfilters.Store = [];\n\t\t};\n\n\t\tif(type === 'Area' && filters[type].length === 0){\n\t\t\tfilters.Store = [];\n\t\t};\n\n\t\tlet selectedState = (type !== 'State') ? this.state.selectedState : null;\n\t\tlet selectedArea = (type !== 'Area') ? this.state.selectedArea : null;\n\t\tlet selectedStore = (type !== 'Store') ? this.state.selectedStore : null;\n\n\t\tthis.setState({\n\t\t\tfilterKeys : filters,\n\t\t\tselectedArea: selectedArea,\n\t\t\tselectedState: selectedState,\n\t\t\tselectedStore: selectedStore\n\t\t}, () => {\n\t\t\tthis.handleUpdateFilter();\n\t\t});\n\t};\n\n\tonSelectStartDate = (date) => {\n\t\tlet startDate = moment(date).format('X');      \n\t\tlet endDate = moment(this.state.endDate).format('X');\n\t\tif(startDate > endDate){\n\t\t\tnotifyerror({message: 'Start date should be lower than end date'});\n\t\t\treturn false;\n\t\t};\n\n\t\tlet daysDiff\t=\tmoment(this.state.endDate).diff(moment(date), 'days')\n\t\tif(daysDiff > 366) {\n\t\t\tnotifyerror({message: 'Date range should not be greater than 1 year'});\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setState({\n\t\t\tstartDate   :  date\n\t\t}, () => {\n\t\t\tthis.handleUpdateFilter();\n\t\t})\n\t};\n\n\tonSelectEndDate = (date) => {\n\t\tlet startDate = moment(this.state.startDate).format('X');      \n\t\tlet endDate = moment(date).format('X');\n\t\tif(!!!this.state.startDate) {\n\t\t\tnotifyerror({message: 'Please select start date first'});\n\t\t\treturn false;\n\t\t};\t\t\n\t\t\n\t\tlet daysDiff\t=\tmoment(date).diff(this.state.startDate, 'days');\n\t\tif(daysDiff > 366) {\n\t\t\tnotifyerror({message: 'Date range should not be greater than 1 year'});\n\t\t\treturn false;\n\t\t};\n\n\t\tif(endDate < startDate){\n\t\t\tnotifyerror({message: 'End date should be greater than start date'});\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setState({\n\t\t\tendDate:  date\n\t\t}, () => {         \n\t\t\tthis.handleUpdateFilter();\n\t\t});\n\t};\n\n\tonDateRange = (date) => {\t\t\n\t\tlet daysDiff\t=\tmoment(date.endDate).diff(moment(date.startDate), 'days')\n\t\tif(daysDiff > 365) {\n\t\t\tnotifyerror({message: 'Date range should not be greater than 1 year'});\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setState({\n\t\t\tstartDate: date.startDate,\n\t\t\tendDate: date.endDate\n\t\t}, () => {         \n\t\t\tthis.handleUpdateFilter();\n\t\t});\n\t};\n\n\thandleUpdateFilter() {\n\t\tlet filterKeys =  this.state.filterKeys || {};\n\t\tlet value_one        \t=\t'';\n\t\tlet value_two        \t=\t'';\n\t\tlet storeName        \t=\t{};\n\t\tlet data\t\t\t\t=\t{}\n  \n\t\tif(filterKeys.Store.length === 0 && filterKeys.Area.length === 0 && filterKeys.State.length > 0) {\n\t\t   \tlet states           =  (filterKeys.State || []).map(item => {\n\t\t\t   return {state: item.value, zone_id: []};\n\t\t\t});\n\t\t\tif(states.length > 0){\n\t\t\t\t\tdata\t\t\t=\t{\n\t\t\t\t\t\ttype\t\t:\t'place',\n\t\t\t\t\t\tplace\t\t:\tstates\n\t\t\t\t\t}\n\t\t\t\t//value_one         =  'state';\n\t\t\t\t//value_two         =  states;\n\t\t\t}\n\t\t}\n  \n\t\tif(filterKeys.Store.length === 0 && filterKeys.Area.length > 0) {         \n\t\t\tlet zones           =  [];\n\t\t\t(filterKeys.Area || []).map((item) => {\n\t\t\t\tlet index\t\t=\tzones.findIndex((z) => z.state === item.state);\n\t\t\t\t//console.log(filterKeys.Area, index);\n\t\t\t\tif(index > -1){\n\t\t\t\t\tzones[index].zone_id.push(item.id)\n\t\t\t\t} else {\n\t\t\t\t\tzones.push({\n\t\t\t\t\t\tstate: item.state,\n\t\t\t\t\t\tzone_id : [item.id]\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(zones.length > 0){\n\t\t\t\tdata\t\t\t=\t{\n\t\t\t\t\ttype\t\t:\t'place',\n\t\t\t\t\tplace\t\t:\tzones\n\t\t\t\t}\n\t\t\t\t//type         \t\t=  'place';\n\t\t\t\t//place         \t=  zones; \n\t\t\t\t\n\t\t\t}\n\t\t}\n  \n\t\tif(filterKeys.Store.length > 0) {\n\t\t\tlet store            =  [];\n\t\t\t(filterKeys.Store || []).forEach(item => {\n\t\t\t\tstore.push(item.store_id.toString());\n\t\t\t\tstoreName[item.store_id]   = item.label;\n\t\t\t})\n\t\t\tif(store.length > 0){\n\t\t\t\tdata\t\t\t=\t{\n\t\t\t\t\ttype\t\t:\t'store',\n\t\t\t\t\tstore_id\t:\tstore\n\t\t\t\t}\n\t\t\t\t//type         \t\t=  'store';\n\t\t\t\t//store_id         \t=  store;\n\t\t\t}\n\t\t}\n  \n\t\tlet startDate           =  this.state.startDate;\n\t\tlet endDate             =  this.state.endDate;\n\t\tif(!!startDate && !!endDate) {\n\t\t\tstartDate           =  startDate;\n\t\t\tendDate            \t=  endDate;\n\t\t} else {\n\t\t\tif(!!!startDate && !!!endDate) {\n\t\t\t\tstartDate            =  moment().subtract(1, 'months').format('YYYY-MM-DD');\n\t\t\t\tendDate            =  moment().format('YYYY-MM-DD');\n\t\t\t}\n\t\t\tif(!!startDate && !!!endDate) {\n\t\t\t\tstartDate         =  startDate;\n\t\t\t\tendDate         =  startDate;\n\t\t\t}\n\t\t\tif(!!endDate && !!!startDate) {\n\t\t\t\tstartDate         =  endDate;\n\t\t\t\tendDate         =  endDate;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tstartDate      :  value_one,\n\t\t\t\tendDate        :  value_two\n\t\t\t})\n\t\t}\n\n\t\tdata.start\t\t\t=\tstartDate;\n\t\tdata.end\t\t\t=\tendDate;\n\t\tdata.user_type\t\t=\tthis.state.type;\n\t\tif(!!!data.type) {\n\t\t   \tdata.type    =  'date';\n\t\t}\n\t\t//console.log('Filter Data : ', data);\n\t\t/* setFilter('reports', {\n\t\t\tuser_type   :  this.props.userType,\n\t\t\ttype        :  this.props.type,\n\t\t\tstartDate   :  startDate,\n\t\t\tendDate     :  endDate,\n\t\t\tfilterKeys  :  filterKeys\n\t\t}); */\n\t\tthis.props.getReport(data, {\n\t\t\tuser_type   :  this.props.userType,\n\t\t\ttype        :  this.state.type,\n\t\t\tstartDate   :  startDate,\n\t\t\tendDate     :  endDate,\n\t\t\tfilterKeys  :  filterKeys\n\t\t});\n\t}\n\n\thandleTypeChange = (type) => {\n\t\tthis.setState({\n\t\t\ttype: type\n\t\t}, () => {\n\t\t\tthis.handleUpdateFilter();\n\t\t})\n\t\t/* this.props.handleTypeChange(type, {\n\t\t\tuser_type   :  this.props.userType,\n\t\t\ttype        :  type,\n\t\t\tstartDate   :  this.state.startDate,\n\t\t\tendDate     :  this.state.endDate,\n\t\t\tfilterKeys  :  this.state.filterKeys\n\t\t}) */\n\t}\n\n\thandleClick = (e) => {\n\t\te.stopPropagation();\n\t\tif(this.nodeResSrchButton.contains(e.target)\n\t\t\t|| e.target.getAttribute('data') === 'autosuggest'\n\t\t\t|| e.target.getAttribute('data') === 'ignore-outer-click'\n\t\t\t|| !!e.target.getAttribute('aria-hidden')\n\t\t)\n\t\treturn;\n\t\tif(!!this.state.showSearch) {\n\t\t\tthis.setState({ showSearch: false });\n\t\t}\n\t};\n\n\tcomponentDidMount() {    \n\t\tlet filter     =  this.props.filterData;\n\t\t//console.log('Filter Did Mount : ', filter);\n\t\t//let filterKeys =  this.state.filterKeys;\n\t\tif(!isEmpty(filter) && filter.user_type === this.props.userType) {\n\t\t\t//type        =  filter.type;\n\t\t\tlet filterKeys  =  filter.filterKeys;\n\t\t\t//let fromDate    =  filter.startDate || this.state.startDate;\n\t\t\t//let toDate      =  filter.endDate || this.state.endDate;\n\t\t\tlet fromDate    =  this.state.startDate;\n\t\t\tlet toDate      =  this.state.endDate;\n\t\t\tthis.setState({\n\t\t\t\tfilterKeys  :  filterKeys,\n\t\t\t\tstartDate   :  fromDate,\n\t\t\t\tendDate     :  toDate,\n\t\t\t\ttype        :  filter.type\n\t\t\t}, () => {\n\t\t\t\tthis.handleUpdateFilter();\n\t\t\t})\n\t\t} else {\n\t\t\tlet type       =  (this.props.userType === 'admin') ? 'general' : this.props.userType;\n\t\t\tthis.setState({\n\t\t\t\ttype : type\n\t\t\t}, () => {\n\t\t\t\tthis.handleUpdateFilter();\n\t\t\t})\n\t\t}\n\t\t \n\t\tdocument.addEventListener('click', this.handleClick);\t\t\n   \t};\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('click', this.handleClick);\n\t};\n\n\trender() {\n\t\tconst { showFilter, showSearch } = this.state;\n\n\t\tlet stateFilter = [];\n\t\tlet stateCodeFilter = [];\n\t\tthis.state.filterKeys.State.forEach((state) => {\n\t\t\tstateFilter.push(state.label);\n\t\t\tstateCodeFilter.push(state.value);\n\t\t});\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<section className=\"con_top\">\n\t\t\t\t\t<div className=\"tab_pan-wrap\">\n\t\t\t\t\t  \t<div className=\"tab_pan\">\n\t\t\t\t\t     \t<span onClick={() => this.handleTypeChange('general')} className={(this.state.type === 'general') ? ' active' : ''}>Grocery</span>\n\t\t\t\t\t     \t<span onClick={() => this.handleTypeChange('pharmacy')} className={(this.state.type === 'pharmacy') ? ' active' : ''}>Rx</span>\n\t\t\t\t\t  \t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"res_btn\">\n\t\t\t\t\t  \t<div className={`resfilter_btn ${showFilter ? \"showfilter\" : \"\"} `} onClick={this.toggleResFilter}><img src=\"/assets/search-ico.svg\" alt=\"Search_ico\" /> Filter</div>\n\t\t\t\t\t  \t<div ref={nodeResSrchButton => this.nodeResSrchButton = nodeResSrchButton} className={`searchmod_btn ${showSearch ? \"showpoint\" : \"\"} `} onClick={this.toggleCustomSearch}><img src=\"/assets/search-ico.svg\" alt=\"Search_ico\" /> Search</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Form method=\"get\" action=\"\" autoComplete=\"off\" className={`resfilter_box ${showFilter ? \"showfilterbox\":\"\"}`}>\n\t\t\t\t\t  \t<div className=\"filter_label\">Filter by: </div>\n\t\t\t\t\t  \t<StateFilter\n\t\t\t\t\t\t\tstateFilter={stateFilter}\n\t\t\t\t\t\t\tstates={this.state.filterKeys.State}\n\t\t\t\t\t\t\thandleStateChange={this.handleStateChange}\n\t\t\t\t\t\t\thandleRemoveFilter={this.handleRemoveFilter}\n\t\t\t\t\t  \t/>\n\t\t\t\t\t\t<AreaFilter\n\t\t\t\t\t\t\tarea={this.state.filterKeys.Area}\n\t\t\t\t\t\t\tstates={this.state.filterKeys.State}\n\t\t\t\t\t\t\tzones={this.props.zones}\n\t\t\t\t\t\t\tstateCodeFilter={stateCodeFilter}\n\t\t\t\t\t\t\thandleAreaChange={this.handleAreaChange}\n\t\t\t\t\t\t\thandleRemoveFilter={this.handleRemoveFilter}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StoreFilter\n\t\t\t\t\t\t\tstore={this.state.filterKeys.Store}\n\t\t\t\t\t\t\tarea={this.state.filterKeys.Area}\n\t\t\t\t\t\t\tstores={this.props.stores}\n\t\t\t\t\t\t\thandleStoreChange={this.handleStoreChange}\n\t\t\t\t\t\t\thandleRemoveFilter={this.handleRemoveFilter}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Form>\n\t\t\t\t</section>\n\t\t\t\t<section className=\"date_range_section\">\n\t               \t<div className=\"filter_label\">Range: </div>\n\t               \t<div className=\"InputFromTo\">\n\t                  \t<div className=\"DayPickerInput\">\n\t                     \t<Calendar\n\t\t\t\t\t\t\t\tselectDate={this.state.startDate}\n\t\t\t\t\t\t\t\tstartDate={this.state.startDate}\n\t\t\t\t\t\t\t\tendDate={this.state.endDate}\n\t\t\t\t\t\t\t\tonSelectDate={this.onSelectStartDate}\n\t\t\t\t\t\t\t\tonDateRange={this.onDateRange}\n\t\t\t\t\t\t\t\tclassName=\"t_box\"\n\t\t\t\t\t\t\t\tplaceholder=\"Start Date\"\n\t\t\t\t\t\t\t\ttillDate={this.tillDate}\n\t                     \t/>\n\t                  \t</div>\n\t                  \t{' '}\n\t                  \t<span className=\"to\">to</span> {' '}\n\t                  \t<span className=\"InputFromTo-to\">\n\t                     \t<div className=\"DayPickerInput\">\n\t\t                        <Calendar\n\t\t\t\t\t\t\t\t\tselectDate={this.state.endDate}\n\t\t\t\t\t\t\t\t\tstartDate={this.state.startDate}\n\t\t\t\t\t\t\t\t\tendDate={this.state.endDate}\n\t\t\t\t\t\t\t\t\tonSelectDate={this.onSelectEndDate}\n\t\t\t\t\t\t\t\t\tonDateRange={this.onDateRange}\n\t\t\t\t\t\t\t\t\tclassName=\"t_box\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"End Date\"\n\t\t\t\t\t\t\t\t\tdisabled={!!!this.state.startDate}\n\t\t\t\t\t\t\t\t\ttillDate={this.tillDate}\n\t\t                        />\n\t                     \t</div>\n\t                  \t</span>\n\t               \t</div>\n\t            </section>\n\t\t\t\t{/*<div className=\"liveOrders\">313 Live Orders</div>*/}\n\t            {\n\t\t            (this.state.filterKeys.State.length > 0 || this.state.filterKeys.Area.length > 0 || this.state.filterKeys.Store.length > 0) ?\n\t\t            <section className=\"filter-tag_section\">\n\t\t               \t{\n\t\t                  \t(this.state.filterKeys.State.length > 0) ?\n\t\t                     this.state.filterKeys.State.map((filter, index) => {\n\t\t                        return (\n\t\t                           <span key={`state-tag-${index}`} className=\"f-tag\">{filter.label}\n\t\t                              \t<a onClick={(e) => this.handleRemoveFilter(e, 'State', index)}>\n\t                                 \t\t<img src=\"/assets/cancel-ico.svg\" alt=\"close\" />\n\t\t                              \t</a>\n\t\t                           </span>\n\t\t                        )\n\t                     \t}) : null\n\t\t               \t}\n\n\t\t               \t{\n\t\t                  \t(this.state.filterKeys.Area.length > 0) ?\n\t                     \tthis.state.filterKeys.Area.map((filter, index) => {\n\t\t                        return (\n\t\t                           \t<span key={`area-tag-${index}`} className=\"f-tag\">{filter.label}\n\t\t                              \t<a onClick={(e) => this.handleRemoveFilter(e, 'Area', index)}>\n\t                                 \t\t<img src=\"/assets/cancel-ico.svg\" alt=\"close\" />\n\t\t                              \t</a>\n\t\t                           \t</span>\n\t\t                        )\n\t                     \t}) : null\n\t\t               \t}\n\n\t\t               \t{\n\t\t                  \t(this.state.filterKeys.Store.length > 0) ?\n                     \t\tthis.state.filterKeys.Store.map((filter, index) => {\n\t\t                        return (\n\t\t                           \t<span key={`store-tag-${index}`} className=\"f-tag\">{filter.label}\n\t\t                              \t<a onClick={(e) => this.handleRemoveFilter(e, 'Store', index)}>\n\t                                 \t\t<img src=\"/assets/cancel-ico.svg\" alt=\"close\" />\n\t\t                              \t</a>\n\t\t                           \t</span>\n\t\t                        )\n\t                     \t}) : null\n\t\t               \t}\n\t\t            </section>:null\n\t         \t}\n\t\t\t</div>\n\t\t);\n\t};\n};\n\nexport default Filter;"]},"metadata":{},"sourceType":"module"}