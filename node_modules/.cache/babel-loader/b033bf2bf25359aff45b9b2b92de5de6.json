{"ast":null,"code":"import _regeneratorRuntime from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(get_settings),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(authenticate),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(watchHeaderStore);\n\nimport { takeEvery, put, call } from 'redux-saga/effects';\nimport * as headerConstant from '../constants';\nimport { error as notifyerror } from '../../../util/notify';\nimport * as headerAction from '../actions';\nimport { callApi, callApiV2 } from '../../../Helper/api';\nimport { setFilter } from '../../../Helper/common'; //Get Settings\n\nexport function get_settings(action) {\n  var url, payload, result, filter;\n  return _regeneratorRuntime.wrap(function get_settings$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          url = '';\n          url = \"auth/get-user-settings\";\n          _context.next = 5;\n          return call(callApiV2, 'GET', url);\n\n        case 5:\n          payload = _context.sent;\n\n          if (!payload.data.error) {\n            _context.next = 9;\n            break;\n          }\n\n          _context.next = 9;\n          return put(headerAction.listenSettingsError());\n\n        case 9:\n          if (!payload.data.result) {\n            _context.next = 16;\n            break;\n          }\n\n          result = payload.data.result;\n          filter = result.filter || {};\n\n          if (!!filter) {\n            Object.keys(filter || {}).forEach(function (k) {\n              filter[k] = JSON.parse(filter[k] || '{}');\n            });\n          }\n\n          ;\n          _context.next = 16;\n          return put(headerAction.listenSettingsSuccess({\n            settings: result.settings || {},\n            userType: result.user_type || '',\n            logo: {\n              path: result.path,\n              image: result.logo\n            },\n            showReport: result.show_report,\n            filterData: filter\n          }));\n\n        case 16:\n          _context.next = 23;\n          break;\n\n        case 18:\n          _context.prev = 18;\n          _context.t0 = _context[\"catch\"](0);\n          _context.next = 22;\n          return put(headerAction.listenSettingsError());\n\n        case 22:\n          console.log({\n            message: _context.t0.message\n          });\n\n        case 23:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 18]]);\n} //Authenticate\n\nexport function authenticate(action) {\n  var url, payload, result;\n  return _regeneratorRuntime.wrap(function authenticate$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          url = '';\n          url = \"auth/authenticate\";\n          _context2.next = 5;\n          return call(callApi, 'GET', url);\n\n        case 5:\n          payload = _context2.sent;\n\n          if (!payload.data.error) {\n            _context2.next = 9;\n            break;\n          }\n\n          _context2.next = 9;\n          return put(headerAction.listenAuthenticateError());\n\n        case 9:\n          if (!payload.data.result) {\n            _context2.next = 13;\n            break;\n          }\n\n          result = payload.data.result; //console.log('Saga : ', result)\n          //notifysuccess({message:result.message});\n\n          _context2.next = 13;\n          return put(headerAction.listenAuthenticateSuccess(result));\n\n        case 13:\n          _context2.next = 20;\n          break;\n\n        case 15:\n          _context2.prev = 15;\n          _context2.t0 = _context2[\"catch\"](0);\n          _context2.next = 19;\n          return put(headerAction.listenAuthenticateError());\n\n        case 19:\n          console.log(_context2.t0.message);\n\n        case 20:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 15]]);\n}\nexport function watchHeaderStore() {\n  return _regeneratorRuntime.wrap(function watchHeaderStore$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return takeEvery(headerConstant.GET_SETTINGS, get_settings);\n\n        case 3:\n          _context3.next = 5;\n          return takeEvery(headerConstant.AUTHENTICATE, authenticate);\n\n        case 5:\n          _context3.next = 10;\n          break;\n\n        case 7:\n          _context3.prev = 7;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.log(_context3.t0);\n\n        case 10:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 7]]);\n}","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/containers/Header/Saga/index.js"],"names":["get_settings","authenticate","watchHeaderStore","takeEvery","put","call","headerConstant","error","notifyerror","headerAction","callApi","callApiV2","setFilter","action","url","payload","data","listenSettingsError","result","filter","Object","keys","forEach","k","JSON","parse","listenSettingsSuccess","settings","userType","user_type","logo","path","image","showReport","show_report","filterData","console","log","message","listenAuthenticateError","listenAuthenticateSuccess","GET_SETTINGS","AUTHENTICATE"],"mappings":"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","sourcesContent":["import { takeEvery, put, call } from 'redux-saga/effects';\nimport * as headerConstant from '../constants';\nimport {error as notifyerror} from '../../../util/notify';\nimport * as headerAction from '../actions';\nimport {callApi, callApiV2} from '../../../Helper/api';\nimport { setFilter } from '../../../Helper/common';\n\n//Get Settings\nexport function* get_settings(action){\n    try {\n        let url             =  '';\n        url                 =  `auth/get-user-settings`;\n        const payload = yield call(callApiV2, 'GET', url);\n\n        // check for error\n        if(payload.data.error){\n            //notifyerror(payload.data.error);\n            yield put(headerAction.listenSettingsError());\n        }\n\n        // handle success result\n        if(payload.data.result){\n            let result = payload.data.result;\n            let filter  =   result.filter || {};\n            if(!!filter) {\n                Object.keys(filter || {}).forEach(k => {\n                    filter[k]       =   JSON.parse(filter[k] || '{}');\n                })\n            };\n\n            yield put(headerAction.listenSettingsSuccess({\n                settings: result.settings || {},\n                userType: result.user_type || '',\n                logo: {path: result.path, image: result.logo},\n                showReport: result.show_report,\n                filterData: filter\n            }));\n        }\n    } catch (e) {\n        //notifyerror(e);\n        yield put(headerAction.listenSettingsError());\n        console.log({message: e.message});\n    }\n}\n\n\n//Authenticate\nexport function* authenticate(action){\n    try {\n        let url             =  '';\n        url                 =  `auth/authenticate`;\n        const payload = yield call(callApi, 'GET', url);\n        \n        // check for error\n        if(payload.data.error){\n            //notifyerror(payload.data.error);\n            yield put(headerAction.listenAuthenticateError());\n        }\n\n        // handle success result\n        if(payload.data.result){\n            let result = payload.data.result;\n            //console.log('Saga : ', result)\n            //notifysuccess({message:result.message});\n            yield put(headerAction.listenAuthenticateSuccess(result));\n        }\n    } catch (e) {\n        //notifyerror(e);\n        yield put(headerAction.listenAuthenticateError());\n        console.log(e.message);\n    }\n}\n\nexport function* watchHeaderStore() {\n    try{\n        yield takeEvery( headerConstant.GET_SETTINGS, get_settings );\n        yield takeEvery( headerConstant.AUTHENTICATE, authenticate );\n    } catch(e){\n        console.log(e)\n    }\n}"]},"metadata":{},"sourceType":"module"}