{"ast":null,"code":"import _objectSpread from\"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React from'react';import{Switch,Route,Redirect}from'react-router';import{useLocation}from'react-router-dom';import{isEmpty}from'lodash';import Dashboard from'./components/Dashboard';import Feedback from'./components/Feedbacks';import Settings from'./components/Settings';import Reports from'./components/Reports';import Login from'./components/Login';import ForgotPassword from'./components/ForgotPassword';import ResetPassword from'./components/ResetPassword';import Home from'./components/Home';import Header from'./components/common/Header';import Sidebar from'./components/common/Sidebar';import TaskHistory from'./components/TaskHistory';import{get as getDomainCookie,getCookie,setCookie}from'./util/cookies';import Config from'./config';import{Container}from'reactstrap';export var routes=[{path:'/',exact:true,component:Home},{path:'/login',component:Login},{path:'/reset-password/:id',component:ResetPassword},{path:'/forgot-password',component:ForgotPassword}];export var privateRoutes=[{path:'/dashboard',component:Dashboard},{path:'/feedback',component:Feedback},{path:'/reports',component:Reports},{path:'/settings',component:Settings},{path:'/task-history',component:TaskHistory}];export default function Router(){//console.log(getCookie('foodjets_merchant'), getDomainCookie());\nvar user={};if(typeof window!=='undefined'){var newCookie=getDomainCookie()||{};var currentCookie=getCookie('foodjets_merchant')||{};//user              = newCookie || {};\nuser=currentCookie||{};if(newCookie.token!=currentCookie.token){//  setCookie(newCookie, 'foodjets_merchant');\nvar states=JSON.parse(localStorage.getItem('states')||'[]');//console.log('States : ', states, Config, Config.states, !!states, states.length === 0);\nif(states.length===0)localStorage.setItem('states',JSON.stringify(Config.states||[]));//window.location.reload();\n}}//console.log('Routes User : ', user);\n/* if(typeof window !== 'undefined' && !isEmpty(localStorage.getItem('user'))) {\n    user            = JSON.parse(localStorage.getItem('user'));\n  } */var location=useLocation();var currentPage=location.pathname;//console.log(location.pathname, currentPage, currentPage !== '/' && currentPage !== '/login', window.location.pathname);\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,{user:user,currentPage:currentPage}),/*#__PURE__*/React.createElement(Container,{fluid:true,className:\"p-0 section_wrap\"},currentPage!=='/'&&currentPage!=='/login'&&currentPage!=='/forgot-password'&&!currentPage.includes(\"/reset-password\")?/*#__PURE__*/React.createElement(Sidebar,{user:user,currentPage:currentPage}):null,/*#__PURE__*/React.createElement(Switch,null,privateRoutes.map(function(route){return/*#__PURE__*/React.createElement(PrivateRoute,{key:route.path,path:route.path,component:route.component,userData:user});}),routes.map(function(route){return/*#__PURE__*/React.createElement(Route,Object.assign({key:\"index \".concat(route.path)},route));}))));}function PrivateRoute(_ref){var Component=_ref.component,rest=_objectWithoutProperties(_ref,[\"component\"]);var obj=_objectSpread({component:Component},rest);var user=obj.userData;//console.log('Private Route : ', !isEmpty(user));\nif(!isEmpty(user)){return/*#__PURE__*/React.createElement(Route,{key:obj.path,path:obj.path,component:function component(){return/*#__PURE__*/React.createElement(obj.component,{userData:user});}});}else{//console.log('Unauthorised');\nreturn/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/login\"}});}}","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/routes.js"],"names":["React","Switch","Route","Redirect","useLocation","isEmpty","Dashboard","Feedback","Settings","Reports","Login","ForgotPassword","ResetPassword","Home","Header","Sidebar","TaskHistory","get","getDomainCookie","getCookie","setCookie","Config","Container","routes","path","exact","component","privateRoutes","Router","user","window","newCookie","currentCookie","token","states","JSON","parse","localStorage","getItem","length","setItem","stringify","location","currentPage","pathname","includes","map","route","PrivateRoute","Component","rest","obj","userData"],"mappings":"2TACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,QAAxB,KAAwC,cAAxC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,OAAT,KAAwB,QAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,cAAP,KAA2B,6BAA3B,CACA,MAAOC,CAAAA,aAAP,KAA0B,4BAA1B,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,6BAApB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,OAAQC,GAAG,GAAIC,CAAAA,eAAf,CAAgCC,SAAhC,CAA2CC,SAA3C,KAA2D,gBAA3D,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OACEC,SADF,KAEO,YAFP,CAIA,MAAO,IAAMC,CAAAA,MAAM,CAAG,CAAC,CACnBC,IAAI,CAAE,GADa,CAEnBC,KAAK,CAAE,IAFY,CAGnBC,SAAS,CAAEb,IAHQ,CAAD,CAIjB,CACDW,IAAI,CAAE,QADL,CAEDE,SAAS,CAAEhB,KAFV,CAJiB,CASpB,CACEc,IAAI,CAAE,qBADR,CAEEE,SAAS,CAAEd,aAFb,CAToB,CAcpB,CACEY,IAAI,CAAE,kBADR,CAEEE,SAAS,CAAEf,cAFb,CAdoB,CAAf,CAoBP,MAAO,IAAMgB,CAAAA,aAAa,CAAG,CAAC,CAC5BH,IAAI,CAAE,YADsB,CAE5BE,SAAS,CAAEpB,SAFiB,CAAD,CAG1B,CACDkB,IAAI,CAAE,WADL,CAEDE,SAAS,CAAEnB,QAFV,CAH0B,CAM1B,CACDiB,IAAI,CAAE,UADL,CAEDE,SAAS,CAAEjB,OAFV,CAN0B,CAS1B,CACDe,IAAI,CAAE,WADL,CAEDE,SAAS,CAAElB,QAFV,CAT0B,CAY1B,CACDgB,IAAI,CAAE,eADL,CAEDE,SAAS,CAAEV,WAFV,CAZ0B,CAAtB,CAkBP,cAAe,SAASY,CAAAA,MAAT,EAAkB,CAC/B;AACA,GAAIC,CAAAA,IAAI,CAAY,EAApB,CACA,GAAG,MAAOC,CAAAA,MAAP,GAAkB,WAArB,CAAkC,CAChC,GAAIC,CAAAA,SAAS,CAAOb,eAAe,IAAM,EAAzC,CACA,GAAIc,CAAAA,aAAa,CAAGb,SAAS,CAAC,mBAAD,CAAT,EAAkC,EAAtD,CACA;AACAU,IAAI,CAAgBG,aAAa,EAAI,EAArC,CACA,GAAGD,SAAS,CAACE,KAAV,EAAmBD,aAAa,CAACC,KAApC,CAA2C,CAC3C;AACE,GAAIC,CAAAA,MAAM,CAAQC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,QAArB,GAAkC,IAA7C,CAAlB,CACA;AACA,GAAGJ,MAAM,CAACK,MAAP,GAAkB,CAArB,CACEF,YAAY,CAACG,OAAb,CAAqB,QAArB,CAA+BL,IAAI,CAACM,SAAL,CAAepB,MAAM,CAACa,MAAP,EAAiB,EAAhC,CAA/B,EACF;AACD,CACF,CACD;AACA;;MAGA,GAAIQ,CAAAA,QAAQ,CAAQtC,WAAW,EAA/B,CACA,GAAIuC,CAAAA,WAAW,CAAKD,QAAQ,CAACE,QAA7B,CACA;AACA,mBACE,oBAAC,KAAD,CAAO,QAAP,mBACE,oBAAC,MAAD,EAAQ,IAAI,CAAEf,IAAd,CAAoB,WAAW,CAAEc,WAAjC,EADF,cAEE,oBAAC,SAAD,EAAW,KAAK,KAAhB,CAAiB,SAAS,CAAC,kBAA3B,EAEKA,WAAW,GAAK,GAAhB,EAAuBA,WAAW,GAAK,QAAvC,EAAmDA,WAAW,GAAK,kBAAnE,EAAyF,CAACA,WAAW,CAACE,QAAZ,CAAqB,iBAArB,CAA3F,cAAuI,oBAAC,OAAD,EAAS,IAAI,CAAEhB,IAAf,CAAqB,WAAW,CAAEc,WAAlC,EAAvI,CAA0L,IAF9L,cAKE,oBAAC,MAAD,MACGhB,aAAa,CAACmB,GAAd,CAAkB,SAACC,KAAD,qBACjB,oBAAC,YAAD,EAAc,GAAG,CAAEA,KAAK,CAACvB,IAAzB,CAA+B,IAAI,CAAEuB,KAAK,CAACvB,IAA3C,CAAiD,SAAS,CAAEuB,KAAK,CAACrB,SAAlE,CAA6E,QAAQ,CAAEG,IAAvF,EADiB,EAAlB,CADH,CAIGN,MAAM,CAACuB,GAAP,CAAW,SAAAC,KAAK,qBACf,oBAAC,KAAD,gBAAO,GAAG,iBAAWA,KAAK,CAACvB,IAAjB,CAAV,EAAuCuB,KAAvC,EADe,EAAhB,CAJH,CALF,CAFF,CADF,CAmBD,CAED,QAASC,CAAAA,YAAT,MAAyD,IAAtBC,CAAAA,SAAsB,MAAjCvB,SAAiC,CAARwB,IAAQ,8CACvD,GAAIC,CAAAA,GAAG,gBAAWzB,SAAS,CAAEuB,SAAtB,EAAoCC,IAApC,CAAP,CACA,GAAIrB,CAAAA,IAAI,CAAQsB,GAAG,CAACC,QAApB,CACA;AACA,GAAG,CAAC/C,OAAO,CAACwB,IAAD,CAAX,CAAmB,CACjB,mBACE,oBAAC,KAAD,EAAO,GAAG,CAAEsB,GAAG,CAAC3B,IAAhB,CAAsB,IAAI,CAAE2B,GAAG,CAAC3B,IAAhC,CAAsC,SAAS,CAAE,wCAAM,oBAAC,GAAD,CAAK,SAAL,EAAe,QAAQ,CAAEK,IAAzB,EAAN,EAAjD,EADF,CAGD,CAJD,IAIO,CACL;AACA,mBACE,oBAAC,QAAD,EACE,EAAE,CAAE,CACFe,QAAQ,CAAE,QADR,CADN,EADF,CAOD,CACF","sourcesContent":["\nimport React from 'react';\nimport { Switch, Route, Redirect } from 'react-router';\nimport { useLocation } from 'react-router-dom';\nimport { isEmpty } from 'lodash';\nimport Dashboard from './components/Dashboard';\nimport Feedback from './components/Feedbacks';\nimport Settings from './components/Settings';\nimport Reports from './components/Reports';\nimport Login from './components/Login';\nimport ForgotPassword from './components/ForgotPassword';\nimport ResetPassword from './components/ResetPassword';\nimport Home from './components/Home';\nimport Header from './components/common/Header';\nimport Sidebar from './components/common/Sidebar';\nimport TaskHistory from './components/TaskHistory';\nimport {get as getDomainCookie, getCookie, setCookie} from './util/cookies';\nimport Config from './config';\nimport {\n  Container\n} from 'reactstrap';\n\nexport const routes = [{\n    path: '/',\n    exact: true,\n    component: Home\n  }, {\n    path: '/login',\n    component: Login,\n    \n  }, \n  {\n    path: '/reset-password/:id',\n    component: ResetPassword,\n    \n  },\n  {\n    path: '/forgot-password',\n    component: ForgotPassword,\n    \n  }];\n\nexport const privateRoutes = [{\n  path: '/dashboard',\n  component: Dashboard\n}, {\n  path: '/feedback',\n  component: Feedback\n}, {\n  path: '/reports',\n  component: Reports\n}, {\n  path: '/settings',\n  component: Settings\n}, {\n  path: '/task-history',\n  component: TaskHistory\n}\n];\n\nexport default function Router() {\n  //console.log(getCookie('foodjets_merchant'), getDomainCookie());\n  let user          = {};\n  if(typeof window !== 'undefined') {\n    let newCookie     = getDomainCookie() || {};\n    let currentCookie = getCookie('foodjets_merchant') || {};\n    //user              = newCookie || {};\n    user              = currentCookie || {};\n    if(newCookie.token != currentCookie.token) {\n    //  setCookie(newCookie, 'foodjets_merchant');\n      let states      = JSON.parse(localStorage.getItem('states') || '[]');\n      //console.log('States : ', states, Config, Config.states, !!states, states.length === 0);\n      if(states.length === 0)\n        localStorage.setItem('states', JSON.stringify(Config.states || []));\n      //window.location.reload();\n    }\n  }\n  //console.log('Routes User : ', user);\n  /* if(typeof window !== 'undefined' && !isEmpty(localStorage.getItem('user'))) {\n    user            = JSON.parse(localStorage.getItem('user'));\n  } */\n  let location      = useLocation();\n  let currentPage   = location.pathname;\n  //console.log(location.pathname, currentPage, currentPage !== '/' && currentPage !== '/login', window.location.pathname);\n  return (\n    <React.Fragment>\n      <Header user={user} currentPage={currentPage}/>\n      <Container fluid className=\"p-0 section_wrap\" >\n        {\n          (currentPage !== '/' && currentPage !== '/login' && currentPage !== '/forgot-password' && !currentPage.includes(\"/reset-password\") ) ? <Sidebar user={user} currentPage={currentPage}/> : null\n        }\n        {/* <input type=\"checkbox\" name=\"check\" /> Yes */}\n        <Switch>\n          {privateRoutes.map((route) => (\n            <PrivateRoute key={route.path} path={route.path} component={route.component} userData={user} />\n          ))}\n          {routes.map(route => (\n            <Route key={`index ${route.path}`} {...route} />\n          ))}\n        </Switch>\n      </Container>\n    </ React.Fragment>  \n  );\n}\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n  let obj       = { component: Component, ...rest };\n  let user      = obj.userData;\n  //console.log('Private Route : ', !isEmpty(user));\n  if(!isEmpty(user)) {\n    return (\n      <Route key={obj.path} path={obj.path} component={() => <obj.component userData={user} />} />\n    )\n  } else {\n    //console.log('Unauthorised');\n    return (\n      <Redirect\n        to={{\n          pathname: \"/login\"\n        }}\n      />\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}