{"ast":null,"code":"import _classCallCheck from\"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import lodash from'lodash';import{withRouter}from'react-router-dom';import Profile from'./profile';import ChangePassword from'./changePassword';import Stores from'./stores';import AddLocation from'../Modals/addLocation';import Users from'./users';import AddUserModal from'../Modals/addUserModal';import{confirmAlert}from'react-confirm-alert';import'react-confirm-alert/src/react-confirm-alert.css';var SettingComponent=/*#__PURE__*/function(_React$Component){_inherits(SettingComponent,_React$Component);var _super=_createSuper(SettingComponent);function SettingComponent(props){var _this;_classCallCheck(this,SettingComponent);_this=_super.call(this,props);_this.handleShowLocation=function(){_this.setState({show:true});};_this.select=function(value){_this.setState({type:value},function(){if(value==='Users'){_this.props.getUsers();};});};_this.handleClose=function(){_this.setState({show:false});};_this.state={type:'General',show:false,showUserModel:false,userAction:null,initialUserErrorData:{first_name:'',last_name:'',email:'',user_type:''},initialUserData:{first_name:'',last_name:'',email:'',user_type:'general',active:true,show_report:false}};_this.handleShowUserModel=_this.handleShowUserModel.bind(_assertThisInitialized(_this));return _this;}_createClass(SettingComponent,[{key:\"handleShowUserModel\",value:function handleShowUserModel(action,id){var _this2=this;id=id||null;action=action||null;if(action==='ADD'){this.setState({userAction:action,showUserModel:true,initialUserErrorData:{first_name:'',last_name:'',email:'',user_type:''},initialUserData:{first_name:'',last_name:'',email:'',user_type:'general',active:true,show_report:false}});}else if(action==='EDIT'){var userObj=this.props.usersList||{};var users=userObj&&userObj.users||[];var team=lodash.find(users,{id:id});if(typeof team==='object'){var initialData=lodash.pick(team,['id','first_name','last_name','email','user_type','active','show_report']);initialData.active=initialData.active==='true'?true:false;initialData.show_report=initialData.show_report==='true'?true:false;this.setState({userAction:action,showUserModel:true,initialUserData:initialData,initialUserErrorData:{first_name:'',last_name:'',email:'',user_type:''}});}else{console.log('The document not found');}}else if(action==='SUSPEND'){confirmAlert({title:\"Suspend this user's account?\",message:'This user will not be able to access their account until their account is reinstated.',closeOnClickOutside:false,buttons:[{label:'Cancel',onClick:function onClick(){return console.log('Click No');}},{label:'Suspend',onClick:function onClick(){var userObj=_this2.props.usersList||{};var users=userObj&&userObj.users||[];var team=lodash.find(users,{id:id});if(typeof team==='object'){var _initialData=lodash.pick(team,['id','first_name','last_name','email','user_type','show_report']);_initialData.active='false';_this2.props.suspendUser(_initialData);}else{console.log('The document not found');}}}]});}else if(action==='DELETE'){confirmAlert({title:\"Delete this user's account?\",message:'Deleting an account will permanently removed it from your database.',closeOnClickOutside:false,buttons:[{label:'Cancel',onClick:function onClick(){return console.log('Click No');}},{label:'Delete',onClick:function onClick(){_this2.props.deleteUser(id);}}]});}else if(action==='CLOSE'){// close\nthis.setState({userAction:action,showUserModel:false});}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(props){if(props.isUserUpdating&&props.isUserUpdating!==this.props.isUserUpdating){this.handleShowUserModel('CLOSE');};}},{key:\"render\",value:function render(){var _this3=this;var userType=this.props.userType;var _this$state=this.state,type=_this$state.type,showUserModel=_this$state.showUserModel,userAction=_this$state.userAction,initialUserData=_this$state.initialUserData,initialUserErrorData=_this$state.initialUserErrorData;return/*#__PURE__*/React.createElement(\"main\",{className:\"dash right_sec settingp\"},/*#__PURE__*/React.createElement(\"section\",{className:\"con_top\"},userType&&userType==='admin'?/*#__PURE__*/React.createElement(\"ul\",{className:\"settingtmenu\"},/*#__PURE__*/React.createElement(\"li\",{className:type==='General'?'active':'',onClick:function onClick(){return _this3.select('General');}},/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/general_ico.svg\",alt:\"Stores\"}),\" General\"),/*#__PURE__*/React.createElement(\"li\",{className:type==='Users'?'active':'',onClick:function onClick(){return _this3.select('Users');}},/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/useres_ico.svg\",alt:\"Stores\"}),\" Users\"),/*#__PURE__*/React.createElement(\"li\",{className:type==='Stores'?'active':'',onClick:function onClick(){return _this3.select('Stores');}},/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/stores_ico.svg\",alt:\"Stores\"}),\" Stores\")):/*#__PURE__*/React.createElement(\"ul\",{className:\"settingtmenu\"},/*#__PURE__*/React.createElement(\"li\",{className:type==='General'?'active':'',onClick:function onClick(){return _this3.select('General');}},/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/general_ico.svg\",alt:\"Stores\"}),\" General\")),this.state.type==='Stores'?/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleShowLocation,type:\"button\",className:\"btn btn_blue userbtn\"},\"Add Store \",/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/plus.svg\",alt:\"\"})):null,this.state.type==='Users'?/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){_this3.handleShowUserModel('ADD');},type:\"button\",className:\"btn btn_blue userbtn\"},\"Add User \",/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/plus.svg\",alt:\"\"})):null,/*#__PURE__*/React.createElement(AddLocation,{show:this.state.show,handleClose:this.handleClose,isProcessing:this.props.isLocProcessing,addLocation:this.props.addLocation}),/*#__PURE__*/React.createElement(AddUserModal,{action:userAction,isUserUpdating:this.props.isUserUpdating,addUserData:this.props.addUser,updateUserData:this.props.editUser,show:showUserModel,handleShowUserModel:this.handleShowUserModel,initialData:initialUserData,initialUserErrorData:initialUserErrorData})),/*#__PURE__*/React.createElement(\"section\",{className:\"setting_wrap\"},this.state.type==='General'?/*#__PURE__*/React.createElement(\"div\",{className:\"general_pan\"},/*#__PURE__*/React.createElement(Profile,{profileData:this.props.profileData,isProcessing:this.props.isProcessing,updateProfile:this.props.updateProfile,getInfo:this.props.getInfo}),/*#__PURE__*/React.createElement(ChangePassword,{isProcessing:this.props.isPassProcessing,changePassword:this.props.changePassword})):null,this.state.type==='Users'?/*#__PURE__*/React.createElement(Users,{action:userAction,isLoading:this.props.isUserLoading,usersList:this.props.usersList,handleShowUserModel:this.handleShowUserModel}):null,this.state.type==='Stores'?/*#__PURE__*/React.createElement(Stores,{isLoading:this.props.isStoreLoading,isProcessing:this.props.isStoreProcessing,storesList:this.props.storesList,getStores:this.props.getStores,editStore:this.props.editStore,deleteStore:this.props.deleteStore}):null));}}]);return SettingComponent;}(React.Component);SettingComponent.defaultProps={usersList:{},profileData:{},addUser:function addUser(){},editUser:function editUser(){},getUsers:function getUsers(){},suspendUser:function suspendUser(){},deleteUser:function deleteUser(){},isUserLoading:false,isUserUpdating:false};;export default withRouter(SettingComponent);","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/containers/Settings/setting.js"],"names":["React","lodash","withRouter","Profile","ChangePassword","Stores","AddLocation","Users","AddUserModal","confirmAlert","SettingComponent","props","handleShowLocation","setState","show","select","value","type","getUsers","handleClose","state","showUserModel","userAction","initialUserErrorData","first_name","last_name","email","user_type","initialUserData","active","show_report","handleShowUserModel","bind","action","id","userObj","usersList","users","team","find","initialData","pick","console","log","title","message","closeOnClickOutside","buttons","label","onClick","suspendUser","deleteUser","isUserUpdating","userType","isLocProcessing","addLocation","addUser","editUser","profileData","isProcessing","updateProfile","getInfo","isPassProcessing","changePassword","isUserLoading","isStoreLoading","isStoreProcessing","storesList","getStores","editStore","deleteStore","Component","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport lodash from 'lodash';\nimport { PropTypes as PT } from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport Profile from './profile';\nimport ChangePassword from './changePassword';\nimport Stores from './stores';\nimport AddLocation from '../Modals/addLocation';\nimport Users from './users';\nimport AddUserModal from '../Modals/addUserModal';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nclass SettingComponent extends React.Component {\n\tstatic propTypes = {\n\t\tisLoading: PT.bool,\n\t\taddUser: PT.func,\n\t\teditUser: PT.func,\n\t\tgetUsers: PT.func,\n\t\tdeleteUser: PT.func,\n\t\tsuspendUser: PT.func,\n\t\tusersList: PT.object,\n\t\tprofileData: PT.object,\n\t\tisUserLoading: PT.bool,\n\t\tisUserUpdating: PT.bool\n\t};\n\n\tstatic defaultProps = {\n\t\tusersList: {},\n\t\tprofileData: {},\n\t \taddUser: () => { },\n\t \teditUser: () => { },\n\t \tgetUsers: () => { },\n\t \tsuspendUser: () => { },\n\t \tdeleteUser: () => { },\n\t \tisUserLoading: false,\n\t \tisUserUpdating: false\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttype\t\t:\t'General',\n\t\t\tshow\t\t:\tfalse,\n\t\t\tshowUserModel :\tfalse,\n\t\t\tuserAction: null,\n\t\t\tinitialUserErrorData: {\n\t\t\t\tfirst_name: '',\n                last_name: '',\n                email: '',\n                user_type: ''\n\t\t\t},\n\t\t\tinitialUserData: {\n\t\t\t\tfirst_name: '',\n                last_name: '',\n                email: '',\n                user_type: 'general',\n                active: true,\n                show_report: false\n\t\t\t}\n\t\t}; \n\n\t\tthis.handleShowUserModel = this.handleShowUserModel.bind(this);\n\t};\n\n\thandleShowLocation\t= () => {\n\t\tthis.setState({\n\t\t\tshow: true\n\t\t})\n\t};\n\n\thandleShowUserModel(action, id) {\n\t\tid = id || null;\n\t\taction = action || null;\n\n\t\tif (action === 'ADD') {\n\t\t\tthis.setState({\n\t\t\t\tuserAction: action,\n\t\t\t\tshowUserModel: true,\n\t\t\t\tinitialUserErrorData: {\n\t\t\t\t\tfirst_name: '',\n\t                last_name: '',\n\t                email: '',\n\t                user_type: ''\n\t\t\t\t},\n\t\t\t\tinitialUserData: {\n\t\t\t\t\tfirst_name: '',\n\t                last_name: '',\n\t                email: '',\n\t                user_type: 'general',\n\t                active: true,\n\t                show_report: false\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (action === 'EDIT') {\n\t\t\tlet userObj = this.props.usersList || {};\n\t\t\tlet users = (userObj && userObj.users) || [];\n\t\t\tlet team = lodash.find(users, { id: id });\n\t\t\tif (typeof team === 'object') {\n\t\t\t\tlet initialData = lodash.pick(team, ['id', 'first_name', 'last_name', 'email', 'user_type', 'active', 'show_report']);\n\n\t\t\t\tinitialData.active = (initialData.active === 'true')?true:false;\n\t\t\t\tinitialData.show_report = (initialData.show_report === 'true')?true:false;\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tuserAction: action,\n\t\t\t\t\tshowUserModel: true,\n\t\t\t\t\tinitialUserData: initialData,\n\t\t\t\t\tinitialUserErrorData: {\n\t\t\t\t\t\tfirst_name: '',\n\t\t                last_name: '',\n\t\t                email: '',\n\t\t                user_type: ''\n\t\t\t\t\t}\n\t\t\t\t});\t\t\t\t\n\t\t\t} else {\n\t\t\t\tconsole.log('The document not found');\n\t\t\t}\n\t\t} else if (action === 'SUSPEND') {\n\t\t\tconfirmAlert({\n\t\t\t\ttitle: \"Suspend this user's account?\",\n\t\t\t\tmessage: 'This user will not be able to access their account until their account is reinstated.',\n\t\t\t\tcloseOnClickOutside: false,\n\t\t\t\tbuttons: [\t\t\t\t\t\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Cancel',\n\t\t\t\t\t\tonClick: () => console.log('Click No')\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Suspend',\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\tlet userObj = this.props.usersList || {};\n\t\t\t\t\t\t\tlet users = (userObj && userObj.users) || [];\n\t\t\t\t\t\t\tlet team = lodash.find(users, { id: id });\n\t\t\t\t\t\t\tif (typeof team === 'object') {\n\t\t\t\t\t\t\t\tlet initialData = lodash.pick(team, ['id', 'first_name', 'last_name', 'email', 'user_type', 'show_report']);\n\n\t\t\t\t\t\t\t\tinitialData.active = 'false';\n\t\t\t\t\t\t\t\tthis.props.suspendUser(initialData);\t\t\t\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.log('The document not found');\n\t\t\t\t\t\t\t}\n\t\t\t          \t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\t\t\n\t\t} else if (action === 'DELETE') {\n\t\t\tconfirmAlert({\n\t\t\t\ttitle: \"Delete this user's account?\",\n\t\t\t\tmessage: 'Deleting an account will permanently removed it from your database.',\n\t\t\t\tcloseOnClickOutside: false,\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Cancel',\n\t\t\t\t\t\tonClick: () => console.log('Click No')\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Delete',\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\tthis.props.deleteUser(id);\t\n\t\t\t          \t}\n\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t]\n\t\t\t});\t\t\t\t\n\t\t} else if (action === 'CLOSE') { // close\n\t\t\tthis.setState({\n\t\t\t\tuserAction: action,\n\t\t\t\tshowUserModel: false\n\t\t\t});\n\t\t}\n\t};\n\t\n\tselect = (value) => {\n\t\tthis.setState({ type : value }, ()=> {\n\t\t\tif(value === 'Users'){\n\t\t\t\tthis.props.getUsers();\n\t\t\t};\n\t\t})\n\t};\n\n\thandleClose\t=\t()\t=> {\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t})\n\t};\n\n\tcomponentWillReceiveProps(props) {    \n        if(props.isUserUpdating && props.isUserUpdating !== this.props.isUserUpdating){\n         \tthis.handleShowUserModel('CLOSE');\n        };\n    };\n\n\trender() {\n\t\tconst { userType } = this.props;\t\t\n\t\tconst { type, showUserModel, userAction, initialUserData, initialUserErrorData } = this.state;\n\t\treturn (\n\t\t\t<main className=\"dash right_sec settingp\">\n\t\t\t \t<section className=\"con_top\">\n\t\t\t\t \t{\n\t\t\t\t \t\t(userType && userType === 'admin')?\n\t\t\t \t\t\t<ul className=\"settingtmenu\">\n\t\t\t\t\t\t\t<li className={(type === 'General') ? 'active' : ''} onClick={() => this.select('General')}><img src=\"/assets/general_ico.svg\" alt=\"Stores\" /> General</li>\n\t\t\t\t\t\t\t<li className={(type === 'Users') ? 'active' : ''} onClick={() => this.select('Users')}><img src=\"/assets/useres_ico.svg\" alt=\"Stores\" /> Users</li>\n\t\t\t\t\t\t\t<li className={(type === 'Stores') ? 'active' : ''} onClick={() => this.select('Stores')}><img src=\"/assets/stores_ico.svg\" alt=\"Stores\" /> Stores</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<ul className=\"settingtmenu\">\n\t\t\t\t\t\t\t<li className={(type === 'General') ? 'active' : ''} onClick={() => this.select('General')}><img src=\"/assets/general_ico.svg\" alt=\"Stores\" /> General</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t \t}\t\t\t\t\t\n\n\t\t\t\t\t{\n\t\t\t\t\t\t (this.state.type === 'Stores') ?\n\t\t\t\t\t\t<button onClick={this.handleShowLocation} type=\"button\" className=\"btn btn_blue userbtn\">Add Store <img src=\"/assets/plus.svg\" alt=\"\" /></button>\n\t\t\t\t\t\t: null \n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t(this.state.type === 'Users') ?\n\t\t\t\t\t\t<button onClick={()=>{ this.handleShowUserModel('ADD') }} type=\"button\" className=\"btn btn_blue userbtn\">Add User <img src=\"/assets/plus.svg\" alt=\"\" /></button>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\n\t\t\t\t\t<AddLocation\n\t\t\t\t\t\tshow\t\t\t=\t{this.state.show}\n\t\t\t\t\t\thandleClose\t\t=\t{this.handleClose}\n\t\t\t\t\t\tisProcessing\t=\t{this.props.isLocProcessing}\n\t\t\t\t\t\taddLocation\t\t=\t{this.props.addLocation}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<AddUserModal action={userAction} isUserUpdating={this.props.isUserUpdating} addUserData={this.props.addUser} updateUserData={this.props.editUser} show={showUserModel} handleShowUserModel={this.handleShowUserModel} initialData={initialUserData} initialUserErrorData={initialUserErrorData} />\n\t\t\t\t</section>\n\t\t\t\t<section className=\"setting_wrap\">\n\t\t\t\t\t{\n\t\t\t\t\t\t(this.state.type === 'General') ?\t\t\t\t\t\t\n\t\t\t\t\t\t<div className=\"general_pan\">\n\t\t\t\t\t\t\t<Profile\n\t\t\t\t\t\t\t\tprofileData\t\t\t=\t{this.props.profileData}\n\t\t\t\t\t\t\t\tisProcessing\t\t=\t{this.props.isProcessing}\n\t\t\t\t\t\t\t\tupdateProfile\t\t=\t{this.props.updateProfile}\n\t\t\t\t\t\t\t\tgetInfo\t\t\t\t=\t{this.props.getInfo}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ChangePassword\n\t\t\t\t\t\t\t\tisProcessing\t\t=\t{this.props.isPassProcessing}\n\t\t\t\t\t\t\t\tchangePassword\t\t=\t{this.props.changePassword}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t(this.state.type === 'Users') ?\n\t\t\t\t\t\t<Users action={userAction} isLoading={this.props.isUserLoading} usersList={this.props.usersList} handleShowUserModel={this.handleShowUserModel} />\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t(this.state.type === 'Stores') ?\n\t\t\t\t\t\t<Stores\n\t\t\t\t\t\t\tisLoading\t\t=\t{this.props.isStoreLoading}\n\t\t\t\t\t\t\tisProcessing\t=\t{this.props.isStoreProcessing}\n\t\t\t\t\t\t\tstoresList\t\t=\t{this.props.storesList}\n\t\t\t\t\t\t\tgetStores\t\t=\t{this.props.getStores}\n\t\t\t\t\t\t\teditStore\t\t=\t{this.props.editStore}\n\t\t\t\t\t\t\tdeleteStore\t\t=\t{this.props.deleteStore}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</section>\n\t\t\t</main>\n\t\t);\n\t};\n};\n\nexport default withRouter(SettingComponent);"]},"metadata":{},"sourceType":"module"}