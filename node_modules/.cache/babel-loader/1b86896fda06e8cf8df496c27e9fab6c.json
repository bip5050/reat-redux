{"ast":null,"code":"import _objectSpread from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/biplab/Desktop/foodjets/src/containers/Filter/storeFilter.js\";\nimport React, { Component } from 'react';\nimport { sortBy as _sortBy } from 'lodash';\n\nvar StoreFilter = /*#__PURE__*/function (_Component) {\n  _inherits(StoreFilter, _Component);\n\n  var _super = _createSuper(StoreFilter);\n\n  function StoreFilter(props) {\n    var _this;\n\n    _classCallCheck(this, StoreFilter);\n\n    _this = _super.call(this, props);\n\n    _this.handleStoreChange = function (e, store) {\n      _this.setState({\n        storeTxt: ''\n      }, function () {\n        _this.dropdownInput.current.focus();\n      });\n\n      _this.props.handleStoreChange(e, store);\n    };\n\n    _this.handleClick = function (e) {\n      e.stopPropagation();\n\n      if (_this.nodeStore.contains(e.target) || e.target.getAttribute('data') === 'ignore-outer-click') {\n        return;\n      }\n\n      if (!!_this.state.stOpen) {\n        _this.setState({\n          stOpen: false,\n          storeTxt: ''\n        });\n      }\n    };\n\n    _this.handleSelectbox = function () {\n      if (_this.props.area.length === 0) return;\n\n      _this.setState({\n        stOpen: !_this.state.stOpen\n      });\n\n      _this.onChangeHandle = _this.onChangeHandle.bind(_assertThisInitialized(_this));\n    };\n\n    _this.state = {\n      storeTxt: '',\n      stOpen: false\n    };\n    _this.dropdownInput = React.createRef();\n    return _this;\n  }\n\n  _createClass(StoreFilter, [{\n    key: \"onChangeHandle\",\n    value: function onChangeHandle(e) {\n      var _this$setState;\n\n      var name = e.target.name;\n      var value = e.target.value;\n      this.setState((_this$setState = {}, _defineProperty(_this$setState, name, value), _defineProperty(_this$setState, \"stOpen\", true), _this$setState));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('click', this.handleClick);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var storeFilter = this.props.store.map(function (store) {\n        return store.label;\n      });\n      var unsortedStore = this.props.stores || [];\n      var area = this.props.area || [];\n      var filteredArea = area.length > 0 ? area.map(function (item) {\n        return item.id.toString();\n      }) : []; //unsortedStore           =   unsortedStore.map((item) => filteredArea.includes(item.zoneid));\n\n      var stores = _sortBy(unsortedStore, 'label'); //console.log('Filtered Store : ', this.props.store);\n\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: function ref(nodeStore) {\n          return _this2.nodeStore = nodeStore;\n        },\n        className: \"select-box\".concat(this.state.stOpen ? \" sopen\" : \" \"),\n        onClick: this.handleSelectbox,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"s-result \".concat(this.props.area.length === 0 ? \"dis\" : \" \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        ref: this.dropdownInput,\n        autoComplete: \"off\",\n        disabled: this.props.area.length === 0 ? true : false,\n        placeholder: \"Store\",\n        name: \"storeTxt\",\n        value: this.state.storeTxt,\n        onChange: this.onChangeHandle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"ul\", {\n        className: storeFilter.length > 0 ? 'selected' : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }, stores.map(function (store, i) {\n        var exists = !!store.zone_id ? filteredArea.includes(store.zone_id.toString()) : '';\n        var index = storeFilter.indexOf(store.label); //console.log('Store : ', exists, store.zone_id);\n\n        return !!store.zone_id && !!exists && store.label.toLowerCase().includes(_this2.state.storeTxt.toLowerCase()) ? index > -1 ? /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          data: \"ignore-outer-click\",\n          onClick: function onClick(e) {\n            return _this2.props.handleRemoveFilter(e, 'Store', index);\n          },\n          className: \"selected\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 33\n          }\n        }, store.label) : /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          data: \"ignore-outer-click\",\n          onClick: function onClick(e) {\n            return _this2.handleStoreChange(e, _objectSpread({}, store));\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 41\n          }\n        }, store.label) : null;\n      })));\n    }\n  }]);\n\n  return StoreFilter;\n}(Component);\n\nexport { StoreFilter as default };","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/containers/Filter/storeFilter.js"],"names":["React","Component","sortBy","_sortBy","StoreFilter","props","handleStoreChange","e","store","setState","storeTxt","dropdownInput","current","focus","handleClick","stopPropagation","nodeStore","contains","target","getAttribute","state","stOpen","handleSelectbox","area","length","onChangeHandle","bind","createRef","name","value","document","addEventListener","removeEventListener","storeFilter","map","label","unsortedStore","stores","filteredArea","item","id","toString","i","exists","zone_id","includes","index","indexOf","toLowerCase","handleRemoveFilter"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {sortBy as _sortBy} from 'lodash';\nexport default class StoreFilter extends Component {\n    constructor(props) {\n        super(props);\n        this.state      =   {\n            storeTxt: '',\n            stOpen: false\n        }\n        this.dropdownInput = React.createRef();\n    }   \n\n    handleStoreChange = (e, store) => {\n        this.setState({\n            storeTxt    :   ''\n        }, () => {\n            this.dropdownInput.current.focus();\n        })\n        this.props.handleStoreChange(e, store);\n    }\n  \n    onChangeHandle(e) {\n       const name = e.target.name;\n       const value = e.target.value;\n       this.setState({\n           [name]   :   value,\n           stOpen   :   true\n        });\n    }\n\n    componentDidMount() {\n        document.addEventListener('click', this.handleClick);\n    };\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.handleClick);\n    };\n     \n    handleClick = (e) => {\n        e.stopPropagation();\n        if(this.nodeStore.contains(e.target)\n        || e.target.getAttribute('data') === 'ignore-outer-click'){ return; }\n\t\tif(!!this.state.stOpen) {\n            this.setState({\n                stOpen      :   false,\n                storeTxt    :   ''\n            });\n        }\n    }\n   \n    handleSelectbox = () => {   \n        if (this.props.area.length === 0)\n            return;\n        this.setState({\n            stOpen      :  !this.state.stOpen\n        })\n        this.onChangeHandle     =   this.onChangeHandle.bind(this);\n    }\n\n    render() {\n        let storeFilter = this.props.store.map(store => store.label);\n        let unsortedStore       =   this.props.stores || [];\n        let area                =   this.props.area || [];\n        let filteredArea        =   (area.length > 0) ? area.map((item) => item.id.toString()) : [];\n        //unsortedStore           =   unsortedStore.map((item) => filteredArea.includes(item.zoneid));\n        let stores              =   _sortBy(unsortedStore, 'label');\n        //console.log('Filtered Store : ', this.props.store);\n        return (\n            <div ref={nodeStore => this.nodeStore = nodeStore} className={`select-box${this.state.stOpen ? \" sopen\" : \" \"}`} onClick={this.handleSelectbox}>\n                <div className={`s-result ${(this.props.area.length === 0) ? \"dis\":\" \"}`}>\n                    <input type=\"text\" ref={this.dropdownInput} autoComplete=\"off\" disabled={(this.props.area.length === 0) ? true : false} placeholder=\"Store\" name=\"storeTxt\" value={this.state.storeTxt} onChange={this.onChangeHandle}/>\n                </div>\n                <ul className={(storeFilter.length > 0) ? 'selected' : ''}>\n                {/* {\n                    (this.props.store.length > 0) ?\n                    this.props.store.map((filter, index) => {\n                        return (\n                            <li key={index + 'filtered'} data='ignore-outer-click' onClick={(e) => this.props.handleRemoveFilter(e, 'Store', index)} className=\"selected\">{filter.label}</li>\n                        )\n                    }) : null\n                } */}\n                {\n                    stores.map((store, i) => {\n                        let exists  =    (!!store.zone_id) ? filteredArea.includes(store.zone_id.toString()) : '';\n                        let index   =   storeFilter.indexOf(store.label);\n                        //console.log('Store : ', exists, store.zone_id);\n                        return (\n                            (!!store.zone_id && !!exists && store.label.toLowerCase().includes(this.state.storeTxt.toLowerCase())) ?\n                                (index > -1) ?\n                                <li\n                                    key={i}\n                                    data='ignore-outer-click'\n                                    onClick={(e) => this.props.handleRemoveFilter(e, 'Store', index)}\n                                    className='selected'\n                                >\n                                    {store.label}\n                                </li> : <li\n                                    key={i}\n                                    data='ignore-outer-click'\n                                    onClick={(e) => this.handleStoreChange(e, {...store})}\n                                >\n                                    {store.label}\n                                </li>\n                            : null\n                        )\n                    })\n                }\n                </ul>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}