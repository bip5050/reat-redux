{"ast":null,"code":"import _classCallCheck from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/biplab/Desktop/foodjets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/biplab/Desktop/foodjets/src/containers/Feedbacks/list.js\";\nimport moment from 'moment-timezone';\nimport ReplyModal from './replyModal';\nimport React, { Component } from 'react';\nimport { ProgressBar } from 'react-bootstrap';\nimport Pagination from '../../Helper/pagination';\nimport TaskDetailsModal from './taskDetailsModal';\nimport { isEmpty, isEqual, map as _map } from 'lodash';\nimport { avgCustomerFeedback } from '../../Helper/common';\n\nvar List = /*#__PURE__*/function (_Component) {\n  _inherits(List, _Component);\n\n  var _super = _createSuper(List);\n\n  function List(props) {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      taskDetails: {},\n      repliedIds: [],\n      replyModalShow: false,\n      filteredFeedbackData: [],\n      orderDetailsModalShow: false\n    };\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"handleCloseModal\",\n    value: function handleCloseModal() {\n      this.setState({\n        replyModalShow: false,\n        orderDetailsModalShow: false\n      });\n    }\n  }, {\n    key: \"handleOpenModal\",\n    value: function handleOpenModal(e, type, ordObj) {\n      e.stopPropagation();\n\n      if (type === 'REPLY') {\n        this.setState({\n          replyModalShow: true,\n          taskDetails: ordObj\n        });\n      } else if (type === 'ORDERDETAILS') {\n        this.setState({\n          orderDetailsModalShow: true,\n          taskDetails: ordObj\n        });\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      if (props.replyResult && props.replyResult !== this.props.replyResult) {\n        var repliedIds = this.state.repliedIds || [];\n        repliedIds.push(props.replyResult.task_id);\n        this.setState({\n          replyModalShow: false,\n          orderDetailsModalShow: false,\n          repliedIds: repliedIds\n        });\n      }\n\n      this.setState({\n        filteredFeedbackData: props.filteredFeedbackData\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          replyModalShow = _this$state.replyModalShow,\n          orderDetailsModalShow = _this$state.orderDetailsModalShow,\n          taskDetails = _this$state.taskDetails,\n          repliedIds = _this$state.repliedIds,\n          filteredFeedbackData = _this$state.filteredFeedbackData;\n      var totalFeedBack = this.props.feedbackSummeryData && this.props.feedbackSummeryData.total_feedback ? this.props.feedbackSummeryData.total_feedback : 0;\n      var feedbackSummery = this.props.feedbackSummeryData && this.props.feedbackSummeryData.rows ? this.props.feedbackSummeryData.rows : []; //pagination start here\n\n      var itemsPerPage = 500;\n      var totalRecords = this.props.feedBackCount || 0;\n      var avgRating = 0;\n      var ratingPrcnt = 0;\n      var totalRatingPrcnt = 0;\n      feedbackSummery.map(function (el, index) {\n        totalRatingPrcnt += parseFloat(el.percentage);\n        ratingPrcnt += parseFloat(el.rating) * parseFloat(el.percentage);\n      });\n      avgRating = parseFloat(ratingPrcnt / totalRatingPrcnt);\n      var avgStarObj = [];\n      var avgStarObj1 = [];\n      var avgRatingObj = avgCustomerFeedback(avgRating);\n\n      for (var s = 1; s <= avgRatingObj.newwhole; s++) {\n        var key = \"star-\" + s;\n        avgStarObj.push( /*#__PURE__*/React.createElement(\"img\", {\n          key: key,\n          src: \"/assets/star.svg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 20\n          }\n        }));\n      }\n\n      ;\n\n      if (avgRatingObj.fraction == .5) {\n        avgStarObj.push( /*#__PURE__*/React.createElement(\"img\", {\n          key: \"star-h\",\n          src: \"/assets/star-h.svg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 20\n          }\n        }));\n      }\n\n      ;\n\n      for (var _s = 1; _s <= 5 - avgStarObj.length; _s++) {\n        var _key = \"star-g-\" + _s;\n\n        avgStarObj1.push( /*#__PURE__*/React.createElement(\"img\", {\n          key: _key,\n          src: \"/assets/star-g.svg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 21\n          }\n        }));\n      }\n\n      ; // console.log('!!!!repliedIds!!!!!', repliedIds);\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 4\n        }\n      }, !!!this.props.isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"section\", {\n        className: \"feedback_wrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"titelFb\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 8\n        }\n      }, \"Customer Feedback\"), feedbackSummery.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fbSecwrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bstarPan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bstar_up\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 12\n        }\n      }, avgRating > 0 ? avgRating.toFixed(2) : 0), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"big_star\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 12\n        }\n      }, avgStarObj, avgStarObj1)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bstar_down\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }\n      }, \"based on \", totalFeedBack, \" ratings\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"statsbarPan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 10\n        }\n      }, feedbackSummery.map(function (el, index) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: \"rate-\".concat(index),\n          className: \"gBar\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 14\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }\n        }, el.rating, \" Stars\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"bar\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(ProgressBar, {\n          now: el.percentage,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 36\n          }\n        })), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"totalP\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }\n        }, el.feedback_count, \" Total\"));\n      }))) : null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"filter_pan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"ftitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 9\n        }\n      }, \"Filter by:\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cbPan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.props.handleCheckboxFilter,\n        checked: this.props.allRatings,\n        type: \"checkbox\",\n        id: \"rating\",\n        name: \"rating\",\n        value: \"all\",\n        className: \"c_box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 10\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"fwb\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 167\n        }\n      }, \"All ratings\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cbPan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.props.handleCheckboxFilter,\n        checked: this.props.filterByStart.includes('5'),\n        type: \"checkbox\",\n        id: \"rating\",\n        name: \"rating\",\n        value: \"5\",\n        className: \"c_box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 10\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 184\n        }\n      }, \"5 Stars\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cbPan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.props.handleCheckboxFilter,\n        checked: this.props.filterByStart.includes('4'),\n        type: \"checkbox\",\n        id: \"rating\",\n        name: \"rating\",\n        value: \"4\",\n        className: \"c_box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 10\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 184\n        }\n      }, \"4 Stars\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cbPan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.props.handleCheckboxFilter,\n        checked: this.props.filterByStart.includes('3'),\n        type: \"checkbox\",\n        id: \"rating\",\n        name: \"rating\",\n        value: \"3\",\n        className: \"c_box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 10\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 184\n        }\n      }, \"3 Stars\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cbPan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.props.handleCheckboxFilter,\n        checked: this.props.filterByStart.includes('2'),\n        type: \"checkbox\",\n        id: \"rating\",\n        name: \"rating\",\n        value: \"2\",\n        className: \"c_box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 10\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 184\n        }\n      }, \"2 Stars\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cbPan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: this.props.handleCheckboxFilter,\n        checked: this.props.filterByStart.includes('1'),\n        type: \"checkbox\",\n        id: \"rating\",\n        name: \"rating\",\n        value: \"1\",\n        className: \"c_box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 10\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 184\n        }\n      }, \"1 Stars\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table_sec feed feedbackTable \".concat(this.props.isFiltering ? \"tableloder\" : \"\", \" \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 12\n        }\n      }, \"Order Number\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 12\n        }\n      }, \"Customer Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 12\n        }\n      }, \"Date \\xB7 Time\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 12\n        }\n      }, \"Rating\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 12\n        }\n      }, \"Comments\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 12\n        }\n      }, \"Follow Up\"))), !isEmpty(filteredFeedbackData) && filteredFeedbackData.length > 0 ? /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }\n      }, filteredFeedbackData.length > 0 && filteredFeedbackData.map(function (el, index) {\n        var starObj = [];\n        var rate = el.rating ? parseInt(el.rating) : 0;\n\n        for (var i = 0; i < rate; i++) {\n          starObj.push( /*#__PURE__*/React.createElement(\"img\", {\n            key: \"star-sm-\".concat(i),\n            src: \"/assets/star-sm.svg\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 28\n            }\n          }));\n        } // let date = moment(el.time_stamp).format(\"YYYY-MM-DD\");\n\n\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: \"feedback-list-\".concat(index),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 16\n          }\n        }, el.tp_order_number, \" \", /*#__PURE__*/React.createElement(\"span\", {\n          className: \"docmodbtn\",\n          onClick: function onClick(e) {\n            return _this2.handleOpenModal(e, 'ORDERDETAILS', el);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"/assets/doc.svg\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 131\n          }\n        }))), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 16\n          }\n        }, el.cust_first_name, \" \", el.cust_last_name), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 16\n          }\n        }, el.time_stamp), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 16\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"starRange\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 20\n          }\n        }, starObj)), /*#__PURE__*/React.createElement(\"td\", {\n          abbr: \"tr\",\n          className: \"acell\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 18\n          }\n        }, el.comment), el.comment ? /*#__PURE__*/React.createElement(\"span\", {\n          className: \"tTip\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 19\n          }\n        }, el.comment) : null), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 16\n          }\n        }, el.reply === \"true\" || repliedIds.indexOf(el.order_details.id) > -1 ? /*#__PURE__*/React.createElement(\"span\", {\n          className: \"fbReply\",\n          style: {\n            cursor: 'default'\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 18\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"/assets/checkmark-black.svg\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 72\n          }\n        })) : /*#__PURE__*/React.createElement(\"span\", {\n          className: \"fbReply\",\n          onClick: function onClick(e) {\n            return _this2.handleOpenModal(e, 'REPLY', el);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 18\n          }\n        }, \"Reply\")));\n      })) : /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        className: \"no-records\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: \"6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 46\n        }\n      }, \"No Records\"))))), !!replyModalShow ? /*#__PURE__*/React.createElement(ReplyModal, {\n        reply: this.props.reply,\n        isReplying: this.props.isReplying,\n        replyModalShow: replyModalShow,\n        handleCloseModal: this.handleCloseModal.bind(this),\n        taskDetails: taskDetails,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 9\n        }\n      }) : null, !!orderDetailsModalShow ? /*#__PURE__*/React.createElement(TaskDetailsModal, {\n        isReplying: this.props.isReplying,\n        orderDetailsModalShow: orderDetailsModalShow,\n        handleCloseModal: this.handleCloseModal.bind(this),\n        taskDetails: taskDetails,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 9\n        }\n      }) : null), totalRecords >= itemsPerPage ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pagination_Pan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(Pagination, {\n        totalRecords: totalRecords,\n        pageLimit: itemsPerPage,\n        pageNeighbours: 1,\n        onPageChanged: this.props.changePage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 40\n        }\n      })) : null) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }\n      }, \"Loading....\"));\n    }\n  }]);\n\n  return List;\n}(Component);\n\n;\nexport default List;","map":{"version":3,"sources":["/home/biplab/Desktop/foodjets/src/containers/Feedbacks/list.js"],"names":["moment","ReplyModal","React","Component","ProgressBar","Pagination","TaskDetailsModal","isEmpty","isEqual","map","_map","avgCustomerFeedback","List","props","state","taskDetails","repliedIds","replyModalShow","filteredFeedbackData","orderDetailsModalShow","setState","e","type","ordObj","stopPropagation","replyResult","push","task_id","totalFeedBack","feedbackSummeryData","total_feedback","feedbackSummery","rows","itemsPerPage","totalRecords","feedBackCount","avgRating","ratingPrcnt","totalRatingPrcnt","el","index","parseFloat","percentage","rating","avgStarObj","avgStarObj1","avgRatingObj","s","newwhole","key","fraction","length","isLoading","toFixed","feedback_count","handleCheckboxFilter","allRatings","filterByStart","includes","isFiltering","starObj","rate","parseInt","i","tp_order_number","handleOpenModal","cust_first_name","cust_last_name","time_stamp","comment","reply","indexOf","order_details","id","cursor","isReplying","handleCloseModal","bind","changePage"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,iBAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,GAAG,IAAIC,IAAlC,QAA8C,QAA9C;AACA,SAASC,mBAAT,QAAoC,qBAApC;;IAEMC,I;;;;;AACJ,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACb,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,WAAW,EAAC,EADA;AAEZC,MAAAA,UAAU,EAAE,EAFA;AAGlBC,MAAAA,cAAc,EAAE,KAHE;AAIZC,MAAAA,oBAAoB,EAAE,EAJV;AAKlBC,MAAAA,qBAAqB,EAAE;AALL,KAAb;AAFa;AAShB;;;;uCAEc;AACjB,WAAKC,QAAL,CAAc;AAAEH,QAAAA,cAAc,EAAE,KAAlB;AAAyBE,QAAAA,qBAAqB,EAAE;AAAhD,OAAd;AACA;;;oCAEeE,C,EAAGC,I,EAAMC,M,EAAO;AAC/BF,MAAAA,CAAC,CAACG,eAAF;;AAEA,UAAGF,IAAI,KAAK,OAAZ,EAAoB;AACnB,aAAKF,QAAL,CAAc;AAAEH,UAAAA,cAAc,EAAE,IAAlB;AAAwBF,UAAAA,WAAW,EAAEQ;AAArC,SAAd;AACA,OAFD,MAEO,IAAGD,IAAI,KAAK,cAAZ,EAA2B;AACjC,aAAKF,QAAL,CAAc;AAAED,UAAAA,qBAAqB,EAAE,IAAzB;AAA+BJ,UAAAA,WAAW,EAAEQ;AAA5C,SAAd;AACA;AACD;;;8CAEyBV,K,EAAO;AAChC,UAAGA,KAAK,CAACY,WAAN,IAAqBZ,KAAK,CAACY,WAAN,KAAsB,KAAKZ,KAAL,CAAWY,WAAzD,EAAqE;AACpE,YAAIT,UAAU,GAAG,KAAKF,KAAL,CAAWE,UAAX,IAAyB,EAA1C;AACSA,QAAAA,UAAU,CAACU,IAAX,CAAgBb,KAAK,CAACY,WAAN,CAAkBE,OAAlC;AAET,aAAKP,QAAL,CAAc;AAAEH,UAAAA,cAAc,EAAE,KAAlB;AAAyBE,UAAAA,qBAAqB,EAAE,KAAhD;AAAuDH,UAAAA,UAAU,EAAEA;AAAnE,SAAd;AACA;;AAED,WAAKI,QAAL,CAAc;AAAEF,QAAAA,oBAAoB,EAAEL,KAAK,CAACK;AAA9B,OAAd;AACG;;;6BAEK;AAAA;;AAAA,wBACyF,KAAKJ,KAD9F;AAAA,UACAG,cADA,eACAA,cADA;AAAA,UACgBE,qBADhB,eACgBA,qBADhB;AAAA,UACuCJ,WADvC,eACuCA,WADvC;AAAA,UACoDC,UADpD,eACoDA,UADpD;AAAA,UACgEE,oBADhE,eACgEA,oBADhE;AAER,UAAIU,aAAa,GAAI,KAAKf,KAAL,CAAWgB,mBAAX,IAAkC,KAAKhB,KAAL,CAAWgB,mBAAX,CAA+BC,cAAlE,GAAkF,KAAKjB,KAAL,CAAWgB,mBAAX,CAA+BC,cAAjH,GAAgI,CAApJ;AACA,UAAIC,eAAe,GAAI,KAAKlB,KAAL,CAAWgB,mBAAX,IAAkC,KAAKhB,KAAL,CAAWgB,mBAAX,CAA+BG,IAAlE,GAAwE,KAAKnB,KAAL,CAAWgB,mBAAX,CAA+BG,IAAvG,GAA4G,EAAlI,CAHQ,CAKR;;AACA,UAAIC,YAAY,GAAG,GAAnB;AACA,UAAIC,YAAY,GAAG,KAAKrB,KAAL,CAAWsB,aAAX,IAA4B,CAA/C;AAEA,UAAIC,SAAS,GAAG,CAAhB;AACA,UAAIC,WAAW,GAAG,CAAlB;AACA,UAAIC,gBAAgB,GAAG,CAAvB;AAEAP,MAAAA,eAAe,CAACtB,GAAhB,CAAoB,UAAC8B,EAAD,EAAKC,KAAL,EAAe;AAClCF,QAAAA,gBAAgB,IAAKG,UAAU,CAACF,EAAE,CAACG,UAAJ,CAA/B;AACAL,QAAAA,WAAW,IAAKI,UAAU,CAACF,EAAE,CAACI,MAAJ,CAAV,GAAwBF,UAAU,CAACF,EAAE,CAACG,UAAJ,CAAlD;AACA,OAHD;AAKAN,MAAAA,SAAS,GAAGK,UAAU,CAACJ,WAAW,GAAGC,gBAAf,CAAtB;AAEA,UAAIM,UAAU,GAAG,EAAjB;AACA,UAAIC,WAAW,GAAG,EAAlB;AACA,UAAIC,YAAY,GAAGnC,mBAAmB,CAACyB,SAAD,CAAtC;;AAEA,WAAI,IAAIW,CAAC,GAAC,CAAV,EAAaA,CAAC,IAAED,YAAY,CAACE,QAA7B,EAAuCD,CAAC,EAAxC,EAA2C;AAC1C,YAAIE,GAAG,GAAG,UAAQF,CAAlB;AACAH,QAAAA,UAAU,CAAClB,IAAX,eAAgB;AAAK,UAAA,GAAG,EAAEuB,GAAV;AAAe,UAAA,GAAG,EAAC,kBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAhB;AACA;;AAAA;;AAED,UAAGH,YAAY,CAACI,QAAb,IAAuB,EAA1B,EAA6B;AAC5BN,QAAAA,UAAU,CAAClB,IAAX,eAAgB;AAAK,UAAA,GAAG,EAAC,QAAT;AAAkB,UAAA,GAAG,EAAC,oBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAhB;AACA;;AAAA;;AAED,WAAI,IAAIqB,EAAC,GAAC,CAAV,EAAaA,EAAC,IAAK,IAAIH,UAAU,CAACO,MAAlC,EAA2CJ,EAAC,EAA5C,EAA+C;AAC9C,YAAIE,IAAG,GAAG,YAAUF,EAApB;;AACAF,QAAAA,WAAW,CAACnB,IAAZ,eAAiB;AAAK,UAAA,GAAG,EAAEuB,IAAV;AAAe,UAAA,GAAG,EAAC,oBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAjB;AACA;;AAAA,OApCO,CAsCR;;AAEA,0BACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEkB,CAAC,CAAC,CAAC,KAAKpC,KAAL,CAAWuC,SAAf,gBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACd;AAAS,QAAA,SAAS,EAAC,eAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAI,QAAA,SAAS,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADD,EAIGrB,eAAe,CAACoB,MAAhB,GAAyB,CAA1B,gBACA;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAMf,SAAS,GAAG,CAAb,GAAgBA,SAAS,CAACiB,OAAV,CAAkB,CAAlB,CAAhB,GAAqC,CAA1C,CADD,eAEC;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4BT,UAA5B,EAAwCC,WAAxC,CAFD,CADD,eAMC;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAsCjB,aAAtC,aAND,CADD,eAYC;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEEG,eAAe,CAACtB,GAAhB,CAAoB,UAAC8B,EAAD,EAAKC,KAAL,EAAe;AAClC,4BACC;AAAK,UAAA,GAAG,iBAAUA,KAAV,CAAR;AAA2B,UAAA,SAAS,EAAC,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAQD,EAAE,CAACI,MAAX,WADD,eAEC;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAqB,oBAAC,WAAD;AAAa,UAAA,GAAG,EAAEJ,EAAE,CAACG,UAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAArB,CAFD,eAGC;AAAM,UAAA,SAAS,EAAC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA0BH,EAAE,CAACe,cAA7B,WAHD,CADD;AAOA,OARD,CAFF,CAZD,CADA,GA0BO,IA9BT,eAiCC;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAM,QAAA,SAAS,EAAC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAO,QAAA,QAAQ,EAAE,KAAKzC,KAAL,CAAW0C,oBAA5B;AAAkD,QAAA,OAAO,EAAE,KAAK1C,KAAL,CAAW2C,UAAtE;AAAkF,QAAA,IAAI,EAAC,UAAvF;AAAkG,QAAA,EAAE,EAAC,QAArG;AAA8G,QAAA,IAAI,EAAC,QAAnH;AAA4H,QAAA,KAAK,EAAC,KAAlI;AAAwI,QAAA,SAAS,EAAC,OAAlJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,oBAC8J;AAAM,QAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAD9J,CAFD,eAMC;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAO,QAAA,QAAQ,EAAE,KAAK3C,KAAL,CAAW0C,oBAA5B;AAAkD,QAAA,OAAO,EAAG,KAAK1C,KAAL,CAAW4C,aAAX,CAAyBC,QAAzB,CAAkC,GAAlC,CAA5D;AAAqG,QAAA,IAAI,EAAC,UAA1G;AAAqH,QAAA,EAAE,EAAC,QAAxH;AAAiI,QAAA,IAAI,EAAC,QAAtI;AAA+I,QAAA,KAAK,EAAC,GAArJ;AAAyJ,QAAA,SAAS,EAAC,OAAnK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,oBAC+K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAD/K,CAND,eAUC;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAO,QAAA,QAAQ,EAAE,KAAK7C,KAAL,CAAW0C,oBAA5B;AAAkD,QAAA,OAAO,EAAG,KAAK1C,KAAL,CAAW4C,aAAX,CAAyBC,QAAzB,CAAkC,GAAlC,CAA5D;AAAqG,QAAA,IAAI,EAAC,UAA1G;AAAqH,QAAA,EAAE,EAAC,QAAxH;AAAiI,QAAA,IAAI,EAAC,QAAtI;AAA+I,QAAA,KAAK,EAAC,GAArJ;AAAyJ,QAAA,SAAS,EAAC,OAAnK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,oBAC+K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAD/K,CAVD,eAcC;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAO,QAAA,QAAQ,EAAE,KAAK7C,KAAL,CAAW0C,oBAA5B;AAAkD,QAAA,OAAO,EAAG,KAAK1C,KAAL,CAAW4C,aAAX,CAAyBC,QAAzB,CAAkC,GAAlC,CAA5D;AAAqG,QAAA,IAAI,EAAC,UAA1G;AAAqH,QAAA,EAAE,EAAC,QAAxH;AAAiI,QAAA,IAAI,EAAC,QAAtI;AAA+I,QAAA,KAAK,EAAC,GAArJ;AAAyJ,QAAA,SAAS,EAAC,OAAnK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,oBAC+K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAD/K,CAdD,eAkBC;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAO,QAAA,QAAQ,EAAE,KAAK7C,KAAL,CAAW0C,oBAA5B;AAAkD,QAAA,OAAO,EAAG,KAAK1C,KAAL,CAAW4C,aAAX,CAAyBC,QAAzB,CAAkC,GAAlC,CAA5D;AAAqG,QAAA,IAAI,EAAC,UAA1G;AAAqH,QAAA,EAAE,EAAC,QAAxH;AAAiI,QAAA,IAAI,EAAC,QAAtI;AAA+I,QAAA,KAAK,EAAC,GAArJ;AAAyJ,QAAA,SAAS,EAAC,OAAnK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,oBAC+K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAD/K,CAlBD,eAsBC;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAO,QAAA,QAAQ,EAAE,KAAK7C,KAAL,CAAW0C,oBAA5B;AAAkD,QAAA,OAAO,EAAG,KAAK1C,KAAL,CAAW4C,aAAX,CAAyBC,QAAzB,CAAkC,GAAlC,CAA5D;AAAqG,QAAA,IAAI,EAAC,UAA1G;AAAqH,QAAA,EAAE,EAAC,QAAxH;AAAiI,QAAA,IAAI,EAAC,QAAtI;AAA+I,QAAA,KAAK,EAAC,GAArJ;AAAyJ,QAAA,SAAS,EAAC,OAAnK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,oBAC+K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAD/K,CAtBD,CAjCD,eA4DC;AAAK,QAAA,SAAS,yCAAkC,KAAK7C,KAAL,CAAW8C,WAAX,GAAyB,YAAzB,GAAsC,EAAxE,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADD,eAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFD,eAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAHD,eAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJD,eAKC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALD,eAMC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAND,CADD,CADD,EAaI,CAACpD,OAAO,CAACW,oBAAD,CAAR,IAAkCA,oBAAoB,CAACiC,MAArB,GAA8B,CAAjE,gBACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEGjC,oBAAoB,CAACiC,MAArB,GAA8B,CAA/B,IAAqCjC,oBAAoB,CAACT,GAArB,CAAyB,UAAC8B,EAAD,EAAKC,KAAL,EAAe;AAC5E,YAAIoB,OAAO,GAAG,EAAd;AACA,YAAIC,IAAI,GAAItB,EAAE,CAACI,MAAJ,GAAYmB,QAAQ,CAACvB,EAAE,CAACI,MAAJ,CAApB,GAAgC,CAA3C;;AAEA,aAAK,IAAIoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAApB,EAA0BE,CAAC,EAA3B,EAA+B;AAC9BH,UAAAA,OAAO,CAAClC,IAAR,eAAa;AAAK,YAAA,GAAG,oBAAaqC,CAAb,CAAR;AAA0B,YAAA,GAAG,EAAC,qBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAb;AACA,SAN2E,CAQ5E;;;AACA,4BACC;AAAI,UAAA,GAAG,0BAAmBvB,KAAnB,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKD,EAAE,CAACyB,eAAR,oBAAyB;AAAM,UAAA,SAAS,EAAC,WAAhB;AAA4B,UAAA,OAAO,EAAE,iBAAC3C,CAAD;AAAA,mBAAQ,MAAI,CAAC4C,eAAL,CAAqB5C,CAArB,EAAwB,cAAxB,EAAwCkB,EAAxC,CAAR;AAAA,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA0F;AAAK,UAAA,GAAG,EAAC,iBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA1F,CAAzB,CADD,eAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKA,EAAE,CAAC2B,eAAR,OAA0B3B,EAAE,CAAC4B,cAA7B,CAFD,eAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAK5B,EAAE,CAAC6B,UAAR,CAHD,eAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAI;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA4BR,OAA5B,CAAJ,CAJD,eAKE;AAAI,UAAA,IAAI,EAAC,IAAT;AAAc,UAAA,SAAS,EAAC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAQrB,EAAE,CAAC8B,OAAX,CADD,EAGG9B,EAAE,CAAC8B,OAAJ,gBACA;AAAM,UAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAwB9B,EAAE,CAAC8B,OAA3B,CADA,GAC2C,IAJ7C,CALF,eAYC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEG9B,EAAE,CAAC+B,KAAH,KAAa,MAAb,IAAwBtD,UAAU,CAACuD,OAAX,CAAmBhC,EAAE,CAACiC,aAAH,CAAiBC,EAApC,IAA0C,CAAC,CAApE,gBACA;AAAM,UAAA,SAAS,EAAC,SAAhB;AAA0B,UAAA,KAAK,EAAE;AAACC,YAAAA,MAAM,EAAE;AAAT,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAsD;AAAK,UAAA,GAAG,EAAC,6BAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAtD,CADA,gBAGA;AAAM,UAAA,SAAS,EAAC,SAAhB;AAA0B,UAAA,OAAO,EAAE,iBAACrD,CAAD;AAAA,mBAAQ,MAAI,CAAC4C,eAAL,CAAqB5C,CAArB,EAAwB,OAAxB,EAAiCkB,EAAjC,CAAR;AAAA,WAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBALF,CAZD,CADD;AAuBA,OAhCoC,CAFvC,CADC,gBAsCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAO;AAAI,QAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA2B;AAAI,QAAA,OAAO,EAAC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA3B,CAAP,CAnDH,CADD,CA5DD,EAsHG,CAAC,CAACtB,cAAH,gBACA,oBAAC,UAAD;AAAY,QAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWyD,KAA9B;AAAqC,QAAA,UAAU,EAAE,KAAKzD,KAAL,CAAW8D,UAA5D;AAAwE,QAAA,cAAc,EAAE1D,cAAxF;AAAwG,QAAA,gBAAgB,EAAE,KAAK2D,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAA1H;AAA4J,QAAA,WAAW,EAAE9D,WAAzK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,GAC2L,IAvH7L,EA2HG,CAAC,CAACI,qBAAH,gBACA,oBAAC,gBAAD;AAAkB,QAAA,UAAU,EAAE,KAAKN,KAAL,CAAW8D,UAAzC;AAAqD,QAAA,qBAAqB,EAAExD,qBAA5E;AAAmG,QAAA,gBAAgB,EAAE,KAAKyD,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAArH;AAAuJ,QAAA,WAAW,EAAE9D,WAApK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,GACsL,IA5HxL,CADc,EAkIbmB,YAAY,IAAID,YAAhB,gBACA;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAgC,oBAAC,UAAD;AAAY,QAAA,YAAY,EAAEC,YAA1B;AAAwC,QAAA,SAAS,EAAED,YAAnD;AAAiE,QAAA,cAAc,EAAE,CAAjF;AAAoF,QAAA,aAAa,EAAE,KAAKpB,KAAL,CAAWiE,UAA9G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAhC,CADA,GACmK,IAnItJ,CADA,gBAsIA;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAxIjB,CADD;AA6IA;;;;EA1NiB3E,S;;AA2NlB;AAED,eAAeS,IAAf","sourcesContent":["import moment from 'moment-timezone';\nimport ReplyModal from './replyModal';\nimport React, { Component } from 'react';\nimport { ProgressBar } from 'react-bootstrap';\nimport Pagination from '../../Helper/pagination';\nimport TaskDetailsModal from './taskDetailsModal';\nimport { isEmpty, isEqual, map as _map } from 'lodash';\nimport { avgCustomerFeedback } from '../../Helper/common';\n\nclass List extends Component {\n \tconstructor(props) {\n        super(props);\n        this.state = {     \n        \ttaskDetails:{},\t   \n        \trepliedIds: [], \n\t\t\treplyModalShow: false,\n        \tfilteredFeedbackData: [],\t\n\t\t\torderDetailsModalShow: false\n        }\n    };\n\n\thandleCloseModal(){\n\t\tthis.setState({ replyModalShow: false, orderDetailsModalShow: false });\n\t};\n\n\thandleOpenModal(e, type, ordObj){\n\t\te.stopPropagation();\n\t\t\n\t\tif(type === 'REPLY'){\n\t\t\tthis.setState({ replyModalShow: true, taskDetails: ordObj });\n\t\t} else if(type === 'ORDERDETAILS'){\n\t\t\tthis.setState({ orderDetailsModalShow: true, taskDetails: ordObj });\n\t\t}\n\t};\n\n\tcomponentWillReceiveProps(props) {\n\t\tif(props.replyResult && props.replyResult !== this.props.replyResult){\n\t\t\tlet repliedIds = this.state.repliedIds || [];\n            repliedIds.push(props.replyResult.task_id);\n\n\t\t\tthis.setState({ replyModalShow: false, orderDetailsModalShow: false, repliedIds: repliedIds });\n\t\t}\n\n\t\tthis.setState({ filteredFeedbackData: props.filteredFeedbackData });\n    }; \t\n\n\trender() {\n\t\tconst { replyModalShow, orderDetailsModalShow, taskDetails, repliedIds, filteredFeedbackData } = this.state;\n\t\tlet totalFeedBack = (this.props.feedbackSummeryData && this.props.feedbackSummeryData.total_feedback)?this.props.feedbackSummeryData.total_feedback:0; \n\t\tlet feedbackSummery = (this.props.feedbackSummeryData && this.props.feedbackSummeryData.rows)?this.props.feedbackSummeryData.rows:[]; \n\n\t\t//pagination start here\n\t\tlet itemsPerPage = 500;\n\t\tlet totalRecords = this.props.feedBackCount || 0;\n\n\t\tlet avgRating = 0;\n\t\tlet ratingPrcnt = 0;\n\t\tlet totalRatingPrcnt = 0;\n\n\t\tfeedbackSummery.map((el, index) => {\n\t\t\ttotalRatingPrcnt += (parseFloat(el.percentage));\n\t\t\tratingPrcnt += (parseFloat(el.rating) * parseFloat(el.percentage));\n\t\t});\n\n\t\tavgRating = parseFloat(ratingPrcnt / totalRatingPrcnt);\n\n\t\tlet avgStarObj = [];\n\t\tlet avgStarObj1 = [];\n\t\tlet avgRatingObj = avgCustomerFeedback(avgRating);\n\n\t\tfor(let s=1; s<=avgRatingObj.newwhole; s++){\n\t\t\tlet key = \"star-\"+s;\n\t\t\tavgStarObj.push(<img key={key} src=\"/assets/star.svg\" />);\n\t\t};\n\n\t\tif(avgRatingObj.fraction==.5){\n\t\t\tavgStarObj.push(<img key=\"star-h\" src=\"/assets/star-h.svg\" />);\n\t\t};\n\n\t\tfor(let s=1; s <= (5 - avgStarObj.length); s++){\n\t\t\tlet key = \"star-g-\"+s;\n\t\t\tavgStarObj1.push(<img key={key} src=\"/assets/star-g.svg\" />);\n\t\t};\n\n\t\t// console.log('!!!!repliedIds!!!!!', repliedIds);\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{\n                    (!!!this.props.isLoading)?\n                    <div>                    \t              \t\t\t\n\t\t\t\t\t\t<section className=\"feedback_wrap\">\n\t\t\t\t\t\t\t<h4 className=\"titelFb\">Customer Feedback</h4>\n\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t(feedbackSummery.length > 0)?\n\t\t\t\t\t\t\t\t<div className=\"fbSecwrap\">\n\t\t\t\t\t\t\t\t\t<div className=\"bstarPan\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"bstar_up\">\n\t\t\t\t\t\t\t\t\t\t\t<h3>{(avgRating > 0)?avgRating.toFixed(2):0}</h3>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"big_star\">{avgStarObj}{avgStarObj1}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div className=\"bstar_down\">based on {totalFeedBack} ratings</div>\n\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"statsbarPan\">\n\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tfeedbackSummery.map((el, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={`rate-${index}`} className=\"gBar\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>{el.rating} Stars</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"bar\"><ProgressBar now={el.percentage} /></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"totalP\">{el.feedback_count} Total</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>:null\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<div className=\"filter_pan\">\n\t\t\t\t\t\t\t\t<span className=\"ftitle\">Filter by:</span>\n\t\t\t\t\t\t\t\t<div className=\"cbPan\">\n\t\t\t\t\t\t\t\t\t<input onChange={this.props.handleCheckboxFilter} checked={this.props.allRatings} type=\"checkbox\" id=\"rating\" name=\"rating\" value=\"all\" className=\"c_box\" /> <span className=\"fwb\">All ratings</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"cbPan\">\n\t\t\t\t\t\t\t\t\t<input onChange={this.props.handleCheckboxFilter} checked={(this.props.filterByStart.includes('5'))} type=\"checkbox\" id=\"rating\" name=\"rating\" value=\"5\" className=\"c_box\" /> <span>5 Stars</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"cbPan\">\n\t\t\t\t\t\t\t\t\t<input onChange={this.props.handleCheckboxFilter} checked={(this.props.filterByStart.includes('4'))} type=\"checkbox\" id=\"rating\" name=\"rating\" value=\"4\" className=\"c_box\" /> <span>4 Stars</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"cbPan\">\n\t\t\t\t\t\t\t\t\t<input onChange={this.props.handleCheckboxFilter} checked={(this.props.filterByStart.includes('3'))} type=\"checkbox\" id=\"rating\" name=\"rating\" value=\"3\" className=\"c_box\" /> <span>3 Stars</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"cbPan\">\n\t\t\t\t\t\t\t\t\t<input onChange={this.props.handleCheckboxFilter} checked={(this.props.filterByStart.includes('2'))} type=\"checkbox\" id=\"rating\" name=\"rating\" value=\"2\" className=\"c_box\" /> <span>2 Stars</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"cbPan\">\n\t\t\t\t\t\t\t\t\t<input onChange={this.props.handleCheckboxFilter} checked={(this.props.filterByStart.includes('1'))} type=\"checkbox\" id=\"rating\" name=\"rating\" value=\"1\" className=\"c_box\" /> <span>1 Stars</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className={`table_sec feed feedbackTable ${this.props.isFiltering ? \"tableloder\":\"\"} `}>\n\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>Order Number</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>Customer Name</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>Date Â· Time</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>Rating</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>Comments</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>Follow Up</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t \t(!isEmpty(filteredFeedbackData) && filteredFeedbackData.length > 0) ? \n\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t(filteredFeedbackData.length > 0) && filteredFeedbackData.map((el, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet starObj = [];\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet rate = (el.rating)?parseInt(el.rating):0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < rate; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstarObj.push(<img key={`star-sm-${i}`} src=\"/assets/star-sm.svg\" />);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t// let date = moment(el.time_stamp).format(\"YYYY-MM-DD\");\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr key={`feedback-list-${index}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{el.tp_order_number} <span className=\"docmodbtn\" onClick={(e)  => this.handleOpenModal(e, 'ORDERDETAILS', el)}><img src=\"/assets/doc.svg\" /></span></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{el.cust_first_name} {el.cust_last_name}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{el.time_stamp}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><div className=\"starRange\">{starObj}</div></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t<td abbr=\"tr\" className=\"acell\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t<label>{el.comment}</label> \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t\t(el.comment)?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t<span className=\"tTip\">{el.comment}</span>:null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(el.reply === \"true\" || (repliedIds.indexOf(el.order_details.id) > -1) )?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"fbReply\" style={{cursor: 'default'}}><img src=\"/assets/checkmark-black.svg\" /></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"fbReply\" onClick={(e)  => this.handleOpenModal(e, 'REPLY', el)}>Reply</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t:<tbody><tr className=\"no-records\"><td colSpan=\"6\">No Records</td></tr></tbody> \n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t(!!replyModalShow) ?\n\t\t\t\t\t\t\t\t<ReplyModal reply={this.props.reply} isReplying={this.props.isReplying} replyModalShow={replyModalShow} handleCloseModal={this.handleCloseModal.bind(this)} taskDetails={taskDetails} /> : null\n\t\t\t\t\t\t\t} \n\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t(!!orderDetailsModalShow) ?\n\t\t\t\t\t\t\t\t<TaskDetailsModal isReplying={this.props.isReplying} orderDetailsModalShow={orderDetailsModalShow} handleCloseModal={this.handleCloseModal.bind(this)} taskDetails={taskDetails} /> : null\n\t\t\t\t\t\t\t} \n\t\t\t        \t</section>\t\n\t\t\t        \t\n\t\t\t        \t{\n\t\t\t\t\t\t\ttotalRecords >= itemsPerPage ?\n\t\t\t\t\t\t\t<div className=\"pagination_Pan\"><Pagination totalRecords={totalRecords} pageLimit={itemsPerPage} pageNeighbours={1} onPageChanged={this.props.changePage} /></div>:null\n\t                  \t}\t\t\t        \t\n\t\t        \t</div> : <div className=\"loader\">Loading....</div>\n\t\t        }\n        \t</div>       \t\n\t\t)\n\t};\n};\n\nexport default List;"]},"metadata":{},"sourceType":"module"}