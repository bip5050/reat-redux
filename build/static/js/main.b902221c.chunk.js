(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1002:function(e,t,a){"use strict";a.r(t);a(445),a(460);var r=a(0),s=a.n(r),n=a(70),o=a.n(n),l=(a(669),a(8)),i=a(9),c=a(12),d=a(10),u=a(11),m=(a(671),a(354),a(676),a(679),a(1)),p=a(443),h=a(206),f=a(3),_=a.n(f),b=a(39),g="GET_LOCATIONS",E="CREATE_TASK",v="EDIT_TASK",y="GET_TASK_DETAILS",k="GET_TRACK_DETAILS",S="DELETE_TASK",O="UPDATE_TASK_STATUS",D="TASK_SEARCH",j="GET_SHOPPEDLATE",C="UPDATE_FILTER",w=function(e){return{type:g,data:e}},T=function(e){return{type:"GET_LOCATIONS_SUCCESS",data:e}},x=function(e){return{type:"GET_LOCATIONS_ERROR",data:e}},N=function(e){return{type:"CREATE_TASK_SUCCESS",data:e}},R=function(e){return{type:"CREATE_TASK_ERROR",data:e}},P=function(e){return{type:v,data:e}},L=function(e){return{type:"EDIT_TASK_SUCCESS",data:e}},A=function(e){return{type:"EDIT_TASK_ERROR",data:e}},M=function(e){return{type:k,data:e}},F=function(e){return{type:y,data:e}},U=function(e){return{type:"GET_TASK_DETAILS_SUCCESS",data:e}},Y=function(e){return{type:"GET_TASK_DETAILS_ERROR",data:e}},z=function(e){return{type:S,data:e}},I=function(e){return{type:"DELETE_TASK_SUCCESS",data:e}},W=function(e){return{type:"DELETE_TASK_ERROR",data:e}},B=function(e){return{type:O,data:e}},H=function(e){return{type:"UPDATE_TASK_STATUS_SUCCESS",data:e}},K=function(e){return{type:"UPDATE_TASK_STATUS_ERROR",data:e}},G=function(e){return{type:"RESET_TASK_SEARCH",data:e}},V=function(e){return{type:D,data:e}},X=function(e){return{type:"TASK_SEARCH_SUCCESS",data:e}},J=function(e){return{type:"TASK_SEARCH_ERROR",data:e}},q=function(e){return{type:j,data:e}},Z=function(e){return{type:"GET_SHOPPEDLATE_SUCCESS",data:e}},$=function(e){return{type:"GET_SHOPPEDLATE_ERROR",data:e}},Q=a(2),ee=(a(153),a(65)),te=a(165),ae=a.n(te),re=(a(686),a(688),"/api/"),se="/api2/";var ne={},oe={},le=[];ne={apiKey:"AIzaSyBo2UVHKB2honDutQGN_tyYSsG4lZ5BMi4",authDomain:"foodjets-dev.firebaseapp.com",databaseURL:"https://foodjets-dev.firebaseio.com",storageBucket:"foodjets-dev.appspot.com",messagingSenderId:"687940236129",projectId:"foodjets-dev"},oe={domain:".dev.foodjets.com",hostname:"http://console.dev.foodjets.com"},le=[{id:"CA",value:"California"},{id:"NV",value:"Nevada"}];var ie={Title:"Foodjets",Pagination:{itemsPerPage:100},ApiUrl:re,ApiUrl2:se,firebase:Object(m.a)({},ne),cookie:Object(m.a)({},oe),states:le},ce=!1;ae.a.initializeApp(ie.firebase),!1===ce&&(ae.a.auth().signInAnonymously(),ce=!0);var de=ae.a.firestore(),ue=(ae.a.firestore,a(13)),me=a.n(ue);function pe(e){return me()(e).format("MM/DD/YYYY hh:mm:ss")}function he(e,t,a){return me.a.tz(e,t).format(a)}function fe(e,t){return me()(e).format(t)}var _e=function(e){return+(Math.round(e+"e+2")+"e-2")};var be=function(e){try{var t=/(\d+) (.+?), (.+?), (.+?) ([0-9]{5})/,a=e.match(t);if(a[4].indexOf(",")>-1&&a[3].indexOf(" ")>-1){var r=a[3]+", "+a[4]+" "+a[a.length-1],s=r+", USA";if(/(\d+) (.+?), (.+?), (.+?) ([0-9]{5})/g.test(s)){var n=s.match(t);return{validAdrs:!0,formattedAddress:r,address:s,number:n[0],street:n[1],city:n[2],country:"United States",state_code:n[4],zipcode:n[n.length-1]}}return{validAdrs:!1}}return{validAdrs:!0,formattedAddress:a[1]+" "+a[2]+", "+a[3]+", "+a[4]+" "+a[a.length-1],address:e,number:a[1],street:a[2],city:a[3],country:"United States",state_code:a[4],zipcode:a[a.length-1]}}catch(o){return console.log(o),{validAdrs:!1}}};function ge(e){var t="";switch(e){case"Processing":t="btn_Processing";break;case"Picked Up":t="btn_Pickedup";break;case"Scheduled":t="btn_Scheduled";break;case"Completed":t="btn_Completed";break;case"Deleted":t="btn_Deleted";break;default:t="btn_Processing"}return t}function Ee(e){return"tsk_proc_hld"===e?"Scheduled":"tsk_proc_mrchnt"===e?"Scheduled":"tsk_proc_drv"===e&&"drv_strt_recpnt_tsk"===e?"Picked Up":"tsk_proc_drv"===e?"Processing":"tsk_cmp"===e?"Completed":"tsk_cncling"===e?"Deleted":"tsk_cncled"===e?"Deleted":"Scheduled"}function ve(e,t,a){var r=he(1e3*parseInt(e),a,"MM/DD \xb7 hh:mma"),s=he(1e3*parseInt(t),a,"hh:mma");return"".concat(r," - ").concat(s)}var ye=a(52),ke=a.n(ye),Se=(a(693),function(e){ke()("#notify").fadeIn("slow"),ke()("#notify").removeClass("inform").removeClass("error").removeClass("warning").addClass("success"),ke()("#notify").html(e.message),setTimeout(function(){ke()("#notify").fadeOut("slow")},5e3)}),Oe=function(e){ke()("#notify").fadeIn("slow"),ke()("#notify").removeClass("inform").removeClass("success").removeClass("warning").addClass("error"),ke()("#notify").html(e.message),setTimeout(function(){ke()("#notify").fadeOut("slow")},5e3)},De=function(e){ke()("#notify").fadeIn("slow"),ke()("#notify").removeClass("error").removeClass("warning").removeClass("success").addClass("inform"),ke()("#notify").html(e.message),setTimeout(function(){ke()("#notify").fadeOut("slow")},5e3)},je=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1,x:0,y:0},a.contextDiv=s.a.createRef(),a.openEditWindow=a.openEditWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.updateTask=a.updateTask.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"openEditWindow",value:function(e,t,a,r){this.props.openEditWindow(e,t,a)}},{key:"updateTask",value:function(e,t,a){console.log("Task Status : ",a),"Scheduled"===a?this.props.updateTask(e,t):Se({message:"Task is already in ".concat(a," mode.")})}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",function(t){t.stopPropagation(),e.props.hideContextMenu()})}},{key:"componentWillReceiveProps",value:function(e){this.setState({visible:e.visible,x:e.x,y:e.y,selOrder:e.selOrder})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",function(){})}},{key:"render",value:function(){var e=this,t={position:"absolute",top:"".concat(this.state.y,"px"),left:"".concat(this.state.x+5,"px")},a=this.props.selOrder||{};a.order_number;return Object(f.isEmpty)(this.props.selOrder)?null:s.a.createElement("div",{id:"cmenu",ref:this.contextDiv},this.state.visible?s.a.createElement("div",{className:"custom-context",id:"text",style:t},s.a.createElement("div",{className:"custom-context-item"},"Order #".concat(a.order_number)),s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",onClick:function(){return e.props.openDetailsWindow(a.order_uuid)}},"View Task"),s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",onClick:function(){return e.props.openMapWindow(a.order_uuid)}},"View Map"),s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",onClick:function(){return e.openEditWindow(a.order_uuid,a.mrchnt_address,a.recpnt_address,a.tsk_status)}},"Edit Task"),s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",onClick:function(){return e.props.deleteTask(a.order_uuid)}},"Delete Task"),s.a.createElement("div",{className:"custom-context-item"},"Change Status",s.a.createElement("ul",null,s.a.createElement("li",{data:"ignore-outer-click",onClick:function(){return e.updateTask(a.order_uuid,"R",a.tsk_status)}},"Ready"),s.a.createElement("li",{data:"ignore-outer-click",onClick:function(){return e.updateTask(a.order_uuid,"W",a.tsk_status)}},"Work In Progress")))):null)}}]),t}(r.Component),Ce=a(19),we=a(1008),Te=a(1009),xe=a(1010),Ne=a(1016),Re=a(209),Pe=a.n(Re),Le=(a(154),a(35)),Ae=a.n(Le),Me=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onSelectDate=function(e){a.setState({formData:Object(m.a)({},a.state.formData,{delivery_date:e})})},a.handleMerchantChange=function(e){a.setState({errors:Object(m.a)({},a.state.errors,{merchant_address:e?"":"Please enter merchant address"}),merchant_address:e})},a.handleChange=function(e){a.setState({errors:Object(m.a)({},a.state.errors,{recipient_address:e?"":"Please enter recipient address"}),recipient_address:e})},a.handleSelect=function(e){var t=Object(Q.a)(Object(Q.a)(a)),r={zipcode:"",state_code:"",latitude:"",longitude:"",address:""};Object(Le.geocodeByAddress)(e).then(function(e){return r.address=e[0].formatted_address||"",Object(Le.getLatLng)(e[0])}).then(function(e){var s=e.lat,n=e.lng;if(/(\d+) (.+?), (.+?), (.+?) ([0-9]{5})/g.test(r.address)){a.props.deliveryAddress;var o=be(r.address);console.log("Address : ",r.address,o),!Object(f.isEmpty)(o)&&o.validAdrs?(r.latitude=s,r.longitude=n,r.address=o.address,r.zipcode=o.zipcode,r.state_code=o.state_code,r.city=o.city,r.country=o.country,r.number=o.number,r.street=o.street,t.setState({errors:Object(m.a)({},t.state.error,{recipient_address:""}),recipient_location:r,recipient_address:r.address})):(Oe("Oops, that does not seem like a valid address. Please try again."),t.setState({errors:Object(m.a)({},t.state.error,{recipient_address:"Invalid Address"}),recipient_location:{}}))}else Oe("Oops, that does not seem like a valid address. Please try again."),t.setState({errors:Object(m.a)({},t.state.error,{recipient_address:"Invalid Address"}),recipient_location:{}})}).catch(function(e){t.setState({errors:Object(m.a)({},t.state.error,{recipient_address:"Invalid Address"}),recipient_location:{}}),console.log("Error",e)})},a.handleMerchantSelect=function(e){var t=Object(Q.a)(Object(Q.a)(a)),r={zipcode:"",state_code:"",latitude:"",longitude:"",address:""};Object(Le.geocodeByAddress)(e).then(function(e){return r.address=e[0].formatted_address||"",Object(Le.getLatLng)(e[0])}).then(function(e){var s=e.lat,n=e.lng;if(/(\d+) (.+?), (.+?), (.+?) ([0-9]{5})/g.test(r.address)){a.props.deliveryAddress;var o=be(r.address);!Object(f.isEmpty)(o)&&o.validAdrs?(r.latitude=s,r.longitude=n,r.address=o.address,r.zipcode=o.zipcode,r.state_code=o.state_code,r.city=o.city,r.country=o.country,r.number=o.number,r.street=o.street,t.setState({errors:Object(m.a)({},t.state.error,{merchant_address:""}),merchant_location:r,merchant_address:r.address})):t.setState({errors:Object(m.a)({},t.state.error,{merchant_address:"Invalid Address"}),merchant_location:{}})}else t.setState({errors:Object(m.a)({},t.state.error,{merchant_address:"Invalid Address"}),merchant_location:{}})}).catch(function(e){t.setState({errors:Object(m.a)({},t.state.error,{merchant_address:"Invalid Address"}),merchant_location:{}}),console.log("Error",e)})},a.onDateSelect=function(e){a.setState({formData:Object(m.a)({},a.state.formData,{delivery_date:e})})},a.handleEditClick=function(e){e.stopImmediatePropagation(),console.log("Handle Edit Click")},a.state={show:!1,alcohol:!1,signature:!0,locations:[],formData:{},startDate:new Date,settingsData:{},recipient_location:{},merchant_location:{},isProcessing:!1,errors:{merchant_address:"",recipient_address:"",delivery_date:"",delivery_time:"",tip:""}},a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a.handleEditTask=a.handleEditTask.bind(Object(Q.a)(Object(Q.a)(a))),a.validateForm=a.validateForm.bind(Object(Q.a)(Object(Q.a)(a))),a.onChangeHandle=a.onChangeHandle.bind(Object(Q.a)(Object(Q.a)(a))),a.handleChange=a.handleChange.bind(Object(Q.a)(Object(Q.a)(a))),a.handleMerchantChange=a.handleMerchantChange.bind(Object(Q.a)(Object(Q.a)(a))),a.onDateSelect=a.onDateSelect.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleEditClick)}},{key:"componentWillReceiveProps",value:function(e){if(e.isProcessing!==this.props.isProcessing&&this.setState({isProcessing:!1}),!Object(f.isEmpty)(e.settingsData)&&!Object(f.isEqual)(this.state.settingsData,e.settingsData)){this.timings=this.timing(e.settingsData.start_time,e.settingsData.end_time);var t=this.timings.key&&!this.state.formData.delivery_time?this.timings.key:"";this.setState({settingsData:e.settingsData,formData:Object(m.a)({},this.state.formData,{delivery_time:t})})}if(!Object(f.isEqual)(e.taskDetails,this.props.taskDetails)&&!Object(f.isEmpty)(e.taskDetails)){var a=e.taskDetails||{},r="Scheduled";"tsk_proc_hld"===a.tskStatus?r="Scheduled":"tsk_proc_mrchnt"===a.tskStatus?r="Scheduled":"tsk_proc_drv"===a.tskStatus&&"drv_strt_recpnt_tsk"===a.driverStatus?r="Picked Up":"tsk_proc_drv"===a.tskStatus?r="Processing":"tsk_cmp"===a.tskStatus?r="Completed":"tsk_cncling"===a.tskStatus?r="Deleted":"tsk_cncled"===a.tskStatus&&(r="Deleted"),"Scheduled"!==r&&(Se({message:"Task is already in ".concat(r," mode.")}),this.handleClose());var s=he(1e3*parseInt(e.taskDetails.completeBefore),e.taskDetails.time_zone,"hh:mm A"),n=he(1e3*parseInt(e.taskDetails.completeAfter),e.taskDetails.time_zone,"hh:mm A"),o=me.a.tz(1e3*parseInt(e.taskDetails.completeAfter),e.taskDetails.time_zone),l=o.format("YYYY"),i=o.format("MM");i-=1;var c=o.format("DD"),d=new Date(l,i,c);this.setState({merchant:e.taskDetails.merchant,recipients:e.taskDetails.recipients,recipient_address:e.recpnt_address?e.recpnt_address:"",merchant_address:e.mrchnt_address?e.mrchnt_address:"",time_zone:e.taskDetails.time_zone,formData:{merchant_notes:e.taskDetails.merchant&&e.taskDetails.merchant.notes?e.taskDetails.merchant.notes:"",recipient_notes:e.taskDetails.recipients&&e.taskDetails.recipients.notes?e.taskDetails.recipients.notes:"",tip:e.taskDetails.tip,delivery_date:d,delivery_time:n+"-"+s}})}}},{key:"handleClose",value:function(){this.setState({show:!1}),this.props.handleClose()}},{key:"timing",value:function(e,t){for(var a=me()().format("MM/DD/YYYY"),r=me()().unix(),s="",n=me()(a+" "+e,"MM/DD/YYYY H:mm").unix(),o=me()(a+" "+t,"MM/DD/YYYY H:mm").unix(),l=[],i=n;i<o;i+=1800)l.push({t:me()(1e3*i).format("hh:mm A")+"-"+me()(1e3*(i+1800)).format("hh:mm A")}),r>=i&&r<=i+1800&&(s=me()(1e3*i).format("hh:mm A")+"-"+me()(1e3*(i+1800)).format("hh:mm A"));return{data:l,key:s}}},{key:"utc",value:function(e,t,a){var r=me()(e).format("MM/DD/YYYY")+" "+t;return me.a.tz(r,"MM/DD/YYYY hh:mm A",a).utc().unix()}},{key:"handleEditTask",value:function(e){var t=this;if(e.preventDefault(),!this.validateForm()){var a=Object(m.a)({},this.state.formData),r=this.state.time_zone,s=a.delivery_time.split("-"),n=s[0],o=s[1],l=this.utc(a.delivery_date,n,r),i=this.utc(a.delivery_date,o,r),c=this.state.recipient_location||{},d=this.state.merchant_location||{},u={};u.merchant_notes=a.merchant_notes||"",u.recipient_notes=a.recipient_notes||"",u.complete_after=l||"",u.complete_before=i||"",u.tip=a.tip||0,Object(f.isEmpty)(c)||(u.recipient={location:[c.longitude,c.latitude],address:{state:c.state_code,postalCode:c.zipcode,country:c.country,city:c.city,street:c.street,number:c.number}}),Object(f.isEmpty)(d)||(u.merchant={location:[d.longitude,d.latitude],address:{state:d.state_code,postalCode:d.zipcode,country:d.country,city:d.city,street:d.street,number:d.number},store_id:this.props.taskDetails.store_id}),this.setState({isProcessing:!0}),this.props.editTask({uuid:this.props.taskDetails.uuid,params:u}),setTimeout(function(){t.handleClose()},1e3)}}},{key:"validateForm",value:function(){var e=this.state.formData||{},t=this.state.errors||{},a=!1;return(t.merchant_address||t.recipient_address)&&(a=!0),e.delivery_date||(t.delivery_date="Please enter the delivery date",a=!0),e.delivery_time||(t.delivery_time="Please enter the delivery time",a=!0),this.state.merchant_address&&!t.merchant_address||(t.merchant_address="Please enter merchant address",a=!0),this.state.recipient_address&&!t.recipient_address||(t.recipient_address="Please enter recipient address",a=!0),e.tip&&isNaN(e.tip)&&(t.tip="Tip amount should be number",a=!0),this.setState({errors:t,isError:a}),a}},{key:"onChangeHandle",value:function(e){var t=Object(m.a)({},this.state.formData),a=e.target.name,r=e.target.value;t[a]=r;var s=Object(m.a)({},this.state.errors);s[a]="",this.setState({formData:t,errors:s})}},{key:"render",value:function(){var e=this.props.taskDetails||{},t=this.props.show||!1,a=this.state.errors||{},r=""===a.merchant_address?null:a.merchant_address,n=""===a.recipient_address?null:a.recipient_address,o=""===a.delivery_date?null:a.delivery_date,l=""===a.delivery_time?null:a.delivery_time,i=""===a.tip?null:a.tip,c=this.state.formData||{},d=this.timings&&this.timings.data?this.timings.data:[],u=!1;(r||n||o||l||i)&&(u=!0);var m={input:{width:"260px",padding:"0px 15px 0px 35px",color:"#333",margin:"0"},autocompleteContainer:{borderRadius:"0 0 3px 3px",zIndex:"999",background:"url(/static/images/pow_google.jpg) no-repeat right bottom #fff",position:"relative",border:"1px solid #e8e8e8",boxShadow:"1px 5px 10px rgba(68,68,68,0.2)"},autocompleteItem:Object(Ce.a)({textAlign:"left",fontSize:"12px",padding:"5px 8px 5px 30px",lineHeight:"20px",color:"#999",background:"10px 8px #fff",margin:"0",borderTop:"none",borderBottom:"1px solid #ccc"},"background","url(/static/images/location_google.png) no-repeat 10px 8px #fff"),autocompleteItemActive:{color:"#E44500"}};return Object(f.isEmpty)(this.props.taskDetails)?null:s.a.createElement(Ne.a,{size:"md",className:"c-modal",data:"ignore-outer-click",show:t,onHide:this.props.handleClose},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Edit Task")),s.a.createElement("form",{onSubmit:this.handleEditTask},s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"delivery"},"Delivery Date"),s.a.createElement(Pe.a,{className:"t_box".concat(o?" error":""),selected:c.delivery_date,onChange:this.onDateSelect,minDate:new Date,placeholderText:"Today"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"time"},"Time"),s.a.createElement("select",{className:"s_box".concat(l?" error":""),name:"delivery_time",onChange:this.onChangeHandle,value:c.delivery_time},s.a.createElement("option",null,"-- Select --"),(d||[]).map(function(e,t){return s.a.createElement("option",{key:t,value:e.t},e.t)})),l&&s.a.createElement("small",{className:"text-danger"},l)),e.driver_id?null:s.a.createElement("div",{className:"form-group pr"},s.a.createElement("label",{htmlFor:"address"},"Merchant Address"),s.a.createElement(Ae.a,{value:this.state.merchant_address.toString(),onChange:this.handleMerchantChange,onSelect:this.handleMerchantSelect,styles:m},function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,o=e.loading;return s.a.createElement("div",null,s.a.createElement("input",t({placeholder:"Enter Address",className:r?"t_box error":"t_box"})),s.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&s.a.createElement("div",null,"Loading..."),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return s.a.createElement("div",n(e,{className:t,style:a}),s.a.createElement("span",null,e.description))})))})),e.driver_id?null:s.a.createElement("div",{className:"form-group pr"},s.a.createElement("label",{htmlFor:"raddress"},"Recipient Address"),s.a.createElement(Ae.a,{value:this.state.recipient_address.toString(),onChange:this.handleChange,onSelect:this.handleSelect,styles:m},function(e){var t=e.getInputProps,a=e.suggestions,r=e.getSuggestionItemProps,o=e.loading;return s.a.createElement("div",null,s.a.createElement("input",t({placeholder:"Enter Address",className:n?"t_box error":"t_box"})),s.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&s.a.createElement("div",null,"Loading..."),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return s.a.createElement("div",r(e,{className:t,style:a}),s.a.createElement("span",null,e.description))})))})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"tip"},"Tip"),s.a.createElement("input",{type:"text",placeholder:"0.00",className:"t_box".concat(i?" error":""),name:"tip",onChange:this.onChangeHandle,value:c.tip}),i&&s.a.createElement("small",{className:"text-danger"},i)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"d-notes"},"Merchant Notes"),s.a.createElement("input",{type:"text",className:"t_box",name:"merchant_notes",onChange:this.onChangeHandle,value:c.merchant_notes})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"notes"},"Recipient Notes"),s.a.createElement("input",{type:"text",className:"t_box",name:"recipient_notes",onChange:this.onChangeHandle,value:c.recipient_notes}))))),s.a.createElement(Ne.a.Footer,null,s.a.createElement(xe.a,{type:"submit",disabled:u||!!this.state.isProcessing,className:this.state.isProcessing||u?"":"active",variant:"primary"},this.state.isProcessing?"Processing..":"Submit"))))}}]),t}(r.Component),Fe=a(215),Ue=a.n(Fe),Ye=(a(367),{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:2},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}});function ze(e){var t=(e.completionDetails||{}).events||{},a=t.onflt_mrchnt_pics||"";a=a?a.split(","):[];var r=t.onflt_recpnt_pics||"";r=r?r.split(","):[];var n=t.onflt_recpnt_sig||"",o=t.onflt_mrchnt_sig||"",l="https://d15p8tr8p0vffz.cloudfront.net/";return Object(f.isEmpty)(e)?s.a.createElement("div",{className:"loader"},"Loading..."):s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12",className:"l_col"},s.a.createElement("div",{className:"merchant_box"},s.a.createElement("div",{className:"detail_p"},s.a.createElement("p",null,s.a.createElement("label",null,"Task ID:")," ",e.uuid),s.a.createElement("p",null,s.a.createElement("label",null,"Task Status:")," ",Ee(e.tskStatus)),s.a.createElement("p",null,s.a.createElement("label",null,"Delivery Window:")," ",ve(e.completeAfter,e.completeBefore,e.time_zone)),s.a.createElement("p",null,s.a.createElement("label",null,"Order Number:")," ",e.orderNumber))),s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Merchant info"),e.merchant?s.a.createElement("div",{className:"detail_p"},s.a.createElement("p",null,s.a.createElement("label",null,"Name:")," ",s.a.createElement("span",null,e.merchant.name),"  "),s.a.createElement("p",null,s.a.createElement("label",null,"Phone:"),s.a.createElement("span",null,e.merchant.phone)),s.a.createElement("p",null,s.a.createElement("label",null,"Address:"),s.a.createElement("span",null,e.merchant.address.number,", ",e.merchant.address.street,", ",e.merchant.address.postalCode,", ",e.merchant.address.city,", ",e.merchant.address.state,", ",e.merchant.address.country)),s.a.createElement("p",null,s.a.createElement("label",null,"Notes:"),s.a.createElement("span",null,e.merchant.notes," "))):null)),s.a.createElement(Te.a,{md:"6",sm:"12",className:"r_col"},s.a.createElement("div",{className:"merchant_box minH"},s.a.createElement("h4",null,"Recipient info"),e.merchant?s.a.createElement("div",{className:"detail_p"},s.a.createElement("p",null,s.a.createElement("label",null,"Name:")," ",s.a.createElement("span",null,e.recipients.name)),s.a.createElement("p",null,s.a.createElement("label",null,"Phone:")," ",s.a.createElement("span",null,e.recipients.phone)),e.recpnt_email?s.a.createElement("p",null,s.a.createElement("label",null,"Email:")," ",s.a.createElement("span",null,e.recpnt_email)):null,s.a.createElement("p",null,s.a.createElement("label",null,"Address:"),s.a.createElement("span",null,e.recipients.address.number,", ",e.recipients.address.street,", ",e.recipients.address.postalCode,", ",e.recipients.address.city,", ",e.recipients.address.state,", ",e.recipients.address.country)),s.a.createElement("p",null,s.a.createElement("label",null,"Notes:")," ",s.a.createElement("span",null,e.recipients.notes)),s.a.createElement("p",null,s.a.createElement("label",null,"Alochol:")," ",s.a.createElement("span",null,e.alcohol?"Yes":"No")),s.a.createElement("p",null,s.a.createElement("label",null,"Tip: "),s.a.createElement("span",null,e.tip))):null))),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info task-d"},s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Driver Details"),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("div",{className:"detail_p"},s.a.createElement("p",null,s.a.createElement("label",null,"Driver Name:")," ",e.driver_name)))),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Merchant Task"),s.a.createElement("div",{className:"detail_p"},t.work_in_progress_timestamp?s.a.createElement("p",null,s.a.createElement("label",null,"Order Processing:"),he(1e3*t.work_in_progress_timestamp,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.ready_timestamp?s.a.createElement("p",null,s.a.createElement("label",null,"Order Ready:"),he(1e3*t.ready_timestamp,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.merchant_start?s.a.createElement("p",null,s.a.createElement("label",null,"Start:"),he(1e3*t.merchant_start,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.merchant_eta?s.a.createElement("p",null,s.a.createElement("label",null,"2 min eta:"),he(1e3*t.merchant_eta,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.merchant_arrival?s.a.createElement("p",null,s.a.createElement("label",null,"Arrival:"),he(1e3*t.merchant_arrival,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.merchant_complete?s.a.createElement("p",null,s.a.createElement("label",null,"Complete:"),he(1e3*t.merchant_complete,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.merchant_worker_note?s.a.createElement("p",null,s.a.createElement("label",null,"Complete:"),t.merchant_worker_note):null)),s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Recipient Task"),s.a.createElement("div",{className:"detail_p"},t.recipient_start?s.a.createElement("p",null,s.a.createElement("label",null,"Start:"),he(1e3*t.recipient_start,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.recipient_eta?s.a.createElement("p",null,s.a.createElement("label",null,"2 min eta:"),he(1e3*t.recipient_eta,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.recipient_arrival?s.a.createElement("p",null,s.a.createElement("label",null,"Arrival:"),he(1e3*t.recipient_arrival,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.recipient_complete?s.a.createElement("p",null,s.a.createElement("label",null,"Complete:"),he(1e3*t.recipient_complete,e.timezone,"DD-MM-YYYY hh:mm A")):null,t.recipient_worker_note?s.a.createElement("p",null,s.a.createElement("label",null,"Complete:"),t.recipient_worker_note):null)))))),s.a.createElement(we.a,{noGutters:!0,className:"sigPhotoRow"},o||n?s.a.createElement(Te.a,{md:"6",sm:"12",className:"l_col"},s.a.createElement("div",{className:"merchant_box sigbox"},s.a.createElement("h4",null,"Signature Details"),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Merchant Signature"),o?s.a.createElement("img",{src:"".concat(l).concat(o,"/282x.png")}):null),s.a.createElement(Te.a,{md:"6",sm:"12",className:"sigimg"},s.a.createElement("h6",null,"Recipient Signature"),n?s.a.createElement("img",{src:"".concat(l).concat(n,"/282x.png")}):null)))):null,s.a.createElement(Te.a,{md:"6",sm:"12",className:"r_col"},s.a.createElement("div",{className:"merchant_box dPhoto"},s.a.createElement("h4",null,"Delivery Photo"),r.length>0||a.length>0?s.a.createElement(Ue.a,{responsive:Ye},(a||[]).map(function(e,t){return e?s.a.createElement("div",{className:"pr16"},s.a.createElement("img",{src:"".concat(l).concat(e,"/800x.png")})):null}),(r||[]).map(function(e,t){return e?s.a.createElement("div",{className:"pr16"},s.a.createElement("img",{src:"".concat(l).concat(e,"/800x.png")})):null})):s.a.createElement("p",{className:"noreply"}," No delivery photos")))),e.feedback?s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info task-d"},s.a.createElement("div",{className:"merchant_box feedbackpan"},s.a.createElement("h4",null,"Feedback"),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Customer Feedback"),s.a.createElement("p",null,e.feedback.comment)),s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Response to Customer "),e.feedback.reply_message?s.a.createElement("p",null,e.feedback.reply_message):s.a.createElement("p",{className:"noreply"}," No response yet")))))):null)}var Ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={show:!1},a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show})}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this.state.show||!1,t=this.props.taskDetails||{};return s.a.createElement(Ne.a,{size:"md",className:"c-modal",show:e,onHide:this.props.handleClose},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Task Details")),ze(t))}}]),t}(r.Component),We=a(139),Be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={show:!1},a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(!Object(f.isEmpty)(e.taskDetails)){var a=new window.google.maps.DirectionsService,r={lat:parseFloat(e.taskDetails.mrchnt_lat),lng:parseFloat(e.taskDetails.mrchnt_lng),icon:"https://storage.googleapis.com/creative-image/order_status_icon25.png"},s={lat:parseFloat(e.taskDetails.recpnt_lat),lng:parseFloat(e.taskDetails.recpnt_lng),icon:"https://storage.googleapis.com/creative-image/order_status_icon25.png"};a.route({origin:r,destination:s,travelMode:window.google.maps.TravelMode.DRIVING},function(e,a){a===window.google.maps.DirectionsStatus.OK?t.setState({directions:e}):console.error("error fetching directions ".concat(e))})}this.setState({show:e.show})}},{key:"handleClose",value:function(){this.setState({show:!1,directions:""})}},{key:"shouldComponentUpdate",value:function(e,t){return!(this.state&&this.state.directions&&this.state.directions.routes[0].legs&&this.state.directions.routes[0].overview_path)}},{key:"render",value:function(){var e=this,t=this.state.show||!1,a=this.props.taskDetails||{},r=Object(We.withGoogleMap)(function(t){return Object(f.isEmpty)(e.state.directions)?null:s.a.createElement(We.GoogleMap,{defaultCenter:{lat:6.5244,lng:3.3792},defaultZoom:12,mapTypeControl:!1},s.a.createElement(We.DirectionsRenderer,{directions:e.state.directions,options:{polylineOptions:{stokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:4},icon:!1,suppressMarkers:!0}}),s.a.createElement(We.Marker,{position:{lat:parseFloat(a.mrchnt_lat),lng:parseFloat(a.mrchnt_lng)},icon:"/assets/icon01.png"}),s.a.createElement(We.Marker,{position:{lat:parseFloat(a.recpnt_lat),lng:parseFloat(a.recpnt_lng)},icon:"/assets/icon02.png"}))});return s.a.createElement(Ne.a,{size:"md",className:"c-modal",show:t,onHide:this.props.handleClose},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Map Details")),s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"v-map"},Object(f.isEmpty)(a)?s.a.createElement("div",{className:"loader"},"Loading..."):s.a.createElement(r,{containerElement:s.a.createElement("div",{style:{height:"300px",width:"100%"}}),mapElement:s.a.createElement("div",{style:{height:"100%"}})})))),s.a.createElement(Ne.a.Footer,{className:"map_footer"},s.a.createElement("p",null,s.a.createElement("span",null,"Distance:")," ",this.state.directions?this.state.directions.routes[0].legs[0].distance.text:""," "),s.a.createElement("p",null,s.a.createElement("span",null,"Duration:")," ",this.state.directions?this.state.directions.routes[0].legs[0].duration.text:""," ")))}}]),t}(r.Component),He=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={show:!1},a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show})}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this.state.show||!1;return s.a.createElement(Ne.a,{size:"md",className:"c-modal",show:e,onHide:this.props.handleClose},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,this.props.trackDriver)),s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info"},this.props.currentUrl?s.a.createElement("iframe",{frameborder:"0",width:"100%",src:this.props.currentUrl,style:{border:"none!important",height:"500px"}}):null))))}}]),t}(r.Component),Ke=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tasks||{},a=t.orders||[],r=this.props.shoppedLate||{},n=r.summary||{},o=0,l=0,i=0;return Object(f.isEmpty)(n)||"default"!==r.type||(l=n.total_orders,o=n.shopped_late,i=_e(n.shopping_late_percent)),Object(f.isEmpty)(t)?s.a.createElement("section",{className:"content"},s.a.createElement("div",{className:"loader"},"Loading....")):s.a.createElement("section",{className:"content"},s.a.createElement("div",{className:"table_sec dboardtable"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8",className:"t-titel"},s.a.createElement("span",{className:"aOrder"},"All Orders"),s.a.createElement("div",{className:"status_count"},s.a.createElement("span",{className:"fc_black"}," Total: ",t.total),s.a.createElement("span",{className:"fc_green"},"Ready: ",t.ready),s.a.createElement("span",{className:"fc_yellow"},"Shopping: ",t.shopping),s.a.createElement("span",{className:"fc_read"},"Not Ready: ",t.not_ready),s.a.createElement("span",{className:"fc_gray"}," Shopped Late: ",i,"% (",o,"/",l,")"))))),s.a.createElement("tbody",null,s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Delivery Window"),s.a.createElement("th",null,"Merchant Address"),s.a.createElement("th",null,"Recipient Address"),s.a.createElement("th",null,"Driver"),s.a.createElement("th",null,"Shopped Late"),s.a.createElement("th",null,"Task Status"),s.a.createElement("th",null)),a.length>0?a.map(function(t,a){var r="";r="R"===t.order_status||"F"===t.order_status||"Y"===t.order_status?"ready":"W"===t.order_status?"shopping":"not_ready";var n="No",o="fcGray";t.shoppedLate>0&&(n=t.shoppedLate+" min",o=t.shoppedLate>=30?"fcRed":"fcBlack");var l=ge(t.tsk_status);return s.a.createElement("tr",{key:a,onContextMenu:function(a){return e.props.handleContextMenu(a,{order_number:t.order_number,order_id:t.id,order_uuid:t.uuid,tsk_status:t.tsk_status,mrchnt_address:t.mrchnt_address,recpnt_address:t.recpnt_address})}},s.a.createElement("td",{abbr:"tr"},s.a.createElement("span",{className:"round ".concat(r)}),t.order_number),s.a.createElement("td",{abbr:"tr"},t.complete_after," - ",t.complete_before),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("label",null,t.mrchnt_address.toString())," ",s.a.createElement("span",{className:"tTip"},t.mrchnt_address.toString())),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("label",null,t.recpnt_address.toString()),s.a.createElement("span",{className:"tTip"},t.recpnt_address.toString())),s.a.createElement("td",{abbr:"tr"},t.driver_name),s.a.createElement("td",{abbr:"tr"},s.a.createElement("span",{className:o},n)),s.a.createElement("td",{className:"react-contextmenu-wrapper",id:"some_unique_identifier"},s.a.createElement("span",{className:l},t.tsk_status)),s.a.createElement("td",null,t.track_driver&&"Completed"!==t.tsk_status?s.a.createElement("a",{onClick:function(a){return e.props.openTrackWindow(a,{current_url:t.current_url,track_driver:t.track_driver})}},"Track Driver"):null))}):s.a.createElement("tr",null,s.a.createElement("td",{align:"center",colSpan:"7"},"No Record(s)"))))))}}]),t}(r.Component),Ge=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tasks||{},a=this.props.shoppedLate||{},r=a.summary||{};return Object(f.isEmpty)(t)?s.a.createElement("section",{className:"content"},s.a.createElement("div",{className:"no-records"},"No Records")):Object.keys(t||{}).map(function(n,o){var l=t[n]||[],i=l.orders||[],c=0,d=0,u=0,m=r[l.name];return Object(f.isEmpty)(m)||"state"!==a.type||(d=m.total_orders,c=m.shopped_late,u=_e(m.shopping_late_percent)),s.a.createElement("section",{key:o,className:"content"},s.a.createElement("div",{className:"table_sec dboardtable"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8",className:"t-titel"},s.a.createElement("span",{className:"aOrder"},l.name),s.a.createElement("div",{className:"status_count"},s.a.createElement("span",{className:"fc_black"}," Total: ",l.total),s.a.createElement("span",{className:"fc_green"},"Ready: ",l.ready),s.a.createElement("span",{className:"fc_yellow"},"Shopping: ",l.shopping),s.a.createElement("span",{className:"fc_read"},"Not Ready: ",l.not_ready),s.a.createElement("span",{className:"fc_gray"}," Shopped Late: ",u,"% (",c,"/",d,")"))))),s.a.createElement("tbody",null,s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Delivery Window"),s.a.createElement("th",null,"Merchant Address"),s.a.createElement("th",null,"Recipient Address"),s.a.createElement("th",null,"Driver"),s.a.createElement("th",null,"Shopped Late"),s.a.createElement("th",null,"Task Status"),s.a.createElement("th",null)),i.map(function(t,a){var r="";r="R"===t.order_status||"F"===t.order_status||"Y"===t.order_status?"ready":"W"===t.order_status?"shopping":"not_ready";var n="No",o="fcGray";t.shoppedLate>0&&(n=t.shoppedLate+" min",o=t.shoppedLate>=30?"fcRed":"fcBlack");var l=ge(t.tsk_status);return s.a.createElement("tr",{key:a,onContextMenu:function(a){return e.props.handleContextMenu(a,{order_number:t.order_number,order_id:t.id,order_uuid:t.uuid,tsk_status:t.tsk_status,mrchnt_address:t.mrchnt_address,recpnt_address:t.recpnt_address})}},s.a.createElement("td",{abbr:"tr"},s.a.createElement("span",{className:"round ".concat(r)}),t.order_number),s.a.createElement("td",{abbr:"tr"},t.complete_after," - ",t.complete_before),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("label",null,t.mrchnt_address.toString())," ",s.a.createElement("span",{className:"tTip"},t.mrchnt_address.toString())),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("label",null,t.recpnt_address.toString()),s.a.createElement("span",{className:"tTip"},t.recpnt_address.toString())),s.a.createElement("td",{abbr:"tr"},t.driver_name),s.a.createElement("td",{abbr:"tr"},s.a.createElement("span",{className:o},n)),s.a.createElement("td",{className:"react-contextmenu-wrapper",id:"some_unique_identifier"},s.a.createElement("span",{className:l},t.tsk_status)),s.a.createElement("td",null,t.track_driver&&"Completed"!==t.tsk_status?s.a.createElement("a",{onClick:function(a){return e.props.openTrackWindow(a,{current_url:t.current_url,track_driver:t.track_driver})}},"Track Driver"):null))})))))})}}]),t}(r.Component),Ve=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tasks||{},a=this.props.shoppedLate||{},r=a.summary||{};return Object(f.isEmpty)(t)?s.a.createElement("section",{className:"content"},s.a.createElement("div",{className:"no-records"},"No Records")):Object.keys(t||{}).map(function(n,o){var l=t[n]||[];return s.a.createElement("section",{key:o,className:"content"},s.a.createElement("h3",{className:"title"},n),l.map(function(t,o){var l=t.orders||[],i=0,c=0,d=0,u={};return u="store"===a.type?r[t.uniqueid]||{}:r[n]?r[n][t.uniqueid]:{},Object(f.isEmpty)(u)||(c=u.total_orders,i=u.shopped_late,d=_e(u.shopping_late_percent)),s.a.createElement("div",{key:o,className:"table_sec dboardtable"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8",className:"t-titel"},s.a.createElement("span",{className:"aOrder"},t.name),s.a.createElement("div",{className:"status_count"},s.a.createElement("span",{className:"fc_black"}," Total: ",t.total),s.a.createElement("span",{className:"fc_green"},"Ready: ",t.ready),s.a.createElement("span",{className:"fc_yellow"},"Shopping: ",t.shopping),s.a.createElement("span",{className:"fc_read"},"Not Ready: ",t.not_ready),s.a.createElement("span",{className:"fc_gray"}," Shopped Late: ",d,"% (",i,"/",c,")"))))),s.a.createElement("tbody",null,s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Delivery Window"),s.a.createElement("th",null,"Merchant Address"),s.a.createElement("th",null,"Recipient Address"),s.a.createElement("th",null,"Driver"),s.a.createElement("th",null,"Shopped Late"),s.a.createElement("th",null,"Task Status"),s.a.createElement("th",null)),l.map(function(t,a){var r="";r="R"===t.order_status||"F"===t.order_status||"Y"===t.order_status?"ready":"W"===t.order_status?"shopping":"not_ready";var n="No",o="fcGray";t.shoppedLate>0&&(n=t.shoppedLate+" min",o=t.shoppedLate>=30?"fcRed":"fcBlack");var l=ge(t.tsk_status);return s.a.createElement("tr",{key:a,onContextMenu:function(a){return e.props.handleContextMenu(a,{order_number:t.order_number,order_id:t.id,order_uuid:t.uuid,tsk_status:t.tsk_status,mrchnt_address:t.mrchnt_address,recpnt_address:t.recpnt_address})}},s.a.createElement("td",{abbr:"tr"},s.a.createElement("span",{className:"round ".concat(r)}),t.order_number),s.a.createElement("td",{abbr:"tr"},t.complete_after," - ",t.complete_before),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("label",null,t.mrchnt_address.toString())," ",s.a.createElement("span",{className:"tTip"},t.mrchnt_address.toString())),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("label",null,t.recpnt_address.toString()),s.a.createElement("span",{className:"tTip"},t.recpnt_address.toString())),s.a.createElement("td",{abbr:"tr"},t.driver_name),s.a.createElement("td",{abbr:"tr"},s.a.createElement("span",{className:o},n)),s.a.createElement("td",{className:"react-contextmenu-wrapper",id:"some_unique_identifier"},s.a.createElement("span",{className:l},t.tsk_status)),s.a.createElement("td",null,t.track_driver&&"Completed"!==t.tsk_status?s.a.createElement("a",{onClick:function(a){return e.props.openTrackWindow(a,{current_url:t.current_url,track_driver:t.track_driver})}},"Track Driver"):null))}))))}))})}}]),t}(r.Component),Xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).hideContextMenu=function(){a.setState({visible:!1,x:0,y:0})},a.state={editShow:!1,detailsShow:!1,mapShow:!1,trackShow:!1,visible:!1,x:"",y:"",tasks:{},isLoading:!0,mrchnt_address:"",recpnt_address:"",filteredList:[],listType:""},a.snapshot=null,a.statefilter=[],a.areafilter=[],a.storefilter=[],a.arrangeData=a.arrangeData.bind(Object(Q.a)(Object(Q.a)(a))),a.handleContextMenu=a.handleContextMenu.bind(Object(Q.a)(Object(Q.a)(a))),a.openEditWindow=a.openEditWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.openDetailsWindow=a.openDetailsWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.openMapWindow=a.openMapWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.openTrackWindow=a.openTrackWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.deleteTask=a.deleteTask.bind(Object(Q.a)(Object(Q.a)(a))),a.updateTask=a.updateTask.bind(Object(Q.a)(Object(Q.a)(a))),a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"openEditWindow",value:function(e,t,a){this.props.getTaskDetails({uuid:e}),this.setState({editShow:!0,mrchnt_address:t,recpnt_address:a})}},{key:"openDetailsWindow",value:function(e){this.props.getTaskDetails({uuid:e}),this.setState({detailsShow:!0})}},{key:"openMapWindow",value:function(e){this.props.getTaskDetails({uuid:e}),this.setState({mapShow:!0})}},{key:"openTrackWindow",value:function(e,t){e.stopPropagation(),this.setState({trackShow:!0,currentUrl:t.current_url,trackDriver:t.track_driver})}},{key:"updateTask",value:function(e,t){window.confirm("Do you really want to update status of this task?")&&this.props.updateTaskStatus({uuid:e,status:t})}},{key:"deleteTask",value:function(e){window.confirm("Do you really want to delete this task?")&&this.props.deleteTask({uuid:e})}},{key:"handleClose",value:function(){this.setState({visible:!1,editShow:!1,mapShow:!1,detailsShow:!1,trackShow:!1})}},{key:"handleContextMenu",value:function(e,t){e.preventDefault();var a=e.clientX,r=e.pageY;this.setState({visible:!0,x:a,y:r,selOrder:Object(m.a)({},t)})}},{key:"componentDidMount",value:function(){this.statefilter=Object(ee.a)(this.props.statefilter),this.areafilter=Object(ee.a)(this.props.areafilter),this.storefilter=Object(ee.a)(this.props.storefilter);var e=this.props.org_id||"",t=this.props.type||"";this.getTasks({org_id:e,task_type:t,statefilter:this.props.statefilter,areafilter:this.props.areafilter,storefilter:this.props.storefilter})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.type===e.type&&this.unsubscribe)this.searchTxt===e.searchTxt&&Object(f.isEqual)(this.statefilter,e.statefilter)&&Object(f.isEqual)(this.areafilter,e.areafilter)&&Object(f.isEqual)(this.storefilter,e.storefilter)||(this.statefilter=Object(ee.a)(e.statefilter),this.areafilter=Object(ee.a)(e.areafilter),this.storefilter=Object(ee.a)(e.storefilter),this.searchTxt=e.searchTxt,this.arrangeData());else{this.statefilter=Object(ee.a)(e.statefilter),this.areafilter=Object(ee.a)(e.areafilter),this.storefilter=Object(ee.a)(e.storefilter);var t=e.org_id||"",a=e.type||"";this.getTasks({org_id:t,task_type:a,statefilter:e.statefilter,areafilter:e.areafilter,storefilter:e.storefilter})}}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"getTasks",value:function(e){this.unsubscribe&&this.unsubscribe();var t=this,a=e.org_id,r=e.task_type,s=(e.statefilter,de.collection("tasks").where("org_id","==",a).where("tsk_type","==",r));this.unsubscribe=s.onSnapshot(function(e){t.snapshot=e,t.arrangeData()})}},{key:"arrangeData",value:function(){var e=this,t=this.snapshot,a=[],r={};(this.storefilter||[]).forEach(function(e){a.push(e.store_id),r[e.store_id]=e.label});var s=function(e,t){var a=t.state||[],r=t.area||[],s=t.store||[],n=t.storeName||[],o=t.searchTxt?t.searchTxt.toLowerCase():"",l="",i="",c="",d="",u={},m=null,p="general",h=0,_="UncategorizedList";if(e)if(0===a.length&&0===r.length&&0===s.length)_="UncategorizedList",u={ready:0,not_ready:0,total:0,shopping:0,orders:[],totShoppedLate:0},e.forEach(function(e){var t=e.data();h++,p="general",l="",i="",c="",d="",m=null,f.isUndefined(t.tsk_type)||""===t.tsk_type||(p=t.tsk_type),l="tsk_proc_hld"===t.tsk_status?"Scheduled":"tsk_proc_mrchnt"===t.tsk_status?"Scheduled":"tsk_proc_drv"===t.tsk_status&&"drv_strt_recpnt_tsk"===t.driver_status?"Picked Up":"tsk_proc_drv"===t.tsk_status?"Processing":"tsk_cmp"===t.tsk_status?"Completed":"tsk_cncling"===t.tsk_status?"Deleted":"tsk_cncled"===t.tsk_status?"Deleted":"Scheduled",f.isUndefined(t.created_at)||""===t.created_at||(d=he(1e3*parseInt(t.created_at),t.time_zone,"MM/DD/YYYY")),f.isUndefined(t.pickup_onfleet_url)||""===t.pickup_onfleet_url||(i="Driver to Merchant",c=t.pickup_onfleet_url),f.isUndefined(t.drop_onfleet_url)||""===t.drop_onfleet_url||(i="Driver to Recipient",c=t.drop_onfleet_url);var a=he(1e3*parseInt(t.complete_after),t.time_zone,"MM/DD \xb7 hh:mma"),r=he(1e3*parseInt(t.complete_before),t.time_zone,"hh:mma");t.order_status&&(m=t.order_status),u.total++,"R"===m||"F"===m||"Y"===m?u.ready++:"W"===m?u.shopping++:u.not_ready++,t.tip&&t.tip;var s=0;t.ready_timestamp&&t.ready_timestamp>t.complete_after&&(s=Math.round((t.ready_timestamp-t.complete_after)/60)),s>0&&u.totShoppedLate++,u.orders.push({id:t.id,created_at:d,complete_after:a,complete_before:r,recpnt_address:t.recpnt_address_full,mrchnt_address:t.mrchnt_address_full,driver_name:t.driver_name,tsk_status:l,uuid:t.uuid,drop_onfleet_url:t.drop_onfleet_url||"",pickup_onfleet_url:t.pickup_onfleet_url||"",track_driver:i,current_url:c,order_number:t.order_number,timestamp:t.complete_after,timezone:t.time_zone,order_status:m,mrchnt_name:t.mrchnt_name,tsk_type:p,shoppedLate:s})}),u.orders=f.orderBy(u.orders,[function(e){return e.timestamp}],["asc"]);else{if(a.length>0&&0===r.length&&0===s.length&&(_="StateWiseList",e.forEach(function(e){var t=e.data();if((0===a.length||a.includes(t.state_code))&&(""===o||t.order_number.toLowerCase().includes(o))&&(0===r.length||r.includes(t.mkt_ofc_cty_del_zne_name))&&(0===s.length||s.includes(t.store_id))){h++,p="general",l="",i="",c="",d="",m=null,f.isUndefined(t.tsk_type)||""===t.tsk_type||(p=t.tsk_type),l="tsk_proc_hld"===t.tsk_status?"Scheduled":"tsk_proc_mrchnt"===t.tsk_status?"Scheduled":"tsk_proc_drv"===t.tsk_status&&"drv_strt_recpnt_tsk"===t.driver_status?"Picked Up":"tsk_proc_drv"===t.tsk_status?"Processing":"tsk_cmp"===t.tsk_status?"Completed":"tsk_cncling"===t.tsk_status?"Deleted":"tsk_cncled"===t.tsk_status?"Deleted":"Scheduled",f.isUndefined(t.created_at)||""===t.created_at||(d=he(1e3*parseInt(t.created_at),t.time_zone,"MM/DD/YYYY")),f.isUndefined(t.pickup_onfleet_url)||""===t.pickup_onfleet_url||(i="Driver to Merchant",c=t.pickup_onfleet_url),f.isUndefined(t.drop_onfleet_url)||""===t.drop_onfleet_url||(i="Driver to Recipient",c=t.drop_onfleet_url);var n=he(1e3*parseInt(t.complete_after),t.time_zone,"MM/DD \xb7 hh:mma"),_=he(1e3*parseInt(t.complete_before),t.time_zone,"hh:mma");u[t.state_code]||(u[t.state_code]={name:t.state_code,ready:0,not_ready:0,shopping:0,total:0,orders:[],totShoppedLate:0}),t.order_status&&(m=t.order_status),u[t.state_code].total++,"R"===m||"F"===m||"Y"===m?u[t.state_code].ready++:"W"===m?u[t.state_code].shopping++:u[t.state_code].not_ready++,t.tip&&t.tip;var b=0;t.ready_timestamp&&t.ready_timestamp>t.complete_after&&(b=Math.round((t.ready_timestamp-t.complete_after)/60)),b>0&&u[t.state_code].totShoppedLate++,u[t.state_code].orders.push({id:t.id,created_at:d,complete_after:n,complete_before:_,recpnt_address:t.recpnt_address_full,mrchnt_address:t.mrchnt_address_full,driver_name:t.driver_name,tsk_status:l,uuid:t.uuid,drop_onfleet_url:t.drop_onfleet_url||"",pickup_onfleet_url:t.pickup_onfleet_url||"",track_driver:i,current_url:c,order_number:t.order_number,timestamp:t.complete_after,timezone:t.time_zone,order_status:m,mrchnt_name:t.mrchnt_name,tsk_type:p,shoppedLate:b})}}),f.each(u,function(e,t){u[t].orders=f.orderBy(u[t].orders,[function(e){return e.timestamp}],["asc"])}),u=f.orderBy(u,[function(e){return e.name}],["asc"])),a.length>0&&r.length>0&&0===s.length){_="ZoneWiseList",e.forEach(function(e){var t=e.data();if((0===a.length||a.includes(t.state_code))&&(""===o||t.order_number.toLowerCase().includes(o))&&(0===r.length||r.includes(t.mkt_ofc_cty_del_zne_name))&&(0===s.length||s.includes(t.store_id))){h++,p="general",l="",i="",c="",d="",m=null,f.isUndefined(t.tsk_type)||""===t.tsk_type||(p=t.tsk_type),l="tsk_proc_hld"===t.tsk_status?"Scheduled":"tsk_proc_mrchnt"===t.tsk_status?"Scheduled":"tsk_proc_drv"===t.tsk_status&&"drv_strt_recpnt_tsk"===t.driver_status?"Picked Up":"tsk_proc_drv"===t.tsk_status?"Processing":"tsk_cmp"===t.tsk_status?"Completed":"tsk_cncling"===t.tsk_status?"Deleted":"tsk_cncled"===t.tsk_status?"Deleted":"Scheduled",f.isUndefined(t.created_at)||""===t.created_at||(d=he(1e3*parseInt(t.created_at),t.time_zone,"MM/DD/YYYY")),f.isUndefined(t.pickup_onfleet_url)||""===t.pickup_onfleet_url||(i="Driver to Merchant",c=t.pickup_onfleet_url),f.isUndefined(t.drop_onfleet_url)||""===t.drop_onfleet_url||(i="Driver to Recipient",c=t.drop_onfleet_url);var n=he(1e3*parseInt(t.complete_after),t.time_zone,"MM/DD \xb7 hh:mma"),_=he(1e3*parseInt(t.complete_before),t.time_zone,"hh:mma");f.isUndefined(u[t.state_code])?(u[t.state_code]={},u[t.state_code][t.mkt_ofc_cty_del_zne_id]={name:t.mkt_ofc_cty_del_zne_name,id:t.state_code+t.mkt_ofc_cty_del_zne_id,uniqueid:t.mkt_ofc_cty_del_zne_id,ready:0,not_ready:0,shopping:0,total:0,orders:[],totShoppedLate:0}):f.isUndefined(u[t.state_code][t.mkt_ofc_cty_del_zne_id])&&(u[t.state_code][t.mkt_ofc_cty_del_zne_id]={name:t.mkt_ofc_cty_del_zne_name,id:t.state_code+t.mkt_ofc_cty_del_zne_id,uniqueid:t.mkt_ofc_cty_del_zne_id,ready:0,not_ready:0,shopping:0,total:0,orders:[],totShoppedLate:0}),t.order_status&&(m=t.order_status),u[t.state_code][t.mkt_ofc_cty_del_zne_id].total++,"R"===m||"F"===m||"Y"===m?u[t.state_code][t.mkt_ofc_cty_del_zne_id].ready++:"W"===m?u[t.state_code][t.mkt_ofc_cty_del_zne_id].shopping++:u[t.state_code][t.mkt_ofc_cty_del_zne_id].not_ready++,t.tip&&t.tip;var b=0;t.ready_timestamp&&t.ready_timestamp>t.complete_after&&(b=Math.round((t.ready_timestamp-t.complete_after)/60)),b>0&&u[t.state_code][t.mkt_ofc_cty_del_zne_id].totShoppedLate++,u[t.state_code][t.mkt_ofc_cty_del_zne_id].orders.push({id:t.id,created_at:d,complete_after:n,complete_before:_,recpnt_address:t.recpnt_address_full,mrchnt_address:t.mrchnt_address_full,driver_name:t.driver_name,tsk_status:l,uuid:t.uuid,drop_onfleet_url:t.drop_onfleet_url||"",pickup_onfleet_url:t.pickup_onfleet_url||"",track_driver:i,current_url:c,order_number:t.order_number,timestamp:t.complete_after,timezone:t.time_zone,order_status:m,mrchnt_name:t.mrchnt_name,tsk_type:p,shoppedLate:b})}});var b={};f.each(u,function(e,t){f.each(e,function(e,a){u[t][a].orders=f.sortBy(u[t][a].orders,function(e){return e.timestamp})}),b[t]=f.sortBy(u[t],function(e){return e.name})}),u=b}if(s.length>0){_="ZoneWiseList",e.forEach(function(e){var t=e.data();if((0===a.length||a.includes(t.state_code))&&(""===o||t.order_number.toLowerCase().includes(o))&&(0===r.length||r.includes(t.mkt_ofc_cty_del_zne_name))&&(0===s.length||s.includes(t.store_id))){h++,p="general",l="",i="",c="",d="",m=null,f.isUndefined(t.tsk_type)||""===t.tsk_type||(p=t.tsk_type),l="tsk_proc_hld"===t.tsk_status?"Scheduled":"tsk_proc_mrchnt"===t.tsk_status?"Scheduled":"tsk_proc_drv"===t.tsk_status&&"drv_strt_recpnt_tsk"===t.driver_status?"Picked Up":"tsk_proc_drv"===t.tsk_status?"Processing":"tsk_cmp"===t.tsk_status?"Completed":"tsk_cncling"===t.tsk_status?"Deleted":"tsk_cncled"===t.tsk_status?"Deleted":"Scheduled",f.isUndefined(t.created_at)||""===t.created_at||(d=he(1e3*parseInt(t.created_at),t.time_zone,"MM/DD/YYYY")),f.isUndefined(t.pickup_onfleet_url)||""===t.pickup_onfleet_url||(i="Driver to Merchant",c=t.pickup_onfleet_url),f.isUndefined(t.drop_onfleet_url)||""===t.drop_onfleet_url||(i="Driver to Recipient",c=t.drop_onfleet_url);var _=he(1e3*parseInt(t.complete_after),t.time_zone,"MM/DD \xb7 hh:mma"),b=he(1e3*parseInt(t.complete_before),t.time_zone,"hh:mma");f.isUndefined(u[t.state_code])?(u[t.state_code]={},u[t.state_code][t.store_id]={name:n[t.store_id],id:t.state_code+t.store_id,uniqueid:t.store_id,ready:0,not_ready:0,shopping:0,total:0,orders:[],totShoppedLate:0}):f.isUndefined(u[t.state_code][t.store_id])&&(u[t.state_code][t.store_id]={name:n[t.store_id],id:t.state_code+t.store_id,uniqueid:t.store_id,ready:0,not_ready:0,shopping:0,total:0,orders:[],totShoppedLate:0}),t.order_status&&(m=t.order_status),u[t.state_code][t.store_id].total++,"R"===m||"F"===m||"Y"===m?u[t.state_code][t.store_id].ready++:"W"===m?u[t.state_code][t.store_id].shopping++:u[t.state_code][t.store_id].not_ready++,t.tip&&t.tip;var g=0;t.ready_timestamp&&t.ready_timestamp>t.complete_after&&(g=Math.round((t.ready_timestamp-t.complete_after)/60)),g>0&&u[t.state_code][t.store_id].totShoppedLate++,u[t.state_code][t.store_id].orders.push({id:t.id,created_at:d,complete_after:_,complete_before:b,recpnt_address:t.recpnt_address_full,mrchnt_address:t.mrchnt_address_full,driver_name:t.driver_name,tsk_status:l,uuid:t.uuid,drop_onfleet_url:t.drop_onfleet_url||"",pickup_onfleet_url:t.pickup_onfleet_url||"",track_driver:i,current_url:c,order_number:t.order_number,timestamp:t.complete_after,timezone:t.time_zone,order_status:m,mrchnt_name:t.mrchnt_name,tsk_type:p,shoppedLate:g})}});var g={};f.each(u,function(e,t){f.each(e,function(e,a){u[t][a].orders=f.sortBy(u[t][a].orders,function(e){return e.timestamp})}),g[t]=f.sortBy(u[t],function(e){return e.name})}),u=g}}return{tasks:u,count:h,type:_}}(t,{state:Object(f.map)(this.statefilter,"value"),area:Object(f.map)(this.areafilter,"value"),store:a,storeName:r,searchTxt:this.searchTxt}),n=s.tasks,o=s.count,l=s.type;this.setState({tasks:n,listType:l,isLoading:!1},function(){e.props.updateTotalCount(o||0)})}},{key:"render",value:function(){var e=this.state.tasks||{};return s.a.createElement("div",null,s.a.createElement(je,{visible:this.state.visible,x:this.state.x,y:this.state.y,selOrder:this.state.selOrder,openEditWindow:this.openEditWindow,openDetailsWindow:this.openDetailsWindow,openMapWindow:this.openMapWindow,deleteTask:this.deleteTask,updateTask:this.updateTask,hideContextMenu:this.hideContextMenu}),this.state.isLoading?s.a.createElement("div",{className:"loader"},"Loading...."):s.a.createElement("div",null,"UncategorizedList"===this.state.listType?s.a.createElement(Ke,{tasks:e,openTrackWindow:this.openTrackWindow,handleContextMenu:this.handleContextMenu,shoppedLate:this.props.shoppedLate}):null,"StateWiseList"===this.state.listType?s.a.createElement(Ge,{tasks:e,openTrackWindow:this.openTrackWindow,handleContextMenu:this.handleContextMenu,shoppedLate:this.props.shoppedLate}):null,"ZoneWiseList"===this.state.listType?s.a.createElement(Ve,{tasks:e,openTrackWindow:this.openTrackWindow,handleContextMenu:this.handleContextMenu,shoppedLate:this.props.shoppedLate}):null,this.state.editShow?s.a.createElement(Me,{taskDetails:this.props.taskDetails,show:this.state.editShow,taskType:this.props.taskType,stores:this.props.stores,locations:this.props.locations,pharmacy:this.props.pharmacy,timings:this.props.timings,settingsData:this.props.settingsData,editTask:this.props.editTask,mrchnt_address:this.state.mrchnt_address,recpnt_address:this.state.recpnt_address,handleClose:this.handleClose}):null,s.a.createElement(He,{show:this.state.trackShow,currentUrl:this.state.currentUrl,trackDriver:this.state.trackDriver,handleClose:this.handleClose}),this.state.detailsShow?s.a.createElement(Ie,{show:this.state.detailsShow,taskDetails:this.props.taskDetails,handleClose:this.handleClose}):null,this.state.mapShow?s.a.createElement(Be,{show:this.state.mapShow,taskDetails:this.props.taskDetails,handleClose:this.handleClose}):null))}}]),t}(r.Component),Je=a(1011),qe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onChangeHandle=function(e){var t,r=e.target.name,s=e.target.value;a.setState((t={},Object(Ce.a)(t,r,s),Object(Ce.a)(t,"stOpen",!0),t))},a.handleClick=function(e){e.stopPropagation(),a.nodeStore.contains(e.target)||"ignore-outer-click"===e.target.getAttribute("data")||a.state.stOpen&&a.setState({stOpen:!1,storeTxt:a.state.selStoreTxt})},a.handleSelectbox=function(){a.setState({stOpen:!a.state.stOpen,storeTxt:a.state.stOpen?a.state.selStoreTxt:""})},a.state={storeTxt:"",selStoreTxt:"",stOpen:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"componentWillReceiveProps",value:function(e){var t=e.selected||"";if(t){var a=(e.stores||[]).findIndex(function(e){return e.id===t}),r=e.stores[a].label;this.setState({storeTxt:r,selStoreTxt:r})}else this.setState({selStoreTxt:""})}},{key:"render",value:function(){var e=this,t=this.props.stores||[],a=Object(f.sortBy)(t,"label");return s.a.createElement("div",{ref:function(t){return e.nodeStore=t},className:"select-box".concat(this.state.stOpen?" sopen":" "),onClick:this.handleSelectbox},s.a.createElement("div",{className:"s-result"},s.a.createElement("input",{type:"text",className:this.props.className,autoComplete:"text",placeholder:"Store",name:"storeTxt",value:this.state.storeTxt,onChange:this.onChangeHandle})),s.a.createElement("ul",null,a.map(function(t,a){return t.label.toLowerCase().includes(e.state.storeTxt.toLowerCase())?s.a.createElement("li",{key:a,data:"ignore-outer-click",onClick:function(r){return e.props.handleStoreChange(Object(m.a)({},t),a)}},t.label):null})))}}]),t}(r.Component),Ze=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onChangeHandle=function(e){var t,r=e.target.name,s=e.target.value;a.setState((t={},Object(Ce.a)(t,r,s),Object(Ce.a)(t,"lOpen",!0),t))},a.handleClick=function(e){e.stopPropagation(),a.nodeAddress.contains(e.target)||"ignore-outer-click"===e.target.getAttribute("data")||a.state.lOpen&&a.setState({lOpen:!1,locationTxt:a.state.selLocaTxt})},a.handleSelectbox=function(){a.setState({lOpen:!a.state.lOpen,locationTxt:a.state.lOpen?a.state.selLocaTxt:""})},a.state={locationTxt:"",selLocaTxt:"",lOpen:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"componentWillReceiveProps",value:function(e){var t=e.selected||"";if(t&&t>0){var a=(e.locations||[]).findIndex(function(e){return e.id===t}),r=e.locations[a].label;this.setState({locationTxt:r,selLocaTxt:r})}else this.setState({selLocaTxt:""})}},{key:"render",value:function(){var e=this,t=this.props.locations||[],a=Object(f.sortBy)(t,"label");return s.a.createElement("div",{ref:function(t){return e.nodeAddress=t},className:"select-box".concat(this.state.lOpen?" sopen":" "),onClick:this.handleSelectbox},s.a.createElement("div",{className:"s-result"},s.a.createElement("input",{type:"text",className:this.props.className,autoComplete:"text",placeholder:"Address",name:"locationTxt",value:this.state.locationTxt,onChange:this.onChangeHandle})),s.a.createElement("ul",null,a.map(function(t,a){return t.label.toLowerCase().includes(e.state.locationTxt.toLowerCase())?s.a.createElement("li",{key:a,data:"ignore-outer-click",onClick:function(r){return e.props.handleLocationChange(Object(m.a)({},t),a)}},t.label):null})))}}]),t}(r.Component),$e=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState({recipient_address:e,formData:Object(m.a)({},a.state.formData,{recipient_location:{}})})},a.selectStore=function(e,t){(a.props.locations||[]).findIndex(function(t){return t.id===e.id});e.id?a.setState({formData:Object(m.a)({},a.state.formData,{store:e.id,merchant_address:e.id,merchant_phone:e.data.phone,merchant_notes:e.data.note})}):a.setState({formData:Object(m.a)({},a.state.formData,{store:"",merchant_address:"",merchant_phone:"",merchant_notes:""})})},a.selectMerchantAddress=function(e,t){(a.props.locations||[]).findIndex(function(t){return t.id===e.id});e.id?a.setState({formData:Object(m.a)({},a.state.formData,{store:e.id,merchant_address:e.id,merchant_phone:e.data.phone,merchant_notes:e.data.note})}):a.setState({formData:Object(m.a)({},a.state.formData,{store:"",merchant_address:"",merchant_phone:"",merchant_notes:""})})},a.handleSelect=function(e){var t=Object(Q.a)(Object(Q.a)(a)),r={zipcode:"",state_code:"",latitude:"",longitude:"",address:""};Object(Le.geocodeByAddress)(e).then(function(e){return r.address=e[0].formatted_address||"",Object(Le.getLatLng)(e[0])}).then(function(e){var s=e.lat,n=e.lng;if(/(\d+) (.+?), (.+?), (.+?) ([0-9]{5})/g.test(r.address)){a.props.deliveryAddress;var o=be(r.address);!Object(f.isEmpty)(o)&&o.validAdrs?(r.latitude=s,r.longitude=n,r.address=o.address,r.zipcode=o.zipcode,r.state_code=o.state_code,r.city=o.city,r.country=o.country,r.number=o.number,r.street=o.street,t.setState({formData:Object(m.a)({},t.state.formData,{recipient_location:r}),recipient_address:r.address})):t.setState({formData:Object(m.a)({},t.state.formData,{recipient_location:{}})})}else t.setState({formData:Object(m.a)({},t.state.formData,{recipient_location:{}})})}).catch(function(e){t.setState({formData:Object(m.a)({},t.state.formData,{recipient_location:{}})}),console.error("Error",e)})},a.onDateSelect=function(e){a.setState({formData:Object(m.a)({},a.state.formData,{delivery_date:e})})},a.defaultErrors={merchant_name:"",last_name:"",merchant_phone:"",orderNumber:"",store:"",merchant_address:"",recipient_name:"",delivery_date:"",recipient_phone:"",delivery_time:""},a.state={show:!1,alcohol:!1,signature:!0,locations:[],formData:{},settingsData:{},startDate:new Date,recipient_address:"",recipient_location:{zipcode:"",state_code:"",latitude:"",longitude:"",address:""}},a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a.handleCbox=a.handleCbox.bind(Object(Q.a)(Object(Q.a)(a))),a.handleCreateTask=a.handleCreateTask.bind(Object(Q.a)(Object(Q.a)(a))),a.validateForm=a.validateForm.bind(Object(Q.a)(Object(Q.a)(a))),a.onChangeHandle=a.onChangeHandle.bind(Object(Q.a)(Object(Q.a)(a))),a.handleChange=a.handleChange.bind(Object(Q.a)(Object(Q.a)(a))),a.onDateSelect=a.onDateSelect.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleCbox",value:function(e){e.target;this.setState(Object(Ce.a)({},e.target.name,!this.state[e.target.name]))}},{key:"componentDidMount",value:function(){var e=this.props.userData.org_name;this.setState({formData:{merchant_name:e}}),this.props.getLocations()}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.isTaskProcessing||e.isTaskProcessing===this.props.isTaskProcessing){var a=this.props.userData.org_name;this.setState({show:e.show,formData:Object(m.a)({},this.state.formData,{merchant_name:a})},function(){t.validateForm()})}else this.handleClose();if(!Object(f.isEmpty)(e.settingsData)&&!Object(f.isEqual)(this.state.settingsData,e.settingsData)){this.timings=this.timing(e.settingsData.start_time,e.settingsData.end_time);var r=this.timings.key&&!this.state.formData.delivery_time?this.timings.key:"";this.setState({settingsData:e.settingsData,formData:Object(m.a)({},this.state.formData,{delivery_time:r})})}}},{key:"handleClose",value:function(){var e=this.props.userData.org_name,t=this.timings.key;this.setState(Object(Ce.a)({recipient_location:{},formData:{merchant_name:e,delivery_time:t},recipient_address:"",startDate:new Date},"recipient_location",{zipcode:"",state_code:"",latitude:"",longitude:"",address:""}),function(){this.props.handleClose()})}},{key:"timing",value:function(e,t){for(var a=me()().format("MM/DD/YYYY"),r=me()().unix(),s="",n=me()(a+" "+e,"MM/DD/YYYY H:mm").unix(),o=me()(a+" "+t,"MM/DD/YYYY H:mm").unix(),l=[],i=n;i<o;i+=1800)l.push({t:me()(1e3*i).format("hh:mm A")+"-"+me()(1e3*(i+1800)).format("hh:mm A")}),r>=i&&r<=i+1800&&(s=me()(1e3*i).format("hh:mm A")+"-"+me()(1e3*(i+1800)).format("hh:mm A"));return{data:l,key:s}}},{key:"utc",value:function(e,t,a){var r=me()(e).format("MM/DD/YYYY")+" "+t;return me.a.tz(r,"MM/DD/YYYY hh:mm A",a).utc().unix()}},{key:"handleCreateTask",value:function(e){if(e.preventDefault(),this.validateForm().isError)return!1;var t=Object(m.a)({},this.state.formData),a=t.store,r=(this.props.stores||[]).findIndex(function(e){return e.id===a}),s=this.props.stores[r],n=s.data.timeZone,o=t.delivery_time.split("-"),l=o[0],i=o[1],c=this.utc(t.delivery_date,l,n),d=this.utc(t.delivery_date,i,n),u={storeId:s.data.store_id,merchant:{name:t.merchant_name,phone:t.merchant_phone,location:[s.data.longitude,s.data.latitude],address:{state:s.data.state,postalCode:s.data.postalCode,country:s.data.country,city:s.data.city,street:s.data.street,number:s.data.number},notes:t.merchant_notes},recipient:{email:t.recipient_email,name:t.recipient_name,phone:t.recipient_phone,location:[t.recipient_location.longitude,t.recipient_location.latitude],address:{state:t.recipient_location.state_code,postalCode:t.recipient_location.zipcode,country:t.recipient_location.country,city:t.recipient_location.city,street:t.recipient_location.street,number:t.recipient_location.number},notes:t.recipient_notes},orderNumber:t.orderNumber,store:s.data.store,completeAfter:c,completeBefore:d,timezone:n,alcohol:this.state.alcohol,taskType:this.props.type,metadata:null,signature:!0,tip:t.tip?t.tip:0,sms:{merchantStart:s.data.sms.merchant_start,merchantEta:s.data.sms.merchant_eta,recipientStart:s.data.sms.recipient_start,recipientEta:s.data.sms.recipient_eta}};this.props.createTask(u)}},{key:"validateForm",value:function(){var e=this.state.formData||{},t=Object(m.a)({},this.defaultErrors),a=!1;return e.merchant_name||(t.merchant_name=!0,a=!0),e.merchant_phone&&(10==e.merchant_phone.length||isNaN(e.merchant_phone))||(t.merchant_phone=!0,a=!0),e.orderNumber||(t.orderNumber=!0,a=!0),e.store||(t.store=!0,a=!0),e.merchant_address||(t.merchant_address=!0,a=!0),e.recipient_name||(t.recipient_name=!0,a=!0),e.delivery_date||(t.delivery_date=!0,a=!0),e.delivery_time||(t.delivery_time=!0,a=!0),e.recipient_phone?(10!=e.recipient_phone.length||isNaN(e.recipient_phone))&&(t.recipient_phone=!0,a=!0):(t.recipient_phone=!0,a=!0),(Object(f.isEmpty)(e.recipient_location)||t.recipient_address)&&(t.recipient_address=!0,a=!0),e.tip&&isNaN(e.tip)&&(t.tip=!0,a=!0),{isError:a,errors:t}}},{key:"onChangeHandle",value:function(e){var t=this,a=Object(m.a)({},this.state.formData),r=e.target.name,s=e.target.value;a[r]=s;var n=Object(m.a)({},this.state.errors);n[r]="",this.setState({formData:a,errors:n},function(){"store"===r&&t.selectStore(),"merchant_address"===r&&t.selectMerchantAddress()})}},{key:"render",value:function(){var e=this,t=this.state.show||!1,a=(this.props.locations,this.props.pharmacy,this.props.stores,this.props.locations,this.props.taskType,this.state.formData||{}),r=this.timings&&this.timings.data?this.timings.data:[],n=(this.props.timings&&this.props.timings.key,this.validateForm()),o=n.errors,l=n.isError,i={input:{width:"260px",padding:"0px 15px 0px 35px",color:"#333",margin:"0"},autocompleteContainer:{borderRadius:"0 0 3px 3px",zIndex:"999",background:"url(/static/images/pow_google.jpg) no-repeat right bottom #fff",position:"relative",border:"1px solid #e8e8e8",boxShadow:"1px 5px 10px rgba(68,68,68,0.2)"},autocompleteItem:Object(Ce.a)({textAlign:"left",fontSize:"12px",padding:"5px 8px 5px 30px",lineHeight:"20px",color:"#999",background:"10px 8px #fff",margin:"0",borderTop:"none",borderBottom:"1px solid #ccc"},"background","url(/static/images/location_google.png) no-repeat 10px 8px #fff"),autocompleteItemActive:{color:"#E44500"}};this.state.address&&this.state.address;return s.a.createElement(Ne.a,{size:"lg",className:"c-modal boxmod",show:t,onHide:this.handleClose},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Create Task")),s.a.createElement(Je.a,{autoComplete:"off",onSubmit:this.handleCreateTask},s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12",className:"l_col"},s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Merchant"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"name"},"Name"),a.merchant_name),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"store"},"Store"),s.a.createElement(qe,{stores:this.props.stores,selected:a.store,className:o.store?"error":"",handleStoreChange:this.selectStore})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"address"},"Address"),s.a.createElement(Ze,{locations:this.props.locations,selected:a.merchant_address,className:o.merchant_address?"error":"",handleLocationChange:this.selectMerchantAddress})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"order-number"},"Order Number"),s.a.createElement("input",{type:"text",placeholder:"Enter order number",className:o.orderNumber?"t_box error":"t_box",name:"orderNumber",onChange:this.onChangeHandle,value:a.orderNumber})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"phone"},"Phone"),s.a.createElement("input",{type:"text",placeholder:"Enter phone number",className:o.merchant_phone?"t_box error":"t_box",name:"merchant_phone",onChange:this.onChangeHandle,value:a.merchant_phone}))),s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Delivery"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"delivery"},"Delivery Date"),s.a.createElement(Pe.a,{className:o.delivery_date?"t_box error":"t_box",selected:a.delivery_date,onChange:this.onDateSelect,minDate:new Date,placeholderText:"Today"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"time"},"Time"),s.a.createElement("select",{className:o.delivery_time?"t_box error":"t_box",selected:a.delivery_date,name:"delivery_time",onChange:this.onChangeHandle,value:a.delivery_time},s.a.createElement("option",null,"-- Select --"),(r||[]).map(function(e,t){return s.a.createElement("option",{key:t,value:e.t},e.t)}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"d-notes"},"Driver Notes"),s.a.createElement("input",{type:"text",className:"t_box",name:"merchant_notes",onChange:this.onChangeHandle,value:a.merchant_notes})))),s.a.createElement(Te.a,{md:"6",sm:"12",className:"r_col"},s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Recipient"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"rname"},"Name"),s.a.createElement("input",{type:"text",autoComplete:"off",placeholder:"Enter Name",className:o.recipient_name?"t_box error":"t_box",name:"recipient_name",onChange:this.onChangeHandle,value:a.recipient_name})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"raddress"},"Address"),s.a.createElement(Ae.a,{value:this.state.recipient_address,onChange:this.handleChange,onSelect:this.handleSelect,styles:i},function(e){var t=e.getInputProps,a=e.suggestions,r=e.getSuggestionItemProps,n=e.loading;return s.a.createElement("div",{className:"pRelative error"},s.a.createElement("input",Object.assign({autoComplete:"off"},t({placeholder:"Enter Address",className:o.recipient_address?"t_box error":"t_box"}))),s.a.createElement("div",{className:"autocomplete-dropdown-container"},n&&s.a.createElement("div",null,"Loading..."),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return s.a.createElement("div",r(e,{className:t,style:a}),s.a.createElement("span",null,e.description))})))})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"rphone"},"Phone"),s.a.createElement("input",{type:"text",placeholder:"Enter phone number",className:o.recipient_phone?"t_box error":"t_box",name:"recipient_phone",onChange:this.onChangeHandle,value:a.recipient_phone})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"remail"},"Email"),s.a.createElement("input",{type:"email",placeholder:"Enter email",className:"t_box",name:"recipient_email",onChange:this.onChangeHandle,value:a.recipient_email})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"notes"},"Add notes"),s.a.createElement("input",{type:"text",className:"t_box",name:"recipient_notes",onChange:this.onChangeHandle,value:a.recipient_notes})),s.a.createElement("div",{className:"form-group"},s.a.createElement("span",{className:"c_boxgroup"},s.a.createElement("label",{htmlFor:"alcohol"},"Alcohol"),s.a.createElement("input",{type:"checkbox",id:"alcohol",name:"alcohol",className:"c_box",checked:this.state.alcohol,onChange:function(t){return e.handleCbox(t)}})))),s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Optional"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"tip"},"Tip"),s.a.createElement("input",{type:"text",placeholder:"0.00",className:o.tip?"t_box error":"t_box",name:"tip",onChange:this.onChangeHandle,value:a.tip})))))),s.a.createElement(Ne.a.Footer,null,s.a.createElement(xe.a,{type:"submit",disabled:l||!!this.props.isTaskProcessing,className:this.props.isTaskProcessing||l?"":"active",variant:"primary"},this.props.isTaskProcessing?"Processing..":"Submit"))))}}]),t}(r.Component),Qe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).hideContextMenu=function(){a.setState({visible:!1,x:0,y:0})},a.handleChange=function(e){a.setState({search:Object(m.a)({},a.state.search,{merchant_address:e})})},a.handleSelect=function(e){var t=Object(Q.a)(Object(Q.a)(a)),r={zipcode:"",state_code:"",latitude:"",longitude:"",address:""};Object(Le.geocodeByAddress)(e).then(function(e){return r.address=e[0].formatted_address||"",Object(Le.getLatLng)(e[0])}).then(function(e){e.lat,e.lng;if(/(\d+) (.+?), (.+?), (.+?) ([0-9]{5})/g.test(r.address)){a.props.deliveryAddress;var s=be(r.address);if(!Object(f.isEmpty)(s)&&s.validAdrs){var n=s.formattedAddress||"";t.setState({search:Object(m.a)({},a.state.search,{merchant_address:n})},function(){t.props.searchFilter({type:t.state.search.type,value:n,user_type:this.props.userType})})}else Oe("Oops, that does not seem like a valid address. Please try again."),t.setState({recipient_address:""})}}).catch(function(e){console.log("Error",e)})},a.handleRecipientChange=function(e){a.setState({search:Object(m.a)({},a.state.search,{recipient_address:e})})},a.handleRecipientSelect=function(e){var t=Object(Q.a)(Object(Q.a)(a)),r={zipcode:"",state_code:"",latitude:"",longitude:"",address:""};Object(Le.geocodeByAddress)(e).then(function(e){return r.address=e[0].formatted_address||"",Object(Le.getLatLng)(e[0])}).then(function(e){e.lat,e.lng;if(/(\d+) (.+?), (.+?), (.+?) ([0-9]{5})/g.test(r.address)){a.props.deliveryAddress;var s=be(r.address);if(!Object(f.isEmpty)(s)&&s.validAdrs){var n=s.formattedAddress||"";t.setState({search:Object(m.a)({},a.state.search,{recipient_address:n})},function(){t.props.searchFilter({type:t.state.search.type,value:n,user_type:this.props.userType})})}else Oe("Oops, that does not seem like a valid address. Please try again."),t.setState({recipient_address:""})}}).catch(function(e){console.log("Error",e)})},a.state={x:"",y:"",typeOpen:!1,search:{text:"",merchant_address:"",recipient_address:"",start_time:"",end_time:"",type:"order-number",label:"Order Number"},filteredList:{}},a.timings=[],a.changeSearchType=a.changeSearchType.bind(Object(Q.a)(Object(Q.a)(a))),a.handleChange=a.handleChange.bind(Object(Q.a)(Object(Q.a)(a))),a.handleSelect=a.handleSelect.bind(Object(Q.a)(Object(Q.a)(a))),a.handleRecipientChange=a.handleRecipientChange.bind(Object(Q.a)(Object(Q.a)(a))),a.handleRecipientSelect=a.handleRecipientSelect.bind(Object(Q.a)(Object(Q.a)(a))),a.onSearchDelTime=a.onSearchDelTime.bind(Object(Q.a)(Object(Q.a)(a))),a.resetSearch=a.resetSearch.bind(Object(Q.a)(Object(Q.a)(a))),a.handleSearch=a.handleSearch.bind(Object(Q.a)(Object(Q.a)(a))),a.handleSelectbox=a.handleSelectbox.bind(Object(Q.a)(Object(Q.a)(a))),a.collapse=a.collapse.bind(Object(Q.a)(Object(Q.a)(a))),a.handleContextMenu=a.handleContextMenu.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.timings=e.timings||{},this.setState({filteredList:e.filteredList})}},{key:"handleContextMenu",value:function(e,t){e.preventDefault();var a=e.pageX,r=e.pageY,s=document.getElementById("sideBar"),n=0;s.offsetLeft>=0&&(n=s.clientWidth),this.setState({visible:!0,x:a-n,y:r-250,selOrder:Object(m.a)({},t)})}},{key:"collapse",value:function(e){this.setState({typeOpen:!1})}},{key:"handleSelectbox",value:function(e){this.setState(Object(Ce.a)({},e,!this.state[e]))}},{key:"changeSearchType",value:function(e){this.setState({search:Object(m.a)({},this.state.search,{type:e.type,label:e.label,text:"",typeOpen:!1})})}},{key:"handleSearch",value:function(e){var t=e.target.value;this.setState({search:Object(m.a)({},this.state.search,{text:e.target.value})},function(){t.length>1?this.props.searchFilter({type:this.state.search.type,value:t,user_type:this.props.userType}):this.setState({filteredList:{}})})}},{key:"onSearchDelTime",value:function(e,t){var a=this,r="",s="";"start"===t&&(r=e.target.value||"",s=this.state.search.end_time||""),"end"===t&&(s=e.target.value||"",r=this.state.search.start_time||""),this.setState({search:Object(m.a)({},this.state.search,{start_time:r,end_time:s})},function(){r&&s&&a.props.searchFilter({type:r,value:s,user_type:this.props.userType})})}},{key:"resetSearch",value:function(){var e=this;this.setState({search:{text:"",merchant_address:"",recipient_address:"",delivery_time:"",start_date:"",end_date:"",type:"order-number",label:"Order Number"},filteredList:{}},function(){e.props.resetSearch()})}},{key:"componentWillUnmount",value:function(){this.props.resetSearch()}},{key:"render",value:function(){var e=this,t=this.timings&&this.timings.from?this.timings.from:[],a=this.timings&&this.timings.to?this.timings.to:[],r=this.state.filteredList||{},n={},o=0;Object(f.isEmpty)(r)||(n=r.tasks||{},o=r.count||0);var l={input:{width:"260px",padding:"0px 15px 0px 35px",color:"#333",margin:"0"},autocompleteContainer:{borderRadius:"0 0 3px 3px",zIndex:"999",background:"url(/static/images/pow_google.jpg) no-repeat right bottom #fff",position:"relative",border:"1px solid #e8e8e8",boxShadow:"1px 5px 10px rgba(68,68,68,0.2)"},autocompleteItem:Object(Ce.a)({textAlign:"left",fontSize:"12px",padding:"5px 8px 5px 30px",lineHeight:"20px",color:"#999",background:"10px 8px #fff",margin:"0",borderTop:"none",borderBottom:"1px solid #ccc"},"background","url(/static/images/location_google.png) no-repeat 10px 8px #fff"),autocompleteItemActive:{color:"#E44500"}},i=function(e){var t=e.getInputProps,a=e.suggestions,r=e.getSuggestionItemProps,n=e.loading;return s.a.createElement("div",null,s.a.createElement("input",t({placeholder:"Enter Address",className:"t_box"})),s.a.createElement("div",{className:"autocomplete-dropdown-container"},n&&s.a.createElement("div",null,"Loading..."),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return s.a.createElement("div",r(e,{className:t,style:a}),s.a.createElement("span",{data:"autosuggest"},e.description))})))};return s.a.createElement("div",{className:"searchMod_sec".concat(this.props.showSearch?"":" hide")},s.a.createElement("div",{className:"s_bar"},s.a.createElement("label",null,"Search by:"),s.a.createElement(Je.a,{method:"get",action:"",autoComplete:"off"},s.a.createElement("div",{className:"select-box ".concat(this.state.typeOpen?" sopen":" "),onBlur:function(){return e.collapse("typeOpen")}},s.a.createElement("div",{className:"s-result",onClick:function(){return e.handleSelectbox("typeOpen")}},s.a.createElement("input",{type:"text",autoComplete:"off",readOnly:!0,value:this.state.search.label,name:"searchType"})),s.a.createElement("ul",{className:"selectchild"},s.a.createElement("li",{onClick:function(){return e.changeSearchType({type:"order-number",label:"Order Number"})}},"Order Number"),"All Tasks"!==this.props.section?s.a.createElement("li",{onClick:function(){return e.changeSearchType({type:"delivery-window",label:"Delivery Window"})}},"Delivery Window"):null,s.a.createElement("li",{onClick:function(){return e.changeSearchType({type:"merchant-address",label:"Merchant Address"})}},"Merchant Address"),s.a.createElement("li",{onClick:function(){return e.changeSearchType({type:"recipient-address",label:"Recipient Address"})}},"Recipient Address"),s.a.createElement("li",{onClick:function(){return e.changeSearchType({type:"driver",label:"Driver"})}},"Driver"))),s.a.createElement("div",{className:"resboxwrap"},s.a.createElement("div",{className:"search_box"},["order-number","driver"].includes(this.state.search.type)?s.a.createElement("input",{type:"text",autoComplete:"off",placeholder:"Search",name:"searchTxt",value:this.state.search.text,onChange:this.handleSearch}):null,"delivery-window"===this.state.search.type?s.a.createElement("div",{className:"d_window"},s.a.createElement("select",{className:"sdate",name:"start_time",onChange:function(t){return e.onSearchDelTime(t,"start")},value:this.state.search.start_time},s.a.createElement("option",null,"-- Select --"),(t||[]).map(function(e,t){return s.a.createElement("option",{key:t,value:e.value},e.label)})),s.a.createElement("span",null,"to"),s.a.createElement("select",{className:"edate",name:"end_time",onChange:function(t){return e.onSearchDelTime(t,"end")},value:this.state.search.end_time},s.a.createElement("option",null,"-- Select --"),(a||[]).map(function(e,t){return s.a.createElement("option",{key:t,value:e.value},e.label)}))):null,"merchant-address"===this.state.search.type?s.a.createElement(Ae.a,{value:this.state.search.merchant_address,onChange:this.handleChange,onSelect:this.handleSelect,styles:l},i):null,"recipient-address"===this.state.search.type?s.a.createElement(Ae.a,{value:this.state.search.recipient_address,onChange:this.handleRecipientChange,onSelect:this.handleRecipientSelect,styles:l},i):null),s.a.createElement("button",{onClick:this.resetSearch,className:"reset_btn",type:"reset"},"Reset")))),s.a.createElement("div",{className:"s_result"},s.a.createElement(je,{visible:this.state.visible,x:this.state.x,y:this.state.y,selOrder:this.state.selOrder,openEditWindow:this.props.openEditWindow,openDetailsWindow:this.props.openDetailsWindow,openMapWindow:this.props.openMapWindow,deleteTask:this.props.deleteTask,updateTask:this.props.updateTask,hideContextMenu:this.hideContextMenu}),o>0?s.a.createElement("div",null,Object(f.isEmpty)(n)?null:Object.keys(n||{}).map(function(t,a){var r=n[t]||[];return s.a.createElement("section",{key:a,className:"t_content"},s.a.createElement("h3",{className:"title"},t),r.map(function(t,a){var r=t.orders||[];return s.a.createElement("div",{key:a,className:"table_sec"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"7",className:"t-titel"},t.name)),s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Delivery Window"),s.a.createElement("th",null,"Merchant Address"),s.a.createElement("th",null,"Recipient Address"),s.a.createElement("th",null,"Driver"),s.a.createElement("th",null,"Task Status"),s.a.createElement("th",null))),s.a.createElement("tbody",null,r.map(function(t,a){var r=ge(t.tsk_status),n="".concat(t.mrchnt_address.number," ").concat(t.mrchnt_address.street,", ").concat(t.mrchnt_address.city),o="".concat(t.recpnt_address.number," ").concat(t.recpnt_address.street,", ").concat(t.recpnt_address.city);return s.a.createElement("tr",{key:a,onContextMenu:function(a){return e.handleContextMenu(a,{order_number:t.order_number,order_id:t.id,order_uuid:t.uuid,tsk_status:t.tsk_status,mrchnt_address:n,recpnt_address:o})}},s.a.createElement("td",null,t.order_number),s.a.createElement("td",null,t.complete_after," - ",t.complete_before),s.a.createElement("td",{className:"acell"},s.a.createElement("label",null,n),s.a.createElement("span",{className:"tTip"},n)),s.a.createElement("td",{className:"acell"},s.a.createElement("label",null,o),s.a.createElement("span",{className:"tTip"},o)),s.a.createElement("td",null,t.driver_name),s.a.createElement("td",null,s.a.createElement("span",{className:r},t.tsk_status)),s.a.createElement("td",null,t.track_driver&&"Completed"!==t.tsk_status?s.a.createElement("a",{onClick:function(a){return e.props.openTrackWindow(a,{current_url:t.current_url,track_driver:t.track_driver})}},t.track_driver):null))}))))}))}),"              ",s.a.createElement("div",{className:"resultCount"},o," SEARCH RESULT(S)"),s.a.createElement("div",{className:"t_result"})):s.a.createElement("div",{className:"noresult"},"Type to search and relevant results will appear")))}}]),t}(r.Component),et=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleStateChange=function(e,t){a.setState({stateTxt:""},function(){a.dropdownInput.current.focus()}),a.props.handleStateChange(e,t)},a.onChangeHandle=function(e){var t,r=e.target.name,s=e.target.value;a.setState((t={},Object(Ce.a)(t,r,s),Object(Ce.a)(t,"sOpen",!0),t))},a.handleClick=function(e){e.stopPropagation(),a.nodeState.contains(e.target)||"ignore-outer-click"===e.target.getAttribute("data")||a.state.sOpen&&a.setState({sOpen:!1,stateTxt:""})},a.handleSelectbox=function(){a.setState({sOpen:!a.state.sOpen})},a.state={stateTxt:"",sOpen:!1},a.dropdownInput=s.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=this,t=JSON.parse(localStorage.getItem("states")||"[]").map(function(e){return{label:e.value,value:e.id}}),a=Object(f.sortBy)(t,"value"),r=this.props.stateFilter||[];return s.a.createElement("div",{ref:function(t){return e.nodeState=t},className:"select-box".concat(this.state.sOpen?" sopen":" ")},s.a.createElement("div",{className:"s-result",onClick:this.handleSelectbox},s.a.createElement("input",{type:"text",ref:this.dropdownInput,autoComplete:"text",placeholder:"State",name:"stateTxt",value:this.state.stateTxt,onChange:this.onChangeHandle})),s.a.createElement("ul",{className:r.length>0?"selected":""},(a||[]).map(function(t,a){var n=r.indexOf(t.label);return t.label.toLowerCase().includes(e.state.stateTxt.toLowerCase())?n>-1?s.a.createElement("li",{key:a,data:"ignore-outer-click",onClick:function(t){return e.props.handleRemoveFilter(t,"State",n)},className:"selected"},t.label):s.a.createElement("li",{key:a,data:"ignore-outer-click",onClick:function(a){return e.handleStateChange(a,Object(m.a)({},t))}},t.label):null})))}}]),t}(r.Component),tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleAreaChange=function(e,t){a.setState({areaTxt:""},function(){a.dropdownInput.current.focus()}),a.props.handleAreaChange(e,t)},a.onChangeHandle=function(e){var t,r=e.target.name,s=e.target.value;a.setState((t={},Object(Ce.a)(t,r,s),Object(Ce.a)(t,"aOpen",!0),t))},a.handleClick=function(e){e.stopPropagation(),a.nodeArea.contains(e.target)||"ignore-outer-click"===e.target.getAttribute("data")||a.state.aOpen&&a.setState({aOpen:!1,areaTxt:""})},a.handleSelectbox=function(){0!==a.props.states.length&&a.setState({aOpen:!a.state.aOpen})},a.state={areaTxt:"",aOpen:!1},a.dropdownInput=s.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=this,t=this.props.area.map(function(e){return e.value}),a=this.props.zones||{},r=(this.props.stateCodeFilter||[]).map(function(e){return{state:e,zones:a[e]}}),n=Object(f.sortBy)(r,"state");return s.a.createElement("div",{ref:function(t){return e.nodeArea=t},className:"select-box".concat(this.state.aOpen?" sopen":" "),onClick:this.handleSelectbox},s.a.createElement("div",{className:"s-result ".concat(0===this.props.states.length?"dis":" ")},s.a.createElement("input",{type:"text",ref:this.dropdownInput,autoComplete:"off",disabled:0===this.props.states.length,placeholder:"Area",name:"areaTxt",value:this.state.areaTxt,onChange:this.onChangeHandle})),s.a.createElement("ul",{className:t.length>0?"selected":""},(n||[]).map(function(a,r){var n=a.zones||[];return(n=Object(f.sortBy)(n,"delivery_zone_name")).map(function(r,n){var o=t.indexOf(r.delivery_zone_name);return r.delivery_zone_name.toLowerCase().includes(e.state.areaTxt.toLowerCase())?o>-1?s.a.createElement("li",{key:n,data:"ignore-outer-click",onClick:function(t){return e.props.handleRemoveFilter(t,"Area",o)},className:"selected"},r.delivery_zone_name," (",a.state,")"):s.a.createElement("li",{key:n,data:"ignore-outer-click",onClick:function(t){return e.handleAreaChange(t,Object(m.a)({},r,{state:a.state}))}},r.delivery_zone_name," (",a.state,")"):null})})))}}]),t}(r.Component),at=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleStoreChange=function(e,t){a.setState({storeTxt:""},function(){a.dropdownInput.current.focus()}),a.props.handleStoreChange(e,t)},a.handleClick=function(e){e.stopPropagation(),a.nodeStore.contains(e.target)||"ignore-outer-click"===e.target.getAttribute("data")||a.state.stOpen&&a.setState({stOpen:!1,storeTxt:""})},a.handleSelectbox=function(){0!==a.props.area.length&&(a.setState({stOpen:!a.state.stOpen}),a.onChangeHandle=a.onChangeHandle.bind(Object(Q.a)(Object(Q.a)(a))))},a.state={storeTxt:"",stOpen:!1},a.dropdownInput=s.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onChangeHandle",value:function(e){var t,a=e.target.name,r=e.target.value;this.setState((t={},Object(Ce.a)(t,a,r),Object(Ce.a)(t,"stOpen",!0),t))}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=this,t=this.props.store.map(function(e){return e.label}),a=this.props.stores||[],r=this.props.area||[],n=r.length>0?r.map(function(e){return e.id.toString()}):[],o=Object(f.sortBy)(a,"label");return s.a.createElement("div",{ref:function(t){return e.nodeStore=t},className:"select-box".concat(this.state.stOpen?" sopen":" "),onClick:this.handleSelectbox},s.a.createElement("div",{className:"s-result ".concat(0===this.props.area.length?"dis":" ")},s.a.createElement("input",{type:"text",ref:this.dropdownInput,autoComplete:"off",disabled:0===this.props.area.length,placeholder:"Store",name:"storeTxt",value:this.state.storeTxt,onChange:this.onChangeHandle})),s.a.createElement("ul",{className:t.length>0?"selected":""},o.map(function(a,r){var o=a.zone_id?n.includes(a.zone_id.toString()):"",l=t.indexOf(a.label);return a.zone_id&&o&&a.label.toLowerCase().includes(e.state.storeTxt.toLowerCase())?l>-1?s.a.createElement("li",{key:r,data:"ignore-outer-click",onClick:function(t){return e.props.handleRemoveFilter(t,"Store",l)},className:"selected"},a.label):s.a.createElement("li",{key:r,data:"ignore-outer-click",onClick:function(t){return e.handleStoreChange(t,Object(m.a)({},a))}},a.label):null})))}}]),t}(r.Component),rt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).getShoppedLate=function(){a.setIntervalSummary(),a.props.getShoppedLate()},a.setIntervalSummary=function(){a.interval&&clearInterval(a.interval),a.interval=setInterval(function(){a.props.getShoppedLate()},6e5)},a.handleClick=function(e){e.stopPropagation(),a.nodeSearch.contains(e.target)||a.nodeSrchButton.contains(e.target)||a.nodeResSrchButton.contains(e.target)||"autosuggest"===e.target.getAttribute("data")||"ignore-outer-click"===e.target.getAttribute("data")||e.target.getAttribute("aria-hidden")||a.state.editShow||a.state.showSearch&&a.setState({showSearch:!1})},a.handleStateChange=function(e,t){e.stopPropagation();var r=a.state.filterKeys||{};-1===r.State.findIndex(function(e){return e.value===t.value})&&r.State.push({label:t.label,value:t.value}),r.State=Object(f.sortBy)(r.State,"value"),0===r.State.length&&(r.Store=[],r.Area=[]),a.setState({filterKeys:r},function(){a.handleUpdateFilter()})},a.handleAreaChange=function(e,t){e.stopPropagation();var r=a.state.filterKeys||{};-1===r.Area.findIndex(function(e){return e.value===t.delivery_zone_name})&&r.Area.push({label:"".concat(t.delivery_zone_name," (").concat(t.state,")"),value:t.delivery_zone_name,state:t.state,id:t.id}),r.Area=Object(f.sortBy)(r.Area,"value"),0===r.Area.length&&(r.Store=[]),a.setState({filterKeys:r},function(){a.handleUpdateFilter()})},a.handleStoreChange=function(e,t){e.stopPropagation();var r=a.state.filterKeys||{};-1===r.Store.findIndex(function(e){return e.value===t.label})&&r.Store.push({id:t.data.id,store_id:t.data.store_id,label:t.label,value:t.label}),r.Store=Object(f.sortBy)(r.Store,"value"),a.setState({filterKeys:r},function(){a.handleUpdateFilter()})},a.handleRemoveFilter=function(e,t,r){e.stopPropagation();var s=a.state.filterKeys||[];if("State"===t){var n=s[t][r].value;Object(f.remove)(s.Area,function(e){return e.state===n})}s[t].splice(r,1);var o="State"!==t?a.state.selectedState:null,l="Area"!==t?a.state.selectedArea:null,i="Store"!==t?a.state.selectedStore:null;0===s.State.length&&(s.Store=[],s.Area=[]),0===s.Area.length&&(s.Store=[]),a.setState({filterKeys:s,selectedState:o,selectedArea:l,selectedStore:i},function(){a.handleUpdateFilter()})},a.handleUpdateFilter=function(){a.props.updateFilter({user_type:a.props.userType,type:a.state.type,filterKeys:a.state.filterKeys||{}})},a.state={editShow:!1,detailsShow:!1,mapShow:!1,trackShow:!1,visible:!1,show:!1,selectedState:null,selectedArea:null,selectedStore:null,filterKeys:{State:[],Area:[],Store:[]},showSearch:!1,showFilter:!1,filteredList:{}},a.interval=null,a.timings=[],a.handleShow=a.handleShow.bind(Object(Q.a)(Object(Q.a)(a))),a.handleSearchClose=a.handleSearchClose.bind(Object(Q.a)(Object(Q.a)(a))),a.handleRemoveFilter=a.handleRemoveFilter.bind(Object(Q.a)(Object(Q.a)(a))),a.onChangeHandle=a.onChangeHandle.bind(Object(Q.a)(Object(Q.a)(a))),a.toggleCustomSearch=a.toggleCustomSearch.bind(Object(Q.a)(Object(Q.a)(a))),a.toggleResFilter=a.toggleResFilter.bind(Object(Q.a)(Object(Q.a)(a))),a.openEditWindow=a.openEditWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.openDetailsWindow=a.openDetailsWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.openMapWindow=a.openMapWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.openTrackWindow=a.openTrackWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.deleteTask=a.deleteTask.bind(Object(Q.a)(Object(Q.a)(a))),a.updateTask=a.updateTask.bind(Object(Q.a)(Object(Q.a)(a))),a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"openEditWindow",value:function(e,t,a){this.props.getTaskDetails({uuid:e}),this.setState({editShow:!0,mrchnt_address:t,recpnt_address:a})}},{key:"openDetailsWindow",value:function(e){this.props.getTaskDetails({uuid:e}),this.setState({detailsShow:!0})}},{key:"openMapWindow",value:function(e){this.props.getTaskDetails({uuid:e}),this.setState({mapShow:!0})}},{key:"openTrackWindow",value:function(e,t){e.stopPropagation(),this.setState({trackShow:!0,currentUrl:t.current_url,trackDriver:t.track_driver})}},{key:"updateTask",value:function(e,t){window.confirm("Do you really want to update status of this task?")&&this.props.updateTaskStatus({uuid:e,status:t})}},{key:"deleteTask",value:function(e){window.confirm("Do you really want to delete this task?")&&this.props.deleteTask({uuid:e})}},{key:"handleClose",value:function(){this.setState({visible:!1,show:!1,editShow:!1,mapShow:!1,detailsShow:!1,trackShow:!1})}},{key:"toggleCustomSearch",value:function(){this.setState({showFilter:!1,showSearch:!this.state.showSearch,sOpen:!1,aOpen:!1,stOpen:!1})}},{key:"toggleResFilter",value:function(){this.setState({showSearch:!1,showFilter:!this.state.showFilter})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleSearchClose",value:function(){this.setState({show:!1},function(){})}},{key:"timing",value:function(e,t){for(var a=me()().format("MM/DD/YYYY"),r=me()().unix(),s="",n=me()(a+" "+e,"MM/DD/YYYY H:mm").unix(),o=me()(a+" "+t,"MM/DD/YYYY H:mm").unix(),l=[],i=[],c=n;c<o;c+=1800)l.push({label:me()(1e3*c).format("hh:mm A"),value:me()(1e3*c).format("HH:mm:ss")}),i.push({label:me()(1e3*(c+1800)).format("hh:mm A"),value:me()(1e3*(c+1800)).format("HH:mm:ss")}),r>=c&&r<=c+1800&&(s=me()(1e3*c).format("hh:mm A")+"-"+me()(1e3*(c+1800)).format("hh:mm A"));return{from:l,to:i,key:s}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.filterData;if(Object(f.isEmpty)(t)||t.user_type!==this.props.userType){var a="admin"===this.props.userType?"general":this.props.userType;this.setState({type:a},function(){e.handleUpdateFilter(),e.getShoppedLate()})}else this.setState({filterKeys:t.filterKeys,type:t.type},function(){e.getShoppedLate()});this.timings=this.timing(this.props.settingsData.start_time,this.props.settingsData.end_time),document.addEventListener("click",this.handleClick,!1)}},{key:"handleTypeChange",value:function(e){var t=this;this.setState({type:e},function(){t.handleUpdateFilter()})}},{key:"onChangeHandle",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(Ce.a)({},t,a),function(){})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(Object(f.isEqual)(this.props.filterData,e.filterData))this.setState({filteredList:e.filteredList});else{var a=e.filterData;if(Object(f.isEmpty)(a)||a.user_type!==e.userType){var r="admin"===e.userType?"general":e.userType;this.setState({type:r,filteredList:e.filteredList},function(){t.handleUpdateFilter()})}else this.setState({filterKeys:a.filterKeys,type:a.type,filteredList:e.filteredList},function(){})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick),clearInterval(this.interval)}},{key:"render",value:function(){var e,t=this,a=(this.props.stores,this.props.locations,this.props.zones||{}),r=(JSON.parse(localStorage.getItem("states")||"[]").map(function(e){return{label:e.value,value:e.id}}),[]),n=[];this.state.filterKeys.State.forEach(function(e){r.push(e.label),n.push(e.value)});this.state.filterKeys.Area.map(function(e){return e.value}),this.state.filterKeys.Store.map(function(e){return e.label}),n.map(function(e){return{state:e,zones:a[e]}});return s.a.createElement("div",null,s.a.createElement("section",{className:"con_top"},s.a.createElement("div",{className:"tab_pan-wrap"},s.a.createElement("div",{className:"tab_pan"},s.a.createElement("span",{onClick:function(){return t.handleTypeChange("general")},className:"general"===this.state.type?" active":""},"Grocery"),s.a.createElement("span",{onClick:function(){return t.handleTypeChange("pharmacy")},className:"pharmacy"===this.state.type?" active":""},"Rx"))),s.a.createElement("div",{className:"res_btn"},s.a.createElement("div",{className:"resfilter_btn ".concat(this.state.showFilter?"showfilter":""," "),onClick:this.toggleResFilter},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Filter"),s.a.createElement("div",{ref:function(e){return t.nodeResSrchButton=e},className:"searchmod_btn ".concat(this.state.showSearch?"showpoint":""," "),onClick:this.toggleCustomSearch},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Search")),s.a.createElement(Je.a,{method:"get",action:"",autoComplete:"off",className:"resfilter_box ".concat(this.state.showFilter?"showfilterbox":"")},s.a.createElement("div",{className:"filter_label"},"Filter by: "),s.a.createElement(et,{stateFilter:r,states:this.state.filterKeys.State,handleStateChange:this.handleStateChange,handleRemoveFilter:this.handleRemoveFilter}),s.a.createElement(tt,{area:this.state.filterKeys.Area,states:this.state.filterKeys.State,zones:this.props.zones,stateCodeFilter:n,handleAreaChange:this.handleAreaChange,handleRemoveFilter:this.handleRemoveFilter}),s.a.createElement(at,{store:this.state.filterKeys.Store,area:this.state.filterKeys.Area,stores:this.props.stores,handleStoreChange:this.handleStoreChange,handleRemoveFilter:this.handleRemoveFilter})),s.a.createElement("div",{className:"search_sec"},s.a.createElement("div",{ref:function(e){return t.nodeSrchButton=e},className:"searchmod_btn ".concat(this.state.showSearch?"showpoint":""," "),onClick:this.toggleCustomSearch},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Search"),s.a.createElement("button",{type:"button",onClick:this.handleShow,className:"btn btn_blue"},"Create Task ",s.a.createElement("img",{src:"/assets/plus.svg",alt:""})))),""!==this.props.liveOrderCount?s.a.createElement("div",{className:"liveOrders"},this.props.liveOrderCount," ",this.props.liveOrderCount<=1?"Live Order":"Live Orders"):null,this.state.filterKeys.State.length>0||this.state.filterKeys.Area.length>0||this.state.filterKeys.Store.length>0?s.a.createElement("section",{className:"filter-tag_section"},this.state.filterKeys.State.length>0?this.state.filterKeys.State.map(function(e,a){return s.a.createElement("span",{key:a,className:"f-tag"},e.label,s.a.createElement("a",{onClick:function(e){return t.handleRemoveFilter(e,"State",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null,this.state.filterKeys.Area.length>0?this.state.filterKeys.Area.map(function(e,a){return s.a.createElement("span",{key:a,className:"f-tag"},e.label,s.a.createElement("a",{onClick:function(e){return t.handleRemoveFilter(e,"Area",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null,this.state.filterKeys.Store.length>0?this.state.filterKeys.Store.map(function(e,a){return s.a.createElement("span",{key:a,className:"f-tag"},e.label,s.a.createElement("a",{onClick:function(e){return t.handleRemoveFilter(e,"Store",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null):null,s.a.createElement("div",{ref:function(e){return t.nodeSearch=e}},s.a.createElement(Qe,(e={filteredList:this.state.filteredList,settingsData:this.props.settingsData,timings:this.timings,searchFilter:this.props.searchFilter,resetSearch:this.props.resetSearch,showSearch:this.state.showSearch,getTaskDetails:this.props.getTaskDetails,taskDetails:this.props.taskDetails,deleteTask:this.props.deleteTask,updateTaskStatus:this.props.updateTaskStatus,editTask:this.props.editTask,getTrackDetails:this.props.getTrackDetails,openEditWindow:this.openEditWindow,openDetailsWindow:this.openDetailsWindow,openMapWindow:this.openMapWindow},Object(Ce.a)(e,"deleteTask",this.deleteTask),Object(Ce.a)(e,"updateTask",this.updateTask),Object(Ce.a)(e,"openTrackWindow",this.openTrackWindow),Object(Ce.a)(e,"section","Dashboard"),Object(Ce.a)(e,"userType",this.state.type),e))),s.a.createElement($e,{type:this.state.type,show:this.state.show,handleClose:this.handleClose,getLocations:this.props.getLocations,taskType:this.props.taskType,stores:this.props.stores,locations:this.props.locations,pharmacy:this.props.pharmacy,timings:this.props.timings,userData:this.props.userData,settingsData:this.props.settingsData,createTask:this.props.createTask,isTaskProcessing:this.props.isTaskProcessing}),this.state.editShow?s.a.createElement(Me,{taskDetails:this.props.taskDetails,show:this.state.editShow,timings:this.props.timings,settingsData:this.props.settingsData,editTask:this.props.editTask,mrchnt_address:this.state.mrchnt_address,recpnt_address:this.state.recpnt_address,handleClose:this.handleClose}):null,s.a.createElement(He,{show:this.state.trackShow,currentUrl:this.state.currentUrl,trackDriver:this.state.trackDriver,handleClose:this.handleClose}),this.state.detailsShow?s.a.createElement(Ie,{show:this.state.detailsShow,taskDetails:this.props.taskDetails,handleClose:this.handleClose}):null,this.state.mapShow?s.a.createElement(Be,{show:this.state.mapShow,taskDetails:this.props.taskDetails,handleClose:this.handleClose}):null)}}]),t}(r.Component),st=Object(h.h)(rt),nt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).updateFilter=function(e){a.setState({filterData:Object(m.a)({},e)}),a.props.updateFilter(Object(m.a)({},e))},a.updateTotalCount=function(e){a.setState({liveOrderCount:e})},a.getShoppedLate=function(){var e=a.state.filterData||{},t=e.filterKeys||{},r="admin"===a.props.userType?"general":a.props.userType,s={};if(!Object(f.isEmpty)(t)){if(0===t.Store.length&&0===t.Area.length&&t.State.length>0){var n=(t.State||[]).map(function(e){return e.value});n.length>0&&(s={type:"state",state:n})}if(0===t.Store.length&&t.Area.length>0){var o=[];(t.Area||[]).map(function(e){var t=o.findIndex(function(t){return t.state===e.state});t>-1?o[t].zone_id.push(e.id):o.push({state:e.state,zone_id:[e.id]})}),o.length>0&&(s={type:"place",place:o})}if(t.Store.length>0){var l=[];(t.Store||[]).forEach(function(e){l.push(e.store_id.toString())}),l.length>0&&(s={type:"store",store_id:l})}s.user_type=e.type||r,s.type||(s.type="default"),a.props.getShoppedLate(s)}},a.state={org_id:a.props.userData?a.props.userData.org_id:"",searchTxt:"",sOpen:!1,selOrder:{},liveOrderCount:"",filterData:{}},a.timings=[],a.searchFilter=a.searchFilter.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"searchFilter",value:function(e){this.props.search(Object(m.a)({},e))}},{key:"componentDidMount",value:function(){this.setState({filterData:this.props.filterData.dashboard||{}})}},{key:"componentWillReceiveProps",value:function(e){this.setState({filterData:e.filterData.dashboard||{}})}},{key:"render",value:function(){var e=this.props.locations||{},t=!!e.pharmacy&&e.pharmacy,a=e.stores||[],r=e.locations||[],n=e.taskType||"",o=e.zones||{},l=this.props.userType||{},i=this.state.filterData,c="",d={};return Object(f.isEmpty)(i)||(c=i.type,d=i.filterKeys),s.a.createElement("main",{className:"dash right_sec".concat("admin"!==l?" noAdmin":"")},Object(f.isEmpty)(this.props.settingsData)?null:s.a.createElement(st,{liveOrderCount:this.state.liveOrderCount,filterData:i,userType:l,stores:a,zones:o,searchFilter:this.searchFilter,resetSearch:this.props.resetSearch,getLocations:this.props.getLocations,taskType:n,locations:r,pharmacy:t,timings:this.timings,userData:this.props.userData,settingsData:this.props.settingsData,createTask:this.props.createTask,filteredList:this.props.filteredList,getTaskDetails:this.props.getTaskDetails,taskDetails:this.props.taskDetails,deleteTask:this.props.deleteTask,updateTaskStatus:this.props.updateTaskStatus,editTask:this.props.editTask,getTrackDetails:this.props.getTrackDetails,isTaskProcessing:this.props.isTaskProcessing,updateFilter:this.updateFilter,getShoppedLate:this.getShoppedLate}),s.a.createElement("div",null,Object(f.isEmpty)(i)||Object(f.isEmpty)(this.props.settingsData)?null:s.a.createElement(Xe,{updateTotalCount:this.updateTotalCount,type:c,org_id:this.state.org_id,statefilter:d.State,areafilter:d.Area,storefilter:d.Store,searchTxt:this.state.searchTxt,taskType:n,stores:a,locations:r,pharmacy:t,timings:this.timings,getTaskDetails:this.props.getTaskDetails,taskDetails:this.props.taskDetails,deleteTask:this.props.deleteTask,updateTaskStatus:this.props.updateTaskStatus,editTask:this.props.editTask,settingsData:this.props.settingsData,getTrackDetails:this.props.getTrackDetails,shoppedLate:this.props.shoppedLate})))}}]),t}(r.Component);nt.defaultProps={userData:{}};var ot=Object(h.h)(nt),lt=Object(b.b)(function(e,t){var a=e.dashboardReducer,r=e.headerReducer;return{userData:t.userData,isTaskProcessing:a.isTaskProcessing,locations:a.locations,userType:r.userType,settingsData:r.settingsData,taskDetails:a.taskDetails,filteredList:a.filteredList,filterData:r.filterData,isFilterLoaded:r.isFilterLoaded,shoppedLate:a.shoppedLate}},function(e){return{updateFilter:function(t){return e(function(e){return{type:C,data:e}}(t))},updateTaskStatus:function(t){return e(B(t))},deleteTask:function(t){return e(z(t))},getLocations:function(t){return e(w(t))},createTask:function(t){return e(function(e){return{type:E,data:e}}(t))},editTask:function(t){return e(P(t))},getTaskDetails:function(t){return e(F(t))},getTrackDetails:function(t){return e(M(t))},search:function(t){return e(V(t))},resetSearch:function(t){return e(G(t))},getShoppedLate:function(t){return e(q(t))}}})(Object(h.h)(function(e){var t=e.userData,a=e.getLocations,r=e.locations,n=e.settingsData,o=e.userType,l=e.createTask,i=e.getTaskDetails,c=e.taskDetails,d=e.deleteTask,u=e.editTask,m=e.updateTaskStatus,p=e.getTrackDetails,h=e.search,f=e.resetSearch,_=e.filteredList,b=e.isTaskProcessing,g=e.updateFilter,E=e.filterData,v=e.isFilterLoaded,y=e.getShoppedLate,k=e.shoppedLate;return s.a.createElement(ot,{userData:t,getLocations:a,locations:r,settingsData:n,userType:o,createTask:l,getTaskDetails:i,taskDetails:c,deleteTask:d,editTask:u,updateTaskStatus:m,getTrackDetails:p,search:h,resetSearch:f,filteredList:_,isTaskProcessing:b,updateFilter:g,filterData:E,isFilterLoaded:v,getShoppedLate:y,shoppedLate:k})})),it=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(lt,{userData:this.props.userData}))}}]),t}(r.Component),ct=Object(h.h)(it),dt="GET_SUMMERY",ut="GET_FEEDBACK",mt="FEEDBACK_SEARCH",pt="REPLY",ht=function(e){return{type:"GET_SUMMERY_SUCCESS",data:e}},ft=function(e){return{type:"GET_SUMMERY_ERROR",data:e}},_t=function(e){return{type:"GET_FEEDBACK_SUCCESS",data:e}},bt=function(e){return{type:"GET_FEEDBACK_ERROR",data:e}},gt=function(e){return{type:"FEEDBACK_SEARCH_SUCCESS",data:e}},Et=function(e){return{type:"FEEDBACK_SEARCH_ERROR",data:e}},vt=function(e){return{type:"REPLY_SUCCESS",data:e}},yt=function(e){return{type:"REPLY_ERROR",data:e}},kt=a(93),St=a.n(kt),Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"foodjets_new_merchant";return"http://console.dev.foodjets.com"===ie.cookie.hostname&&(e="dev_"+e),St.a.getJSON(e)},Dt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"foodjets_new_merchant";"http://console.dev.foodjets.com"===ie.cookie.hostname&&(t="dev_"+t),ie.cookie.domain?St.a.set(t,e,{domain:ie.cookie.domain}):St.a.set(t,e)},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"foodjets_new_merchant";"http://console.dev.foodjets.com"===ie.cookie.hostname&&(e="dev_"+e),ie.cookie.domain?St.a.remove(e,{domain:ie.cookie.domain}):St.a.remove(e)},Ct=function(e,t){St.a.set(t,e)},wt=function(e,t){St.a.set(t,e,{expires:365})},Tt=function(e){St.a.remove(e)},xt=function(e){return St.a.getJSON(e)},Nt=function(e){function t(e){var a;Object(l.a)(this,t);var r=(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).props.taskDetails&&a.props.taskDetails.email?a.props.taskDetails.email:"";return a.state={fields:{to:r,message:""},errors:{to:"",message:""},replyModalShow:!0},a.handleReply=a.handleReply.bind(Object(Q.a)(Object(Q.a)(a))),a.handleChange=a.handleChange.bind(Object(Q.a)(Object(Q.a)(a))),a.handleValidation=a.handleValidation.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleValidation",value:function(){var e=!1,t=this.state.fields,a=this.state.errors;if(t.to){if(t.to){/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(t.to)||(e=!0,a.to="Please enter a valid email address.")}}else e=!0,a.to="Email is required.";return t.message||(e=!0,a.message="Message is required."),this.setState({errors:a}),e}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value,s=this.state.fields;s[a]=r;var n=Object(m.a)({},this.state.errors);n[a]="",this.setState({fields:s,errors:n})}},{key:"handleReply",value:function(e){if(e.preventDefault(),this.handleValidation())return!1;var t=Object(m.a)({},this.state.fields),a=this.props.taskDetails||{},r=xt("foodjets_merchant")||{};t.from=r.org_email,t.last_name=a.cust_last_name,t.task_id=a.order_details.id,t.customer_message=a.comment,t.first_name=a.cust_first_name,t.order_number=a.tp_order_number,t.subject="Raleys Response to Order Number: "+a.tp_order_number,t.complete_after=me.a.tz(1e3*parseInt(a.order_details.completeAfter),a.order_details.time_zone).format("MM/DD/YYYY hh:mm a"),this.props.reply(t)}},{key:"componentWillReceiveProps",value:function(e){this.setState({replyModalShow:e.replyModalShow})}},{key:"render",value:function(){var e=[],t=!1,a=this.state,r=a.fields,n=a.errors,o=a.replyModalShow,l=this.props.taskDetails||{},i=l&&l.rating?parseInt(l.rating):0,c=l.cust_first_name+" "+l.cust_last_name;Object(f.isEmpty)(n.to)&&Object(f.isEmpty)(n.message)&&!Object(f.isEmpty)(r.to)&&!Object(f.isEmpty)(r.message)&&(t=!0);for(var d=0;d<i;d++){var u="star-sm-"+d;e.push(s.a.createElement("img",{key:u,src:"/assets/star-sm.svg"}))}return s.a.createElement(Ne.a,{size:"xl",className:"c-modal boxmod repMod ",show:o,onHide:this.props.handleCloseModal},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Reply to Customer")),s.a.createElement(Je.a,{autoComplete:"off",onSubmit:this.handleReply},s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12",className:"l_col"},s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Merchant"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"name"},"Order Number"),s.a.createElement("input",{type:"text",placeholder:"Order Number",disabled:!0,style:{background:"none"},className:"t_box",name:"order_number",defaultValue:l.tp_order_number})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"order-number"},"Customer Name"),s.a.createElement("input",{type:"text",placeholder:"Customer Name",disabled:!0,style:{background:"none"},className:"t_box",name:"customer_name",defaultValue:c})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"store"},"Date \xb7 Time"),ve(l.order_details.completeAfter,l.order_details.completeBefore,l.order_details.time_zone)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"order-number"},"Customer Rating"),s.a.createElement("span",{className:"starwrap"},e))),s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Comments"),s.a.createElement("p",null,l.comment))),s.a.createElement(Te.a,{md:"6",sm:"12",className:"r_col task-d"},s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Email to Customer"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"order-number"},"To"),s.a.createElement("input",Object(Ce.a)({type:"text",placeholder:"Email",className:"t_box",name:"to",onChange:this.handleChange,value:r.to},"className",n.to?"t_box error":"t_box"))),s.a.createElement("textarea",{name:"message",placeholder:"Message...",rows:"4",onChange:this.handleChange.bind(this),className:n.message?"feedMsg error":"feedMsg",defaultValue:r.message}))))),s.a.createElement(Ne.a.Footer,null,s.a.createElement(xe.a,{type:"submit",variant:"primary",className:t?"active":""}," ",this.props.isReplying?"Processing..":"Submit"))))}}]),t}(r.Component),Rt=a(1017),Pt=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e,s=[];r<=t;)s.push(r),r+=a;return s},Lt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).gotoPage=function(e){var t=a.props.onPageChanged,r=void 0===t?function(e){return e}:t,s=Math.max(0,Math.min(e,a.state.totalPages)),n={currentPage:s,totalPages:a.state.totalPages,pageLimit:a.state.pageLimit,totalRecords:a.state.totalRecords};a.setState({currentPage:s},function(){return r(n)}),window.scrollTo(0,0)},a.handleClick=function(e){return function(t){t.preventDefault(),a.gotoPage(e)}},a.handleMoveLeft=function(e){e.preventDefault(),a.state.currentPage>1&&a.gotoPage(a.state.currentPage-1)},a.handleMoveRight=function(e){e.preventDefault(),a.state.currentPage<a.state.totalPages&&a.gotoPage(a.state.currentPage+1)},a.fetchPageNumbers=function(){var e=a.state.totalPages,t=a.state.currentPage,r=a.state.pageNeighbours;if(e>4){var s=Math.max(1,t-r),n=s+4;n>e&&(s=e-4,n=e);var o=Pt(s,n);return Object(ee.a)(o)}for(var l=[],i=1;i<=e;i++)l.push(i);return[].concat(l)};var r=e.totalRecords,s=void 0===r?null:r,n=e.pageLimit,o=void 0===n?ie.Pagination.itemsPerPage:n,i=e.pageNeighbours,u=void 0===i?0:i,m=e.searchTag,p=void 0===m?"":m;return a.pageLimit="number"===typeof o?o:ie.Pagination.itemsPerPage,a.totalRecords="number"===typeof s?s:0,a.pageNeighbours="number"===typeof u?Math.max(0,Math.min(u,2)):0,a.totalPages=Math.ceil(a.totalRecords/a.pageLimit),a.state={currentPage:1,pageLimit:a.pageLimit,totalRecords:a.totalRecords,pageNeighbours:a.pageNeighbours,totalPages:a.totalPages,searchTag:p},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.gotoPage(1)}},{key:"componentWillReceiveProps",value:function(e){var t=Math.ceil(e.totalRecords/e.pageLimit);this.props!==e&&(this.setState({pageLimit:e.pageLimit,totalRecords:e.totalRecords,pageNeighbours:e.pageNeighbours,totalPages:t}),e.totalRecords!==this.props.totalRecords&&this.gotoPage(1))}},{key:"render",value:function(){var e=this;if(!this.state.totalRecords||1===this.state.totalPages)return null;var t=this.state.currentPage,a=this.fetchPageNumbers();return this.props.isProcessing?null:s.a.createElement("ul",{className:"pagination pull-right"},this.state.totalPages>5?s.a.createElement("li",{className:"page-item"},s.a.createElement("button",{className:"page-link",onClick:this.handleMoveLeft},"Prev")):null,a.map(function(a,r){return s.a.createElement("li",{key:r,className:"page-item".concat(t===a?" active":"")},s.a.createElement("button",{className:"page-link",onClick:e.handleClick(a)},a))}),this.state.totalPages>5?s.a.createElement("li",{className:"page-item"},s.a.createElement("button",{className:"page-link",onClick:this.handleMoveRight},"Next")):null)}}]),t}(r.Component),At=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={orderDetailsModalShow:!0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({orderDetailsModalShow:e.orderDetailsModalShow})}},{key:"render",value:function(){var e=this.state.orderDetailsModalShow,t=this.props.taskDetails&&this.props.taskDetails.comment?this.props.taskDetails.comment:"",a=this.props.taskDetails&&this.props.taskDetails.order_details?this.props.taskDetails.order_details:{},r=a.reply?a.reply.message:null,n=(a.completionDetails||{}).events||{},o=n.onflt_mrchnt_pics||"";o=o?o.split(","):[];var l=n.onflt_recpnt_pics||"";l=l?l.split(","):[];var i=n.onflt_recpnt_sig||"",c=n.onflt_mrchnt_sig||"",d="https://d15p8tr8p0vffz.cloudfront.net/";return s.a.createElement(Ne.a,{size:"md",className:"c-modal nofooter",show:e,onHide:this.props.handleCloseModal},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Task Details")),s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12",className:"l_col"},s.a.createElement("div",{className:"merchant_box"},s.a.createElement("div",{className:"detail_p"},s.a.createElement("p",null,s.a.createElement("label",null,"Task ID:")," ",a.id),s.a.createElement("p",null,s.a.createElement("label",null,"Task Status:")," ",Ee(a.tskStatus)),s.a.createElement("p",null,s.a.createElement("label",null,"Delivery Window:")," ",ve(a.completeAfter,a.completeBefore,a.time_zone)),s.a.createElement("p",null,s.a.createElement("label",null,"Order Number:")," ",a.orderNumber))),s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Merchant info"),a.merchant?s.a.createElement("div",{className:"detail_p"},s.a.createElement("p",null,s.a.createElement("label",null,"Name:")," ",s.a.createElement("span",null,a.merchant.name),"  "),s.a.createElement("p",null,s.a.createElement("label",null,"Phone:"),s.a.createElement("span",null,a.merchant.phone)),s.a.createElement("p",null,s.a.createElement("label",null,"Address:"),s.a.createElement("span",null,a.merchant.address.number,", ",a.merchant.address.street,", ",a.merchant.address.postalCode,", ",a.merchant.address.city,", ",a.merchant.address.state,", ",a.merchant.address.country)),s.a.createElement("p",null,s.a.createElement("label",null,"Notes:"),s.a.createElement("span",null,a.merchant.notes," "))):null)),s.a.createElement(Te.a,{md:"6",sm:"12",className:"r_col"},s.a.createElement("div",{className:"merchant_box minH"},s.a.createElement("h4",null,"Recipient info"),a.merchant?s.a.createElement("div",{className:"detail_p"},s.a.createElement("p",null,s.a.createElement("label",null,"Name:")," ",s.a.createElement("span",null,a.recipients.name)),s.a.createElement("p",null,s.a.createElement("label",null,"Phone:")," ",s.a.createElement("span",null,a.recipients.phone)),a.recpnt_email?s.a.createElement("p",null,s.a.createElement("label",null,"Email:")," ",s.a.createElement("span",null,a.recpnt_email)):null,s.a.createElement("p",null,s.a.createElement("label",null,"Address:"),s.a.createElement("span",null,a.recipients.address.number,", ",a.recipients.address.street,", ",a.recipients.address.postalCode,", ",a.recipients.address.city,", ",a.recipients.address.state,", ",a.recipients.address.country)),s.a.createElement("p",null,s.a.createElement("label",null,"Alochol:")," ",s.a.createElement("span",null,a.alcohol)),s.a.createElement("p",null,s.a.createElement("label",null,"Tip: "),s.a.createElement("span",null,a.tip)),s.a.createElement("p",null,s.a.createElement("label",null,"Notes:")," ",s.a.createElement("span",null,a.recipients.notes))):null))),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info task-d"},s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Driver Details"),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("div",{className:"detail_p"},s.a.createElement("p",null,s.a.createElement("label",null,"Driver Name:")," ",a.driver_name)))),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Merchant Task"),s.a.createElement("div",{className:"detail_p"},n.work_in_progress_timestamp?s.a.createElement("p",null,s.a.createElement("label",null,"Order Processing:"),he(1e3*n.work_in_progress_timestamp,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.ready_timestamp?s.a.createElement("p",null,s.a.createElement("label",null,"Order Ready:"),he(1e3*n.ready_timestamp,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.merchant_start?s.a.createElement("p",null,s.a.createElement("label",null,"Start:"),he(1e3*n.merchant_start,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.merchant_eta?s.a.createElement("p",null,s.a.createElement("label",null,"2 min eta:"),he(1e3*n.merchant_eta,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.merchant_arrival?s.a.createElement("p",null,s.a.createElement("label",null,"Arrival:"),he(1e3*n.merchant_arrival,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.merchant_complete?s.a.createElement("p",null,s.a.createElement("label",null,"Complete:"),he(1e3*n.merchant_complete,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.merchant_worker_note?s.a.createElement("p",null,s.a.createElement("label",null,"Complete:"),n.merchant_worker_note):null)),s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Recipient Task"),s.a.createElement("div",{className:"detail_p"},n.recipient_start?s.a.createElement("p",null,s.a.createElement("label",null,"Start:"),he(1e3*n.recipient_start,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.recipient_eta?s.a.createElement("p",null,s.a.createElement("label",null,"2 min eta:"),he(1e3*n.recipient_eta,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.recipient_arrival?s.a.createElement("p",null,s.a.createElement("label",null,"Arrival:"),he(1e3*n.recipient_arrival,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.recipient_complete?s.a.createElement("p",null,s.a.createElement("label",null,"Complete:"),he(1e3*n.recipient_complete,a.timezone,"DD-MM-YYYY hh:mm A")):null,n.recipient_worker_note?s.a.createElement("p",null,s.a.createElement("label",null,"Complete:"),n.recipient_worker_note):null)))))),s.a.createElement(we.a,{noGutters:!0,className:"sigPhotoRow"},s.a.createElement(Te.a,{md:"6",sm:"12",className:"l_col"},s.a.createElement("div",{className:"merchant_box sigbox"},s.a.createElement("h4",null,"Signature Details"),c||i?s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Merchant Signature"),c?s.a.createElement("img",{src:"".concat(d).concat(c,"/282x.png")}):s.a.createElement("p",{className:"noreply"}," No response yet")),s.a.createElement(Te.a,{md:"6",sm:"12",className:"sigimg"},s.a.createElement("h6",null,"Recipient Signature"),i?s.a.createElement("img",{src:"".concat(d).concat(i,"/282x.png")}):s.a.createElement("p",{className:"noreply"}," No response yet"))):s.a.createElement("p",{className:"noreply"}," No response yet"))),s.a.createElement(Te.a,{md:"6",sm:"12",className:"r_col"},s.a.createElement("div",{className:"merchant_box dPhoto"},s.a.createElement("h4",null,"Delivery Photo"),l.length>0||o>0?s.a.createElement(Ue.a,{responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:2},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}}},(o||[]).map(function(e,t){return s.a.createElement("div",{key:"mrchnt_pics_".concat(t),className:"pr16"},s.a.createElement("img",{src:"".concat(d).concat(e,"/800x.png")}))})(l||[]).map(function(e,t){return s.a.createElement("div",{key:"recpnt_pics_".concat(t),className:"pr16"},s.a.createElement("img",{src:"".concat(d).concat(e,"/800x.png")}))})):s.a.createElement("p",{className:"noreply"}," No response yet")))),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info task-d"},s.a.createElement("div",{className:"merchant_box feedbackpan"},s.a.createElement("h4",null,"Feedback"),s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Customer Feedback"),s.a.createElement("p",null,t)),s.a.createElement(Te.a,{md:"6",sm:"12"},s.a.createElement("h6",null,"Response to Customer "),r?s.a.createElement("p",null,r):s.a.createElement("p",{className:"noreply"}," No response yet"))))))))}}]),t}(r.Component),Mt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={taskDetails:{},repliedIds:[],replyModalShow:!1,filteredFeedbackData:[],orderDetailsModalShow:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleCloseModal",value:function(){this.setState({replyModalShow:!1,orderDetailsModalShow:!1})}},{key:"handleOpenModal",value:function(e,t,a){e.stopPropagation(),"REPLY"===t?this.setState({replyModalShow:!0,taskDetails:a}):"ORDERDETAILS"===t&&this.setState({orderDetailsModalShow:!0,taskDetails:a})}},{key:"componentWillReceiveProps",value:function(e){if(e.replyResult&&e.replyResult!==this.props.replyResult){var t=this.state.repliedIds||[];t.push(e.replyResult.task_id),this.setState({replyModalShow:!1,orderDetailsModalShow:!1,repliedIds:t})}this.setState({filteredFeedbackData:e.filteredFeedbackData})}},{key:"render",value:function(){var e=this,t=this.state,a=t.replyModalShow,r=t.orderDetailsModalShow,n=t.taskDetails,o=t.repliedIds,l=t.filteredFeedbackData,i=this.props.feedbackSummeryData&&this.props.feedbackSummeryData.total_feedback?this.props.feedbackSummeryData.total_feedback:0,c=this.props.feedbackSummeryData&&this.props.feedbackSummeryData.rows?this.props.feedbackSummeryData.rows:[],d=this.props.feedBackCount||0,u=0,m=0,p=0;c.map(function(e,t){p+=parseFloat(e.percentage),m+=parseFloat(e.rating)*parseFloat(e.percentage)});for(var h=[],_=[],b=function(e){var t=0,a=Math.floor(e),r=e-a;r<.25?t=0:r>=.25&&r<.75?t=.5:r>=.75&&(t=1);var s=a+t,n=Math.floor(s);return{fraction:r=s-n,newwhole:n}}(u=parseFloat(m/p)),g=1;g<=b.newwhole;g++){var E="star-"+g;h.push(s.a.createElement("img",{key:E,src:"/assets/star.svg"}))}.5==b.fraction&&h.push(s.a.createElement("img",{key:"star-h",src:"/assets/star-h.svg"}));for(var v=1;v<=5-h.length;v++){var y="star-g-"+v;_.push(s.a.createElement("img",{key:y,src:"/assets/star-g.svg"}))}return s.a.createElement("div",null,this.props.isLoading?s.a.createElement("div",{className:"loader"},"Loading...."):s.a.createElement("div",null,s.a.createElement("section",{className:"feedback_wrap"},s.a.createElement("h4",{className:"titelFb"},"Customer Feedback"),c.length>0?s.a.createElement("div",{className:"fbSecwrap"},s.a.createElement("div",{className:"bstarPan"},s.a.createElement("div",{className:"bstar_up"},s.a.createElement("h3",null,u>0?u.toFixed(2):0),s.a.createElement("span",{className:"big_star"},h,_)),s.a.createElement("div",{className:"bstar_down"},"based on ",i," ratings")),s.a.createElement("div",{className:"statsbarPan"},c.map(function(e,t){return s.a.createElement("div",{key:"rate-".concat(t),className:"gBar"},s.a.createElement("label",null,e.rating," Stars"),s.a.createElement("div",{className:"bar"},s.a.createElement(Rt.a,{now:e.percentage})),s.a.createElement("span",{className:"totalP"},e.feedback_count," Total"))}))):null,s.a.createElement("div",{className:"filter_pan"},s.a.createElement("span",{className:"ftitle"},"Filter by:"),s.a.createElement("div",{className:"cbPan"},s.a.createElement("input",{onChange:this.props.handleCheckboxFilter,checked:this.props.allRatings,type:"checkbox",id:"rating",name:"rating",value:"all",className:"c_box"})," ",s.a.createElement("span",{className:"fwb"},"All ratings")),s.a.createElement("div",{className:"cbPan"},s.a.createElement("input",{onChange:this.props.handleCheckboxFilter,checked:this.props.filterByStart.includes("5"),type:"checkbox",id:"rating",name:"rating",value:"5",className:"c_box"})," ",s.a.createElement("span",null,"5 Stars")),s.a.createElement("div",{className:"cbPan"},s.a.createElement("input",{onChange:this.props.handleCheckboxFilter,checked:this.props.filterByStart.includes("4"),type:"checkbox",id:"rating",name:"rating",value:"4",className:"c_box"})," ",s.a.createElement("span",null,"4 Stars")),s.a.createElement("div",{className:"cbPan"},s.a.createElement("input",{onChange:this.props.handleCheckboxFilter,checked:this.props.filterByStart.includes("3"),type:"checkbox",id:"rating",name:"rating",value:"3",className:"c_box"})," ",s.a.createElement("span",null,"3 Stars")),s.a.createElement("div",{className:"cbPan"},s.a.createElement("input",{onChange:this.props.handleCheckboxFilter,checked:this.props.filterByStart.includes("2"),type:"checkbox",id:"rating",name:"rating",value:"2",className:"c_box"})," ",s.a.createElement("span",null,"2 Stars")),s.a.createElement("div",{className:"cbPan"},s.a.createElement("input",{onChange:this.props.handleCheckboxFilter,checked:this.props.filterByStart.includes("1"),type:"checkbox",id:"rating",name:"rating",value:"1",className:"c_box"})," ",s.a.createElement("span",null,"1 Stars"))),s.a.createElement("div",{className:"table_sec feed feedbackTable ".concat(this.props.isFiltering?"tableloder":""," ")},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Customer Name"),s.a.createElement("th",null,"Date \xb7 Time"),s.a.createElement("th",null,"Rating"),s.a.createElement("th",null,"Comments"),s.a.createElement("th",null,"Follow Up"))),!Object(f.isEmpty)(l)&&l.length>0?s.a.createElement("tbody",null,l.length>0&&l.map(function(t,a){for(var r=[],n=t.rating?parseInt(t.rating):0,l=0;l<n;l++)r.push(s.a.createElement("img",{key:"star-sm-".concat(l),src:"/assets/star-sm.svg"}));return s.a.createElement("tr",{key:"feedback-list-".concat(a)},s.a.createElement("td",null,t.tp_order_number," ",s.a.createElement("span",{className:"docmodbtn",onClick:function(a){return e.handleOpenModal(a,"ORDERDETAILS",t)}},s.a.createElement("img",{src:"/assets/doc.svg"}))),s.a.createElement("td",null,t.cust_first_name," ",t.cust_last_name),s.a.createElement("td",null,t.time_stamp),s.a.createElement("td",null,s.a.createElement("div",{className:"starRange"},r)),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("label",null,t.comment),t.comment?s.a.createElement("span",{className:"tTip"},t.comment):null),s.a.createElement("td",null,"true"===t.reply||o.indexOf(t.order_details.id)>-1?s.a.createElement("span",{className:"fbReply",style:{cursor:"default"}},s.a.createElement("img",{src:"/assets/checkmark-black.svg"})):s.a.createElement("span",{className:"fbReply",onClick:function(a){return e.handleOpenModal(a,"REPLY",t)}},"Reply")))})):s.a.createElement("tbody",null,s.a.createElement("tr",{className:"no-records"},s.a.createElement("td",{colSpan:"6"},"No Records"))))),a?s.a.createElement(Nt,{reply:this.props.reply,isReplying:this.props.isReplying,replyModalShow:a,handleCloseModal:this.handleCloseModal.bind(this),taskDetails:n}):null,r?s.a.createElement(At,{isReplying:this.props.isReplying,orderDetailsModalShow:r,handleCloseModal:this.handleCloseModal.bind(this),taskDetails:n}):null),d>=500?s.a.createElement("div",{className:"pagination_Pan"},s.a.createElement(Lt,{totalRecords:d,pageLimit:500,pageNeighbours:1,onPageChanged:this.props.changePage})):null))}}]),t}(r.Component),Ft=(a(964),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onChangeHandle=function(e){var t=e.target.name,r=e.target.value;a.setState(Object(Ce.a)({},t,r),function(){})},a.state={month:"",year:"",show:!1,noofdays:""},a.monthName=["January","February","March","April","May","June","July","August","September","October","November","December"],a.weekDaysArr=[],a.getMonthDays=a.getMonthDays.bind(Object(Q.a)(Object(Q.a)(a))),a.prevMonth=a.prevMonth.bind(Object(Q.a)(Object(Q.a)(a))),a.nextMonth=a.nextMonth.bind(Object(Q.a)(Object(Q.a)(a))),a.selectDate=a.selectDate.bind(Object(Q.a)(Object(Q.a)(a))),a.handleClick=a.handleClick.bind(Object(Q.a)(Object(Q.a)(a))),a.handleDateRange=a.handleDateRange.bind(Object(Q.a)(Object(Q.a)(a))),a.outerClick=a.outerClick.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=new Date,t=e.getMonth(),a=e.getFullYear(),r=this.getMonthDays(t,a);this.setState({month:t,year:a,calendar:r},function(){}),document.addEventListener("click",this.outerClick)}},{key:"outerClick",value:function(e){e.stopPropagation(),this.state.show&&!this.node.contains(e.target)&&"ignore-outer-click"!==e.target.getAttribute("data")&&this.setState({show:!1})}},{key:"handleClick",value:function(){this.setState({show:!this.state.show})}},{key:"handleDateRange",value:function(e,t){var a=me()(),r=me()().subtract(e-1,"days");this.props.onDateRange({startDate:r.format("YYYY-MM-DD"),endDate:a.format("YYYY-MM-DD"),noofdays:"Custom"===t?e:""})}},{key:"selectDate",value:function(e,t,a){var r=this.state.year,s=me()("".concat(r,"-").concat(t+1,"-").concat(e)).format("YYYY-MM-DD");this.props.onSelectDate(s)}},{key:"getMonthDays",value:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new Date(t,e,1),s=r.getDay(),n=new Date(r.setDate(r.getDate()-s)),o=new Date(t,e+1,0),l=o.getDay(),i=new Date(o.setDate(o.getDate()+(6-l))),c=[],d=new Date;n.getTime()<=i.getTime();){var u=!1;n.getDate()===new Date(n.getTime()).getDate().toString()&&d.getMonth()===new Date(n.getTime()).getMonth()&&d.getFullYear()===new Date(n.getTime()).getFullYear()&&(u=!0),c.push({date:n.getDate(),month:n.getMonth(),year:n.getFullYear(),day:this.weekDaysArr[n.getDay()],fulldate:me()(n.getTime()).format("YYYY-MM-DD"),currentDate:u}),n.setDate(n.getDate()+1)}var m,p,h=[];for(m=0,p=c.length;m<p;m+=7){var f=c.slice(m,m+7);h.push(f)}var _=0;return""===a?h.forEach(function(e,t){e.some(function(e){return e.date===d.getDate()&&e.month===d.getMonth()})&&(_=t)}):_=a,{allDays:h,month:this.monthName[e],year:t,currentWeek:_}}},{key:"prevMonth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.state.month,a=this.state.year;0===this.state.month?(t=11,a-=1):(t-=1,a=a);var r=this.getMonthDays(t,a,e);this.setState({month:t,year:a,calendar:r})}},{key:"nextMonth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.state.month,a=this.state.year;11===t?(t=0,a+=1):(t+=1,a=a);var r=this.getMonthDays(t,a,e);this.setState({month:t,year:a,calendar:r})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.selectDate!==e.selectDate){var t=new Date(e.selectDate),a=t.getMonth(),r=t.getFullYear(),s=this.getMonthDays(a,r);this.setState({month:a,year:r,calendar:s},function(){})}this.state.noofdays!==e.noofdays&&this.setState({noofdays:e.noofdays})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.outerClick)}},{key:"render",value:function(){var e=this,t=this.state.calendar||{},a=this.props.selectDate||"",r=this.props.startDate||"",n=r?me()(r).format("X"):"",o=this.props.endDate||"",l=o?me()(o).format("X"):"",i=this.props.tillDate||"",c=i?me()(i).format("X"):"",d=this.props.noofdays||"";return s.a.createElement("div",{ref:function(t){return e.node=t},className:this.state.show?"cOpen ":""},s.a.createElement("input",{type:"text",className:this.props.className,placeholder:this.props.placeholder,value:a,readOnly:!0,onClick:this.handleClick,disabled:!!this.props.disabled}),s.a.createElement("div",{className:this.state.show?"calendar ":"calendar hide"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"5"},t.month," ",t.year),s.a.createElement("th",{colSpan:"2"},s.a.createElement("span",{className:"aro_sec"},s.a.createElement("a",{onClick:this.prevMonth},s.a.createElement("img",{src:"/assets/chevron_right.svg",alt:"left_arrow"})),"\xa0",s.a.createElement("a",{onClick:this.nextMonth},s.a.createElement("img",{src:"/assets/chevron-right.svg",alt:"right_arrow"})))))),s.a.createElement("tbody",null,s.a.createElement("tr",{className:"blue_bg"},s.a.createElement("td",{width:"14.285%"},"SU"),s.a.createElement("td",{width:"14.285%"},"MO"),s.a.createElement("td",{width:"14.285%"},"TU"),s.a.createElement("td",{width:"14.285%"},"WE"),s.a.createElement("td",{width:"14.285%"},"TH"),s.a.createElement("td",{width:"14.285%"},"FR"),s.a.createElement("td",{width:"14.285%"},"SA")),t.allDays&&t.allDays.length>0?t.allDays.map(function(t,a){return s.a.createElement("tr",{key:a},t.map(function(t,r){var o=me()(t.fulldate).format("X"),i="";return n==o&&(i="select start"),l&&o<l&&n<o&&(i="select range"),l&&o==l&&n<o&&(i="select end"),c&&c<o?s.a.createElement("td",{key:r,align:"center",className:"disabled"},t.date):s.a.createElement("td",{key:r,align:"center",className:i,onClick:function(){return e.selectDate(t.date,t.month,a)}},t.date)}))}):null)),s.a.createElement("div",{className:"cus_last_date"},s.a.createElement("ul",null,s.a.createElement("li",null,"Date Range"),s.a.createElement("li",{onClick:function(){return e.handleDateRange(7,"")}},"Last 7 days"),s.a.createElement("li",{onClick:function(){return e.handleDateRange(30,"")}},"Last 30 days"),s.a.createElement("li",{onClick:function(){return e.handleDateRange(90,"")}},"Last 90 days"),s.a.createElement("li",{className:"d_flex_n"},"Last ",s.a.createElement("input",{type:"text",size:"20",value:this.state.noofdays,name:"noofdays",onChange:this.onChangeHandle})," days",this.state.noofdays&&this.state.noofdays!==d?s.a.createElement("a",{data:"ignore-outer-click",onClick:function(){return e.handleDateRange(e.state.noofdays,"Custom")}},s.a.createElement("img",{data:"ignore-outer-click",src:"/assets/checkmark_blue.svg",alt:"check"})):d&&this.state.noofdays?s.a.createElement("img",{src:"/assets/checkmark_blue.svg",className:"blackCheck",alt:"check"}):null)))))}}]),t}(r.Component)),Ut=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={typeOpen:!1,showSearch:!1,search:{text:"",merchant_address:"",recipient_address:"",start_time:"",end_time:"",type:"order-number",field:"order_number",label:"Order Number"},repliedIds:[],replyModalShow:!1,orderDetailsModalShow:!1},a.collapse=a.collapse.bind(Object(Q.a)(Object(Q.a)(a))),a.resetSearch=a.resetSearch.bind(Object(Q.a)(Object(Q.a)(a))),a.handleSearch=a.handleSearch.bind(Object(Q.a)(Object(Q.a)(a))),a.handleSelectbox=a.handleSelectbox.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"collapse",value:function(e){this.setState({typeOpen:!1})}},{key:"handleSelectbox",value:function(e){this.setState(Object(Ce.a)({},e,!this.state[e]))}},{key:"resetSearch",value:function(){this.setState({search:{text:"",merchant_address:"",recipient_address:"",delivery_time:"",start_date:"",end_date:"",type:"order-number",field:"order_number",label:"Order Number"},searchResultList:[]})}},{key:"changeSearchType",value:function(e){this.setState({search:{type:e.type,label:e.label,field:e.field,text:""}})}},{key:"handleSearch",value:function(e){var t=e.target.value;this.setState({search:Object(m.a)({},this.state.search,{text:e.target.value})},function(){var e;t.length>1?this.props.searchFilter((e={type:this.state.search.type},Object(Ce.a)(e,this.state.search.field,t),Object(Ce.a)(e,"user_type",this.props.type),e)):this.setState({searchResultList:[]})})}},{key:"handleCloseModal",value:function(){this.setState({replyModalShow:!1,orderDetailsModalShow:!1})}},{key:"handleOpenModal",value:function(e,t,a){e.stopPropagation(),"REPLY"===t?this.setState({replyModalShow:!0,taskDetails:a}):"ORDERDETAILS"===t&&this.setState({orderDetailsModalShow:!0,taskDetails:a})}},{key:"componentWillReceiveProps",value:function(e){if(e.replyResult&&e.replyResult!==this.props.replyResult){var t=this.state.repliedIds||[];t.push(e.replyResult.task_id),this.setState({replyModalShow:!1,orderDetailsModalShow:!1,repliedIds:t})}this.setState({isSearching:e.isSearching,searchResultList:e.searchResultList,showSearch:e.showSearch})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.isSearching,t.searchResultList),r=t.replyModalShow,n=t.showSearch,o=t.orderDetailsModalShow,l=t.repliedIds,i=t.taskDetails;return s.a.createElement("div",{className:"searchMod_sec".concat(n?"":" hide")},s.a.createElement("div",{className:"s_bar"},s.a.createElement("label",null,"Search by:"),s.a.createElement(Je.a,{method:"get",action:"",autoComplete:"off"},s.a.createElement("div",{className:"select-box ".concat(this.state.typeOpen?" sopen":" "),onBlur:function(){return e.collapse("typeOpen")}},s.a.createElement("div",{className:"s-result",onClick:function(){return e.handleSelectbox("typeOpen")}},s.a.createElement("input",{type:"text",autoComplete:"off",value:this.state.search.label,onChange:function(){return e.handleSelectbox("typeOpen")},name:"searchType"})),s.a.createElement("ul",null,s.a.createElement("li",{onClick:function(){return e.changeSearchType({type:"order-number",field:"order_number",label:"Order Number"})}},"Order Number"),s.a.createElement("li",{onClick:function(){return e.changeSearchType({type:"name",field:"name",label:"Customer Name"})}},"Customer Name"),s.a.createElement("li",{onClick:function(){return e.changeSearchType({type:"email",field:"email",label:"Customer Email"})}},"Customer Email"))),s.a.createElement("div",{className:"resboxwrap"},s.a.createElement("div",{className:"search_box"},s.a.createElement("input",{type:"text",autoComplete:"off",placeholder:"Search",name:"searchTxt",value:this.state.search.text,onChange:this.handleSearch})),s.a.createElement("button",{onClick:this.resetSearch,className:"reset_btn",type:"reset"},"Reset")))),!Object(f.isEmpty)(a)&&a.length>0?s.a.createElement("div",null,s.a.createElement("div",{className:"table_sec feed"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Customer Name"),s.a.createElement("th",null,"Date \xb7 Time"),s.a.createElement("th",null,"Rating"),s.a.createElement("th",null,"Comments"),s.a.createElement("th",null,"Follow Up"))),s.a.createElement("tbody",null,a.length>0&&a.map(function(t,a){for(var r=[],n=t.rating?parseInt(t.rating):0,o=0;o<n;o++)r.push(s.a.createElement("img",{key:"star-sm-".concat(o),src:"/assets/star-sm.svg"}));return s.a.createElement("tr",{key:"feedback-list-".concat(a)},s.a.createElement("td",null,t.tp_order_number," ",s.a.createElement("span",{className:"docmodbtn",onClick:function(a){return e.handleOpenModal(a,"ORDERDETAILS",t.order_details)}},s.a.createElement("img",{src:"/assets/doc.svg"}))),s.a.createElement("td",null,t.cust_first_name," ",t.cust_last_name),s.a.createElement("td",null,t.time_stamp),s.a.createElement("td",null,s.a.createElement("div",{className:"starRange"},r)),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("label",null,t.comment),t.comment?s.a.createElement("span",{className:"tTip"},t.comment):null),s.a.createElement("td",null,"true"===t.reply||l.indexOf(t.order_details.id)>-1?s.a.createElement("span",{className:"fbReply",style:{cursor:"default"}},s.a.createElement("img",{src:"/assets/checkmark-black.svg"})):s.a.createElement("span",{className:"fbReply",onClick:function(a){return e.handleOpenModal(a,"REPLY",t)}},"Reply")))})))),s.a.createElement("div",{className:"resultCount"},a.length," SEARCH RESULT(S)"),s.a.createElement("div",{className:"t_result"})):s.a.createElement("div",{className:"noresult"},"Type to search and relevant results will appear"),r?s.a.createElement(Nt,{reply:this.props.reply,isReplying:this.props.isReplying,replyModalShow:r,handleCloseModal:this.handleCloseModal.bind(this),taskDetails:i}):null,o?s.a.createElement(At,{isReplying:this.props.isReplying,orderDetailsModalShow:o,handleCloseModal:this.handleCloseModal.bind(this),taskDetails:i}):null)}}]),t}(s.a.Component),Yt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).updateFeedbackSummery=function(){var e=a.state.type,t=Object(m.a)({},a.state.makeSummeryFilterObj),r=a.state.filterKeys&&a.state.filterKeys.Area||[],s=a.state.filterKeys&&a.state.filterKeys.State||[],n=a.state.filterKeys&&a.state.filterKeys.Store||[];if(delete t.place,delete t.store_id,t.user_type=e,s.length>0||r.length>0&&n.length>0)if("store"===t.type){var o=[];n.forEach(function(e){o.push(e.store_id)}),t.store_id=o}else if("place"===t.type){var l=[];s.forEach(function(e){var t=[];r.forEach(function(a){a.state===e.value&&t.push(a.area_id)}),l.push({zone_id:t,state:e.value})}),t.place=l}a.setState({makeSummeryFilterObj:t},function(){a.props.getSummary(t)})},a.updateFeedbackList=function(e){var t=a.state.type,r=Object(m.a)({},a.state.makeFeedbackFilterObj),s=a.state.filterKeys&&a.state.filterKeys.Area||[],n=a.state.filterKeys&&a.state.filterKeys.State||[],o=a.state.filterKeys&&a.state.filterKeys.Store||[];if(delete r.place,delete r.store_id,r.user_type=t,n.length>0||s.length>0&&o.length>0)if("store"===r.type){var l=[];o.forEach(function(e){l.push(e.store_id)}),r.store_id=l}else if("place"===r.type){var i=[];n.forEach(function(e){var t=[];s.forEach(function(a){a.state===e.value&&t.push(a.area_id)}),i.push({zone_id:t,state:e.value})}),r.place=i}a.setState({makeFeedbackFilterObj:r},function(){var t=Object(m.a)({},r,{filter:e});a.props.getFeedback(t)})},a.handleUpdateFilter=function(){a.updateFeedbackSummery(),a.updateFeedbackList({makeFeedbackFilterObj:a.state.makeFeedbackFilterObj,makeSummeryFilterObj:a.state.makeSummeryFilterObj,user_type:a.props.userType,type:a.state.type,filterKeys:a.state.filterKeys}),console.log("Feedback Update Filter : ",{makeFeedbackFilterObj:a.state.makeFeedbackFilterObj,makeSummeryFilterObj:a.state.makeSummeryFilterObj,user_type:a.props.userType,type:a.state.type,filterKeys:a.state.filterKeys})},a.handleStateChange=function(e,t){e.stopPropagation();var r=a.state.filterKeys||{},s=Object(m.a)({},a.state.makeSummeryFilterObj),n=Object(m.a)({},a.state.makeFeedbackFilterObj);-1===r.State.findIndex(function(e){return e.value===t.value})&&r.State.push({label:t.label,value:t.value}),s.type="place",n.type="place",a.setState({stateTxt:"",filterKeys:r,makeSummeryFilterObj:s,makeFeedbackFilterObj:n},function(){a.stateDropdownInput.current.focus(),a.handleUpdateFilter()})},a.handleAreaChange=function(e,t){e.stopPropagation();var r=a.state.filterKeys||{},s=Object(m.a)({},a.state.makeSummeryFilterObj),n=Object(m.a)({},a.state.makeFeedbackFilterObj);-1===r.Area.findIndex(function(e){return e.value===t.delivery_zone_name})&&r.Area.push({area_id:t.id,state:t.state,value:t.delivery_zone_name,label:"".concat(t.delivery_zone_name," (").concat(t.state,")")}),s.type="place",n.type="place",a.setState({areaTxt:"",filterKeys:r,makeSummeryFilterObj:s,makeFeedbackFilterObj:n},function(){a.areaDropdownInput.current.focus(),a.handleUpdateFilter()})},a.handleStoreChange=function(e,t){e.stopPropagation();var r=a.state.filterKeys||{},s=Object(m.a)({},a.state.makeSummeryFilterObj),n=Object(m.a)({},a.state.makeFeedbackFilterObj);-1===r.Store.findIndex(function(e){return e.value===t.label})&&r.Store.push({label:t.label,value:t.label,store_id:t.data.store_id}),s.type="store",n.type="store",a.setState({storeTxt:"",filterKeys:r,makeSummeryFilterObj:s,makeFeedbackFilterObj:n},function(){a.storeDropdownInput.current.focus(),a.handleUpdateFilter()})},a.handleRemoveFilter=function(e,t,r){e.stopPropagation();var s=a.state.filterKeys||[],n=Object(m.a)({},a.state.makeSummeryFilterObj),o=Object(m.a)({},a.state.makeFeedbackFilterObj);s[t].splice(r,1),"State"===t&&0===s[t].length&&(s.Area=[],s.Store=[]),"Area"===t&&0===s[t].length&&(s.Store=[]);var l="Area"!==t?a.state.selectedArea:null,i="State"!==t?a.state.selectedState:null,c="Store"!==t?a.state.selectedStore:null;n.type=a.state.filterKeys.State.length>0?"place":"date",o.type=a.state.filterKeys.State.length>0?"place":"date",a.setState({filterKeys:s,selectedArea:l,selectedState:i,selectedStore:c,makeSummeryFilterObj:n,makeFeedbackFilterObj:o},function(){a.handleUpdateFilter()})},a.onSelectStartDate=function(e){var t=me()(e).format("X"),r=Object(m.a)({},a.state.makeSummeryFilterObj),s=Object(m.a)({},a.state.makeFeedbackFilterObj);if(t>me()(a.state.endDate).format("X"))return Oe({message:"Start date should be lower than end date"}),!1;r.start=e,s.start=e,a.setState({startDate:e,makeSummeryFilterObj:r,makeFeedbackFilterObj:s},function(){a.handleUpdateFilter()})},a.onSelectEndDate=function(e){var t=me()(e).format("X"),r=Object(m.a)({},a.state.makeSummeryFilterObj),s=Object(m.a)({},a.state.makeFeedbackFilterObj);if(t<me()(a.state.startDate).format("X"))return Oe({message:"End date should be greater than start date"}),!1;r.end=e,s.end=e,a.setState({endDate:e,makeSummeryFilterObj:r,makeFeedbackFilterObj:s},function(){a.handleUpdateFilter()})},a.onDateRange=function(e){var t=Object(m.a)({},a.state.makeSummeryFilterObj),r=Object(m.a)({},a.state.makeFeedbackFilterObj);t.end=e.endDate,r.end=e.endDate,t.start=e.startDate,r.start=e.startDate,a.setState({startDate:e.startDate,endDate:e.endDate,noofdays:e.noofdays,makeSummeryFilterObj:t,makeFeedbackFilterObj:r},function(){a.handleUpdateFilter()})},a.handleFilterOutsideClick=function(e){e.stopPropagation(),a.nodeState.contains(e.target)||"ignore-state-outer-click"===e.target.getAttribute("data")||a.nodeArea.contains(e.target)||"ignore-area-outer-click"===e.target.getAttribute("data")||a.nodeStore.contains(e.target)||"ignore-store-outer-click"===e.target.getAttribute("data")||a.nodeSearch.contains(e.target)||a.nodeSrchButton.contains(e.target)||a.nodeResSrchButton.contains(e.target)||"autosuggest"===e.target.getAttribute("data")||"ignore-outer-click"===e.target.getAttribute("data")||e.target.getAttribute("aria-hidden")||(a.state.sOpen||a.state.aOpen||a.state.stOpen||a.state.showSearch)&&a.setState({sOpen:!1,aOpen:!1,stOpen:!1,showSearch:!1,stateTxt:"",areaTxt:"",storeTxt:""})};var r=me()().format("YYYY-MM-DD"),n=me()().subtract(1,"days").format("YYYY-MM-DD");return a.state={area:{},stores:[],stateTxt:"",areaTxt:"",storeTxt:"",sOpen:!1,aOpen:!1,stOpen:!1,showSearch:!1,showFilter:!1,filteredList:{},type:"general",filterKeys:{State:[],Area:[],Store:[]},makeSummeryFilterObj:{type:"date",end:r,start:n},makeFeedbackFilterObj:{page:1,type:"date",end:r,start:n,filter_rating_by:[],order_by:"date_time"},endDate:r,startDate:n,noofdays:""},a.areaDropdownInput=s.a.createRef(),a.stateDropdownInput=s.a.createRef(),a.storeDropdownInput=s.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleTypeChange",value:function(e){var t=this,a=(Object(m.a)({},this.state.makeSummeryFilterObj),Object(m.a)({},this.state.makeFeedbackFilterObj));a.page=1,this.setState({type:e,allRatings:!0,filterByStart:[],makeFeedbackFilterObj:a},function(){t.handleUpdateFilter(),Object(f.isEmpty)(t.state.advSearchData)||t.props.feedbackSearch(Object(m.a)({},t.state.advSearchData,{user_type:e}))})}},{key:"handleSelectbox",value:function(e){"Area"===e&&0===this.state.filterKeys.State.length||"Store"===e&&0===this.state.filterKeys.Area.length||("Area"===e&&this.setState({sOpen:!1,stOpen:!1,aOpen:!this.state.aOpen,showSearch:!1,showFilter:!1}),"State"===e&&this.setState({aOpen:!1,stOpen:!1,sOpen:!this.state.sOpen,showSearch:!1,showFilter:!1}),"Store"===e&&this.setState({sOpen:!1,aOpen:!1,stOpen:!this.state.stOpen,showSearch:!1,showFilter:!1}))}},{key:"onChangeHandle",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(Ce.a)({},a,r),function(){})}},{key:"toggleCustomSearch",value:function(){this.setState({sOpen:!1,aOpen:!1,stOpen:!1,showFilter:!1,showSearch:!this.state.showSearch})}},{key:"toggleResFilter",value:function(){this.setState({showSearch:!1,showFilter:!this.state.showFilter})}},{key:"componentWillReceiveProps",value:function(e){this.setState({area:e.area||{},stores:e.stores||[],filteredList:e.filteredList})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.savedFilterData||{};if(Object(f.isEmpty)(t)||t.user_type!==this.props.userType){var a="admin"===this.props.userType?"general":this.props.userType;this.setState({type:a},function(){e.handleUpdateFilter()})}else this.setState({filterKeys:t.filterKeys,makeFeedbackFilterObj:Object(m.a)({},t.makeFeedbackFilterObj,{start:this.state.startDate,end:this.state.endDate}),makeSummeryFilterObj:Object(m.a)({},t.makeSummeryFilterObj,{start:this.state.startDate,end:this.state.endDate}),type:t.type},function(){e.handleUpdateFilter()});document.addEventListener("click",this.handleFilterOutsideClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleFilterOutsideClick)}},{key:"render",value:function(){var e=this,t=this.state,a=t.filterKeys,r=t.area,n=t.sOpen,o=t.aOpen,l=t.stOpen,i=t.stateTxt,c=t.areaTxt,d=t.storeTxt,u=t.showSearch,p=t.showFilter,h=JSON.parse(localStorage.getItem("states")||"[]").map(function(e){return{label:e.value,value:e.id}});h=_.a.orderBy(h,[function(e){return e.value.toLowerCase()}],["asc"]);var f=[];a.State.forEach(function(e){f.push(e.value)});var b=f.map(function(e){return{state:e,zones:r[e]}}),g=[];a.Area.forEach(function(t){e.state.stores.forEach(function(e){e.data.state===t.state&&e.data.zone_id===t.area_id&&g.push(e)})});var E=_.a.orderBy(g,[function(e){return e.label.toLowerCase()}],["asc"]);return s.a.createElement("div",null,s.a.createElement("section",{className:"con_top"},s.a.createElement("div",{className:"tab_pan-wrap"},s.a.createElement("div",{className:"tab_pan"},s.a.createElement("span",{onClick:function(){return e.handleTypeChange("general")},className:"general"===this.state.type?" active":""},"Grocery"),s.a.createElement("span",{onClick:function(){return e.handleTypeChange("pharmacy")},className:"pharmacy"===this.state.type?" active":""},"Rx"))),s.a.createElement("div",{className:"res_btn"},s.a.createElement("div",{className:"resfilter_btn ".concat(p?"showfilter":""," "),onClick:this.toggleResFilter.bind(this)},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Filter"),s.a.createElement("div",{ref:function(t){return e.nodeResSrchButton=t},className:"searchmod_btn ".concat(u?"showpoint":""," "),onClick:this.toggleCustomSearch.bind(this)},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Search")),s.a.createElement(Je.a,{method:"get",action:"",autoComplete:"off",className:"resfilter_box ".concat(this.state.showFilter?"showfilterbox":"")},s.a.createElement("div",{className:"filter_label"},"Filter by: "),s.a.createElement("div",{ref:function(t){return e.nodeState=t},className:"select-box".concat(n?" sopen":" ")},s.a.createElement("div",{className:"s-result",onClick:function(){return e.handleSelectbox("State")}},s.a.createElement("input",{type:"text",ref:this.stateDropdownInput,autoComplete:"off",placeholder:"State",name:"stateTxt",value:i,onChange:this.onChangeHandle.bind(this)})),s.a.createElement("ul",{className:a.State.length>0?"selected":""},(h||[]).map(function(t,r){var n=a.State.findIndex(function(e){return t.value===e.value});return t.label.toLowerCase().includes(i.toLowerCase())?s.a.createElement("li",{key:"state-l-".concat(r),data:"ignore-state-outer-click",onClick:function(a){n>-1?e.handleRemoveFilter(a,"State",n):e.handleStateChange(a,Object(m.a)({},t))},className:n>-1?"selected":""},t.label):null}))),s.a.createElement("div",{ref:function(t){return e.nodeArea=t},className:"select-box".concat(o?" sopen":" ")},s.a.createElement("div",{className:"s-result ".concat(0===a.State.length?"dis":" "),onClick:function(){return e.handleSelectbox("Area")}},s.a.createElement("input",{type:"text",ref:this.areaDropdownInput,autoComplete:"off",disabled:0===a.State.length,placeholder:"Area",name:"areaTxt",value:c,onChange:this.onChangeHandle.bind(this)})),s.a.createElement("ul",{className:a.Area.length>0?"selected":""},(b||[]).map(function(t,r){return(_.a.orderBy(t.zones,[function(e){return e.delivery_zone_name.toLowerCase()}],["asc"])||[]).map(function(r,n){var o=a.Area.findIndex(function(e){return e.state===t.state&&e.area_id===r.id});return r.delivery_zone_name.toLowerCase().includes(c.toLowerCase())?s.a.createElement("li",{key:"area-l-".concat(n),data:"ignore-area-outer-click",onClick:function(a){o>-1?e.handleRemoveFilter(a,"Area",o):e.handleAreaChange(a,Object(m.a)({},r,{state:t.state}))},className:o>-1?"selected":""},r.delivery_zone_name," (",t.state,")"):null})}))),s.a.createElement("div",{ref:function(t){return e.nodeStore=t},className:"select-box".concat(l?" sopen":" ")},s.a.createElement("div",{className:"s-result ".concat(0===a.Area.length?"dis":" "),onClick:function(){return e.handleSelectbox("Store")}},s.a.createElement("input",{type:"text",ref:this.storeDropdownInput,autoComplete:"off",disabled:0===a.Area.length,placeholder:"Store",name:"storeTxt",value:d,onChange:this.onChangeHandle.bind(this)})),s.a.createElement("ul",{className:a.Store.length>0?"selected":""},(E||[]).map(function(t,r){var n=a.Store.findIndex(function(e){return e.store_id===t.data.store_id});return t.label.toLowerCase().includes(d.toLowerCase())?s.a.createElement("li",{key:"store-l-".concat(r),data:"ignore-store-outer-click",onClick:function(a){n>-1?e.handleRemoveFilter(a,"Store",n):e.handleStoreChange(a,Object(m.a)({},t))},className:n>-1?"selected":""},t.label):null})))),s.a.createElement("div",{className:"search_sec"},s.a.createElement("div",{ref:function(t){return e.nodeSrchButton=t},className:"searchmod_btn ".concat(u?"showpoint":""," "),onClick:this.toggleCustomSearch.bind(this)},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Search"))),s.a.createElement("section",{className:"date_range_section"},s.a.createElement("div",{className:"filter_label"},"Range: "),s.a.createElement("div",{className:"InputFromTo"},s.a.createElement("div",{className:"DayPickerInput"},s.a.createElement(Ft,{selectDate:this.state.startDate,startDate:this.state.startDate,endDate:this.state.endDate,onDateRange:this.onDateRange,onSelectDate:this.onSelectStartDate,noofdays:this.state.noofdays,className:"t_box",placeholder:"Start Date"}))," ",s.a.createElement("span",{className:"to"},"to")," "," ",s.a.createElement("span",{className:"InputFromTo-to"},s.a.createElement("div",{className:"DayPickerInput"},s.a.createElement(Ft,{selectDate:this.state.endDate,startDate:this.state.startDate,endDate:this.state.endDate,onSelectDate:this.onSelectEndDate,onDateRange:this.onDateRange,noofdays:this.state.noofdays,className:"t_box",placeholder:"End Date"}))))),s.a.createElement("div",{className:"liveOrders"},this.props.feedBackCount," Orders"),this.state.filterKeys.State.length>0||this.state.filterKeys.Area.length>0||this.state.filterKeys.Store.length>0?s.a.createElement("section",{className:"filter-tag_section"},this.state.filterKeys.State.length>0?this.state.filterKeys.State.map(function(t,a){return s.a.createElement("span",{key:"state-tag-".concat(a),className:"f-tag"},t.label,s.a.createElement("a",{onClick:function(t){return e.handleRemoveFilter(t,"State",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null,this.state.filterKeys.Area.length>0?this.state.filterKeys.Area.map(function(t,a){return s.a.createElement("span",{key:"area-tag-".concat(a),className:"f-tag"},t.label,s.a.createElement("a",{onClick:function(t){return e.handleRemoveFilter(t,"Area",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null,this.state.filterKeys.Store.length>0?this.state.filterKeys.Store.map(function(t,a){return s.a.createElement("span",{key:"store-tag-".concat(a),className:"f-tag"},t.label,s.a.createElement("a",{onClick:function(t){return e.handleRemoveFilter(t,"Store",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null):null,s.a.createElement("div",{ref:function(t){return e.nodeSearch=t}},s.a.createElement(Ut,{showSearch:u,reply:this.props.reply,isReplying:this.props.isReplying,replyResult:this.props.replyResult,isSearching:this.props.isSearching,type:this.state.type,searchFilter:this.props.searchFilter,searchResultList:this.props.searchResultList})))}}]),t}(s.a.Component),zt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={sOpen:!1,aOpen:!1,stOpen:!1,allRatings:!0,filterByStart:[],advSearchData:{},showSearch:!1,filteredFeedbackData:[]},a.searchFilter=a.searchFilter.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"searchFilter",value:function(e){var t=this;this.setState({advSearchData:e},function(){t.props.feedbackSearch(Object(m.a)({},e))})}},{key:"handleCheckboxFilter",value:function(e,t){var a=this;if(e.persist(),e.target.checked&&"all"===e.target.value)this.setState({allRatings:!0,filterByStart:[],filteredFeedbackData:this.props.feedbackData});else if(this.setState({allRatings:!1}),"all"!==e.target.value){var r=this.state.filterByStart||{},s=r.findIndex(function(t){return t===e.target.value});-1===s?r.push(e.target.value):r.splice(s,1),this.setState({filterByStart:r},function(){var e=_.a.filter(a.props.feedbackData?a.props.feedbackData:[],function(e){return _.a.includes(r,e.rating)});a.setState({filteredFeedbackData:e})})}else this.setState({filterByStart:[],filteredFeedbackData:this.props.feedbackData});0===this.state.filterByStart.length&&this.setState({allRatings:!0,filterByStart:[],filteredFeedbackData:[]},function(){a.setState({filteredFeedbackData:a.props.feedbackData})})}},{key:"changePage",value:function(e){var t=e.currentPage,a=Object(m.a)({},this.props.savedFilterData),r=a.makeFeedbackFilterObj;if(r.page!==t){r.page=t;var s=Object(m.a)({},r,{filter:a});this.props.getFeedback(s)}}},{key:"componentWillReceiveProps",value:function(e){this.setState({filteredFeedbackData:e.feedbackData,feedBackCount:e.feedBackCount})}},{key:"componentWillMount",value:function(){this.props.getLocations()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.type,a=(e.makeFilterObj,e.filterKeys,e.startDate),r=e.endDate,n=(e.noofdays,e.allRatings),o=e.filterByStart,l=e.filteredFeedbackData,i=e.feedBackCount,c=this.props.locations||{},d=c.stores||[],u=c.zones||{},m=this.props.userType||{};this.props.settingsData;return s.a.createElement("main",{className:"dash right_sec feedP".concat("admin"!==m?" noAdmin":"")},this.props.isFilterLoaded&&!Object(f.isEmpty)(this.props.locations)?s.a.createElement(Yt,{userType:this.props.userType,area:u,stores:d,reply:this.props.reply,feedBackCount:i,searchFilter:this.searchFilter,isReplying:this.props.isReplying,replyResult:this.props.replyResult,isSearching:this.props.isSearching,filteredList:this.props.filteredList,getFeedback:this.props.getFeedback,getSummary:this.props.getSummary,savedFilterData:this.props.savedFilterData,searchResultList:this.props.searchResultList||[]}):null,s.a.createElement(Mt,{type:t,endDate:r,startDate:a,allRatings:n,reply:this.props.reply,filterByStart:o,feedBackCount:i,isLoading:this.props.isLoading,isReplying:this.props.isReplying,replyResult:this.props.replyResult,isFiltering:this.props.isFiltering,changePage:this.changePage.bind(this),filteredFeedbackData:l||[],feedbackSummeryData:this.props.feedbackSummeryData||{},handleCheckboxFilter:this.handleCheckboxFilter.bind(this)}))}}]),t}(s.a.Component);zt.defaultProps={feedbackData:[],feedBackCount:0,replyResult:{},searchResultList:[],feedbackSummeryData:{}};var It=Object(h.h)(zt),Wt="GET_SETTINGS",Bt="AUTHENTICATE",Ht=function(e){return{type:Wt,data:e}},Kt=function(e){return{type:"GET_SETTINGS_SUCCESS",data:e}},Gt=function(e){return{type:"GET_SETTINGS_ERROR",data:e}},Vt=function(e){return{type:"AUTHENTICATE_SUCCESS",data:e}},Xt=function(e){return{type:"AUTHENTICATE_ERROR",data:e}},Jt=function(e){return{type:"SYNC_FILTER",data:e}},qt=Object(b.b)(function(e){var t=e.dashboardReducer,a=e.feedbackReducer,r=e.headerReducer,s=a.feedbackData&&a.feedbackData.rows?a.feedbackData.rows:[],n=a.searchResultList&&a.searchResultList.rows?a.searchResultList.rows:[];return{feedbackData:s,feedBackCount:a.feedbackData&&a.feedbackData.count?a.feedbackData.count:0,userType:r.userType,searchResultList:n,isLoading:a.isLoading,locations:t.locations,isFiltering:a.isFiltering,settingsData:r.settingsData,isSearching:a.isSearching,isReplying:a.isReplying,replyResult:a.replyResult,feedbackSummeryData:a.feedbackSummeryData,savedFilterData:r.filterData&&r.filterData.feedback?r.filterData.feedback:{},isFilterLoaded:r.isFilterLoaded}},function(e){return{reply:function(t){return e(function(e){return{type:pt,data:e}}(t))},getSummary:function(t){return e(function(e){return{type:dt,data:e}}(t))},getFeedback:function(t){return e(function(e){return{type:ut,data:e}}(t))},feedbackSearch:function(t){return e(function(e){return{type:mt,data:e}}(t))},getSettings:function(t){return e(Ht(t))},getLocations:function(t){return e(w(t))}}})(Object(h.h)(function(e){var t=e.reply,a=e.isLoading,r=e.isReplying,n=e.replyResult,o=e.locations,l=e.userType,i=e.settingsData,c=e.getSettings,d=e.getSummary,u=e.getFeedback,m=e.isFiltering,p=e.isSearching,h=e.getLocations,f=e.feedbackData,_=e.feedBackCount,b=e.feedbackSearch,g=e.savedFilterData,E=e.searchResultList,v=e.feedbackSummeryData,y=e.isFilterLoaded;return s.a.createElement(It,{reply:t,isReplying:r,replyResult:n,getSettings:c,getSummary:d,getFeedback:u,feedbackSearch:b,userType:l,settingsData:i,savedFilterData:g,getLocations:h,feedbackData:f,feedBackCount:_,feedbackSummeryData:v,searchResultList:E,locations:o,isLoading:a,isFiltering:m,isSearching:p,isFilterLoaded:y})})),Zt=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(qt,null))}}]),t}(r.Component),$t=Object(h.h)(Zt),Qt="GET_INFO",ea="GET_STORES",ta="UPDATE_PROFILE",aa="CHANGE_PASS",ra="ADD_LOCATION",sa="EDIT_STORE",na="DELETE_STORE",oa="GET_USER",la="ADD_USER",ia="EDIT_USER",ca="DELETE_USER",da="SUSPEND_USER",ua=function(e){return{type:"GET_INFO_ERROR",data:e}},ma=function(e){return{type:"GET_INFO_SUCCESS",data:e}},pa=function(e){return{type:ea,data:e}},ha=function(e){return{type:"GET_STORES_ERROR",data:e}},fa=function(e){return{type:"GET_STORES_SUCCESS",data:e}},_a=function(e){return{type:"UPDATE_PROFILE_ERROR",data:e}},ba=function(e){return{type:"UPDATE_PROFILE_SUCCESS",data:e}},ga=function(e){return{type:"CHANGE_PASS_ERROR",data:e}},Ea=function(e){return{type:"CHANGE_PASS_SUCCESS",data:e}},va=function(e){return{type:"ADD_LOCATION_ERROR",data:e}},ya=function(e){return{type:"ADD_LOCATION_SUCCESS",data:e}},ka=function(e){return{type:"EDIT_STORE_ERROR",data:e}},Sa=function(e){return{type:"EDIT_STORE_SUCCESS",data:e}},Oa=function(e){return{type:"DELETE_STORE_ERROR",data:e}},Da=function(e){return{type:"DELETE_STORE_SUCCESS",data:e}},ja=function(e){return{type:"GET_USER_ERROR",data:e}},Ca=function(e){return{type:"GET_USER_SUCCESS",data:e}},wa=function(e){return{type:"ADD_USER_ERROR",data:e}},Ta=function(e){return{type:"ADD_USER_SUCCESS",data:e}},xa=function(e){return{type:"EDIT_USER_ERROR",data:e}},Na=function(e){return{type:"EDIT_USER_SUCCESS",data:e}},Ra=function(e){return{type:"DELETE_USER_ERROR",data:e}},Pa=function(e){return{type:"DELETE_USER_SUCCESS",data:e}},La=function(e){return{type:"SUSPEND_USER_ERROR",data:e}},Aa=function(e){return{type:"SUSPEND_USER_SUCCESS",data:e}},Ma=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleProfileSubmit=function(e){e.preventDefault();var t=Object(m.a)({},a.state.formData)||{};delete t.show_report,a.validate().isError||a.props.updateProfile(t)},a.changeHandle=function(e){var t=e.target.name,r=e.target.value;a.setState({formData:Object(m.a)({},a.state.formData,Object(Ce.a)({},t,r))})},a.validate=function(){var e=a.state.formData||{},t=Object(m.a)({},a.defaultError),r=!1;return e.first_name||(t.first_name=!0,r=!0),e.last_name||(t.last_name=!0,r=!0),e.email||(t.email=!0,r=!0),{isError:r,errors:t}},a.defaultError={first_name:!1,last_name:!1,email:!1},a.state={formData:{first_name:"",last_name:"",email:""}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getInfo()}},{key:"componentWillReceiveProps",value:function(e){Object(f.isEmpty)(e.profileData)||Object(f.isEqual)(e.profileData,this.props.profileData)||this.setState({formData:Object(m.a)({},e.profileData)})}},{key:"render",value:function(){var e=this.state.formData||{},t=this.validate(),a=t.errors||{},r=t.isError;return s.a.createElement("div",{className:"merchant_box"},s.a.createElement("form",{onSubmit:this.handleProfileSubmit},s.a.createElement("h4",null,"Personal Info"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"rname"},"First Name"),s.a.createElement("input",{type:"text",autoComplete:"off",placeholder:"Enter first name",className:"t_box".concat(a.first_name?" error":""),name:"first_name",value:e.first_name,onChange:this.changeHandle})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"rname"},"Last Name"),s.a.createElement("input",{type:"text",autoComplete:"off",placeholder:"Enter last name",className:"t_box".concat(a.last_name?" error":""),name:"last_name",value:e.last_name,onChange:this.changeHandle})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"rname"},"Email"),s.a.createElement("input",{type:"email",autoComplete:"off",placeholder:"Enter Email",className:"t_box".concat(a.email?" error":""),name:"email",value:e.email,onChange:this.changeHandle})),s.a.createElement("div",{className:"text-right"},s.a.createElement("button",{type:"submit",disabled:r||this.props.isProcessing,variant:"primary",className:"btn btn-secondary".concat(r||this.props.isProcessing?"":" active")},this.props.isProcessing?"Processing":"Submit"))))}}]),t}(r.Component),Fa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(m.a)({},a.state.formData)||{};delete t.conf_password,a.validate().isError||a.props.changePassword(t)},a.changeHandle=function(e){var t=e.target.name,r=e.target.value;a.setState({formData:Object(m.a)({},a.state.formData,Object(Ce.a)({},t,r))})},a.validate=function(){var e=a.state.formData||{},t=Object(m.a)({},a.defaultError),r=!1;return e.password||(t.password=!0,r=!0),e.conf_password||(t.conf_password=!0,r=!0),e.password&&e.conf_password&&e.password!==e.conf_password&&(t.conf_password=!0,r=!0),{isError:r,errors:t}},a.defaultError={password:!1,property:!1},a.state={formData:{password:"",conf_password:""}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.isProcessing&&!e.isProcessing&&this.setState({formData:{password:"",conf_password:""}})}},{key:"render",value:function(){var e=this.state.formData||{},t=this.validate(),a=t.errors,r=t.isError;return s.a.createElement("div",{className:"merchant_box"},s.a.createElement("h4",null,"Password"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"rname"},"New Password"),s.a.createElement("input",{type:"Password",autoComplete:"off",placeholder:"Enter new password",className:"t_box".concat(a.password?" error":""),name:"password",value:e.password,onChange:this.changeHandle})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"rname"},"Confirm New Password"),s.a.createElement("input",{type:"password",autoComplete:"off",placeholder:"Re-enter new password",className:"t_box".concat(a.conf_password?" error":""),name:"conf_password",value:e.conf_password,onChange:this.changeHandle})),s.a.createElement("div",{className:"text-right"},s.a.createElement("button",{type:"submit",disabled:r||this.props.isProcessing,variant:"primary",className:"btn btn-secondary".concat(r||this.props.isProcessing?"":" active")},this.props.isProcessing?"Processing":"Submit"))))}}]),t}(r.Component),Ua=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1,x:0,y:0},a.contextDiv=s.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",function(t){t.stopPropagation(),e.props.hideContextMenu()})}},{key:"componentWillReceiveProps",value:function(e){this.setState({visible:e.visible,x:e.x,y:e.y,store:e.store})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",function(){})}},{key:"render",value:function(){var e=this,t={position:"absolute",top:"".concat(this.state.y,"px"),left:"".concat(this.state.x+5,"px")},a=this.props.store||{};return Object(f.isEmpty)(this.props.store)?null:s.a.createElement("div",{id:"cmenu",ref:this.contextDiv},this.state.visible?s.a.createElement("div",{className:"custom-context",id:"text",style:t},s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",onClick:function(){return e.props.edit(a)}},"Edit"),s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",onClick:function(){return e.props.delete(a.id)}},"Delete")):null)}}]),t}(r.Component),Ya=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleAddressChange=function(e){a.setState({invalidAddress:!e,formData:Object(m.a)({},a.state.formData,{address:e}),location:{}})},a.handleAddressSelect=function(e){var t=me()().unix(),r=Object(Q.a)(Object(Q.a)(a)),s={zipcode:"",state_code:"",latitude:"",longitude:"",address:""};Object(Le.geocodeByAddress)(e).then(function(e){return s.address=e[0].formatted_address||"",s.place_id=e[0].place_id,Object(Le.getLatLng)(e[0])}).then(function(e){var n=e.lat,o=e.lng,l="";fetch("https://maps.googleapis.com/maps/api/timezone/json?location=".concat(n,",").concat(o,"&timestamp=").concat(t,"&key=AIzaSyCwMjYiTDbntZTUuxDczjOTH3Mk1vD-9_w")).then(function(e){return e.json()}).then(function(e){l=e.timeZoneId;if(/(\d+) (.+?), (.+?), (.+?) ([0-9]{5})/g.test(s.address)){a.props.deliveryAddress;var t=be(s.address);!Object(f.isEmpty)(t)&&t.validAdrs?(s.latitude=n,s.longitude=o,s.address=t.address,s.zipcode=t.zipcode,s.state_code=t.state_code,s.city=t.city,s.country=t.country,s.number=t.number,s.street=t.street,s.timezone=l,r.setState({invalidAddress:!1,location:s,formData:Object(m.a)({},r.state.formData,{address:s.address})})):(Oe("Oops, that does not seem like a valid address. Please try again."),r.setState({location:{},invalidAddress:!0,formData:Object(m.a)({},a.state.formData,{address:""})}))}else Oe("Oops, that does not seem like a valid address. Please try again."),r.setState({location:{},invalidAddress:!0,formData:Object(m.a)({},a.state.formData,{address:""})})})}).catch(function(e){r.setState({location:{},invalidAddress:!0,formData:Object(m.a)({},a.state.formData,{address:""})})})},a.onChangeHandle=function(e){Object(Q.a)(Object(Q.a)(a));var t=Object(m.a)({},a.state.formData),r=e.target.name,s=e.target.value;t[r]=s,a.setState({formData:t})},a.handleEditStore=function(e){e.preventDefault();var t=Object(m.a)({},a.state.location),r=Object(m.a)({},a.state.formData),s=Object(m.a)({},a.props.selStore),n={address:t.address,number:t.number,street:t.street,city:t.city,state:t.state_code,country:t.country,postalCode:t.zipcode,latitude:t.latitude,longitude:t.longitude,timeZone:t.timezone,phone:r.phone,store:r.store,note:r.note,place_id:t.place_id,store_id:r.store_id,sms:s.sms,id:s.id};a.props.editStore(n)},a.errors={store:!1,address:!1,phone:!1,store_id:!1,note:!1,invalidAddress:!1},a.state={formData:{phone:"",store:"",note:"",store_id:"",address:""},location:{}},a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a.handleAddressChange=a.handleAddressChange.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(this.setState({show:e.show}),!Object(f.isEqual)(e.selStore,this.props.selStore)){var t=e.selStore||{};this.setState({formData:{phone:t.phone,store:t.store,note:t.note,store_id:t.store_id,address:t.address},location:{longitude:t.longitude,latitude:t.latitude,address:t.address,zipcode:t.postalCode,state_code:t.state,city:t.city,country:t.country,number:t.number,street:t.street,timezone:t.timeZone}})}e.isProcessing||e.isProcessing===this.props.isProcessing||this.props.handleClose()}},{key:"handleClose",value:function(){this.setState({show:!1}),this.props.handleClose()}},{key:"validateForm",value:function(){var e=this.state.formData||{},t={store:!1,address:!1,phone:!1,store_id:!1,note:!1},a=!1;return e.store||(t.store=!0,a=!0),e.store_id||(t.store_id=!0,a=!0),e.address&&!Object(f.isEmpty)(this.state.location)||(t.address=!0,a=!0),e.phone||(t.phone=!0,a=!0),e.phone&&(10!==e.phone.length||isNaN(e.phone))&&(t.phone=!0,a=!0),e.phone&&e.phone<1&&(t.phone=!0,a=!0),{isError:a,errors:t}}},{key:"render",value:function(){var e=this.props.show||!1,t=this.state.formData||{},a=this.validateForm(),r=a.isError,n=a.errors||{},o={input:{width:"260px",padding:"0px 15px 0px 35px",color:"#333",margin:"0"},autocompleteContainer:{borderRadius:"0 0 3px 3px",zIndex:"999",background:"url(/static/images/pow_google.jpg) no-repeat right bottom #fff",position:"relative",border:"1px solid #e8e8e8",boxShadow:"1px 5px 10px rgba(68,68,68,0.2)"},autocompleteItem:Object(Ce.a)({textAlign:"left",fontSize:"12px",padding:"5px 8px 5px 30px",lineHeight:"20px",color:"#999",background:"10px 8px #fff",margin:"0",borderTop:"none",borderBottom:"1px solid #ccc"},"background","url(/static/images/location_google.png) no-repeat 10px 8px #fff"),autocompleteItemActive:{color:"#E44500"}};return s.a.createElement(Ne.a,{size:"md",className:"c-modal",data:"ignore-outer-click",show:e,onHide:this.props.handleClose},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Edit Location")),s.a.createElement("form",{onSubmit:this.handleEditStore},s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"delivery"},"Store"),s.a.createElement("input",{type:"text",placeholder:"Enter Store",className:"t_box".concat(n.store?" error":""),name:"store",onChange:this.onChangeHandle,value:t.store})),s.a.createElement("div",{className:"form-group pr"},s.a.createElement("label",{htmlFor:"address"},"Address"),s.a.createElement(Ae.a,{value:t.address,onChange:this.handleAddressChange,onSelect:this.handleAddressSelect,styles:o},function(e){var t=e.getInputProps,a=e.suggestions,r=e.getSuggestionItemProps,o=e.loading;return s.a.createElement("div",null,s.a.createElement("input",t({placeholder:"Enter Address",className:"t_box".concat(n.address?" error":"")})),s.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&s.a.createElement("div",null,"Loading..."),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return s.a.createElement("div",r(e,{className:t,style:a}),s.a.createElement("span",null,e.description))})))})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"phone"},"Phone"),s.a.createElement("input",{type:"text",placeholder:"Enter Phone No",className:"t_box".concat(n.phone?" error":""),name:"phone",onChange:this.onChangeHandle,value:t.phone})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"store-id"},"Store ID"),s.a.createElement("input",{type:"text",className:"t_box".concat(n.store_id?" error":""),name:"store_id",onChange:this.onChangeHandle,value:t.store_id})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"notes"},"Driver Notes"),s.a.createElement("input",{type:"text",className:"t_box",name:"note",onChange:this.onChangeHandle,value:t.note}))))),s.a.createElement(Ne.a.Footer,null,s.a.createElement(xe.a,{type:"submit",disabled:r||!!this.props.isProcessing,className:this.props.isProcessing||r?"":"active",variant:"primary"},this.props.isProcessing?"Processing..":"Submit"))))}}]),t}(r.Component),za=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleContextMenu=function(e,t){e.preventDefault();var r=e.clientX,s=e.pageY;a.setState({visible:!0,x:r,y:s,store:t})},a.hideContextMenu=function(){a.setState({visible:!1,x:0,y:0,store:""})},a.editStore=function(e){a.setState({show:!0,selStore:e})},a.deleteStore=function(e){window.confirm("Do you really want to delete this store?")&&a.props.deleteStore(e)},a.handleClose=function(){a.setState({show:!1})},a.state={visible:!1,x:"",y:"",store:{},selStore:{}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getStores()}},{key:"render",value:function(){var e=this,t=this.props.storesList||[];return s.a.createElement("div",{className:"stores_pan"},s.a.createElement("div",{className:"table_sec"},this.props.isLoading?s.a.createElement("div",{className:"loader"},"Loading...."):s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"4",className:"t-titel"},s.a.createElement("div",{className:"status_count"},s.a.createElement("span",{className:"g_total"},"Total Stores: ",t.length))))),s.a.createElement("tbody",null,s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",null,"Store"),s.a.createElement("th",null,"Address"),s.a.createElement("th",null,"Phone"),s.a.createElement("th",null,"Notes")),t.length>0?t.map(function(t,a){return s.a.createElement("tr",{key:a,onContextMenu:function(a){return e.handleContextMenu(a,t)}},s.a.createElement("td",null,t.store),s.a.createElement("td",{className:"acell"},s.a.createElement("label",null,t.address),s.a.createElement("span",{className:"tTip"},t.address)),s.a.createElement("td",null,t.phone),s.a.createElement("td",{className:"acell"}," ",t.note?s.a.createElement("span",{className:"tTip"},t.note):""," ",s.a.createElement("label",null,t.note)))}):s.a.createElement("tr",{className:"no-records"},s.a.createElement("td",{style:{textAlign:"center"},colSpan:"4"},"No Records"))))),s.a.createElement(Ua,{visible:this.state.visible,x:this.state.x,y:this.state.y,store:this.state.store,edit:this.editStore,delete:this.deleteStore,hideContextMenu:this.hideContextMenu}),s.a.createElement(Ya,{show:this.state.show,handleClose:this.handleClose,isProcessing:this.props.isProcessing,editStore:this.props.editStore,selStore:this.state.selStore}))}}]),t}(r.Component),Ia=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleAddressChange=function(e){a.setState({invalidAddress:!e,formData:Object(m.a)({},a.state.formData,{address:e}),location:{}})},a.handleAddressSelect=function(e){var t=me()().unix(),r=Object(Q.a)(Object(Q.a)(a)),s={zipcode:"",state_code:"",latitude:"",longitude:"",address:""};Object(Le.geocodeByAddress)(e).then(function(e){return s.address=e[0].formatted_address||"",s.place_id=e[0].place_id,Object(Le.getLatLng)(e[0])}).then(function(e){var n=e.lat,o=e.lng,l="";fetch("https://maps.googleapis.com/maps/api/timezone/json?location=".concat(n,",").concat(o,"&timestamp=").concat(t,"&key=AIzaSyCwMjYiTDbntZTUuxDczjOTH3Mk1vD-9_w")).then(function(e){return e.json()}).then(function(e){l=e.timeZoneId;if(/(\d+) (.+?), (.+?), (.+?) ([0-9]{5})/g.test(s.address)){a.props.deliveryAddress;var t=be(s.address);!Object(f.isEmpty)(t)&&t.validAdrs?(s.latitude=n,s.longitude=o,s.address=t.address,s.zipcode=t.zipcode,s.state_code=t.state_code,s.city=t.city,s.country=t.country,s.number=t.number,s.street=t.street,s.timezone=l,r.setState({invalidAddress:!1,location:s,formData:Object(m.a)({},r.state.formData,{address:s.address})})):(Oe("Oops, that does not seem like a valid address. Please try again."),r.setState({location:{},invalidAddress:!0,formData:Object(m.a)({},a.state.formData,{address:""})}))}else Oe("Oops, that does not seem like a valid address. Please try again."),r.setState({location:{},invalidAddress:!0,formData:Object(m.a)({},a.state.formData,{address:""})})})}).catch(function(e){r.setState({location:{},invalidAddress:!0,formData:Object(m.a)({},a.state.formData,{address:""})})})},a.onChangeHandle=function(e){Object(Q.a)(Object(Q.a)(a));var t=Object(m.a)({},a.state.formData),r=e.target.name,s=e.target.value;t[r]=s,a.setState({formData:t})},a.handleCreateLocation=function(e){e.preventDefault();var t=Object(m.a)({},a.state.location),r=Object(m.a)({},a.state.formData),s={address:t.address,number:t.number,street:t.street,city:t.city,state:t.state_code,country:t.country,postalCode:t.zipcode,latitude:t.latitude,longitude:t.longitude,timeZone:t.timezone,phone:r.phone,store:r.store,note:r.note,place_id:t.place_id,store_id:r.store_id};a.props.addLocation(s)},a.errors={store:!1,address:!1,phone:!1,store_id:!1,note:!1,invalidAddress:!1},a.state={formData:{phone:"",store:"",note:"",store_id:"",address:""},location:{}},a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a.handleAddressChange=a.handleAddressChange.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show}),e.isProcessing||e.isProcessing===this.props.isProcessing||this.handleClose()}},{key:"handleClose",value:function(){this.errors={store:!1,address:!1,phone:!1,store_id:!1,note:!1,invalidAddress:!1},this.setState({show:!1,formData:{phone:"",store:"",note:"",store_id:"",address:""},location:{}}),this.props.handleClose()}},{key:"validateForm",value:function(){var e=this.state.formData||{},t={store:!1,address:!1,phone:!1,store_id:!1,note:!1},a=!1;return e.store||(t.store=!0,a=!0),e.store_id||(t.store_id=!0,a=!0),e.address&&!Object(f.isEmpty)(this.state.location)||(t.address=!0,a=!0),e.phone||(t.phone=!0,a=!0),e.phone&&(10!==e.phone.length||isNaN(e.phone))&&(t.phone=!0,a=!0),e.phone&&e.phone<1&&(t.phone=!0,a=!0),{isError:a,errors:t}}},{key:"render",value:function(){var e=this.props.show||!1,t=this.state.formData||{},a=this.validateForm(),r=a.isError,n=a.errors||{},o={input:{width:"260px",padding:"0px 15px 0px 35px",color:"#333",margin:"0"},autocompleteContainer:{borderRadius:"0 0 3px 3px",zIndex:"999",background:"url(/static/images/pow_google.jpg) no-repeat right bottom #fff",position:"relative",border:"1px solid #e8e8e8",boxShadow:"1px 5px 10px rgba(68,68,68,0.2)"},autocompleteItem:Object(Ce.a)({textAlign:"left",fontSize:"12px",padding:"5px 8px 5px 30px",lineHeight:"20px",color:"#999",background:"10px 8px #fff",margin:"0",borderTop:"none",borderBottom:"1px solid #ccc"},"background","url(/static/images/location_google.png) no-repeat 10px 8px #fff"),autocompleteItemActive:{color:"#E44500"}};return s.a.createElement(Ne.a,{size:"md",className:"c-modal",data:"ignore-outer-click",show:e,onHide:this.handleClose},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Add Store")),s.a.createElement("form",{onSubmit:this.handleCreateLocation},s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"delivery"},"Store"),s.a.createElement("input",{type:"text",placeholder:"Enter Store",className:"t_box".concat(n.store?" error":""),name:"store",onChange:this.onChangeHandle,value:t.store})),s.a.createElement("div",{className:"form-group pr"},s.a.createElement("label",{htmlFor:"address"},"Address"),s.a.createElement(Ae.a,{value:t.address,onChange:this.handleAddressChange,onSelect:this.handleAddressSelect,styles:o},function(e){var t=e.getInputProps,a=e.suggestions,r=e.getSuggestionItemProps,o=e.loading;return s.a.createElement("div",null,s.a.createElement("input",t({placeholder:"Enter Address",className:"t_box".concat(n.address?" error":"")})),s.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&s.a.createElement("div",null,"Loading..."),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return s.a.createElement("div",r(e,{className:t,style:a}),s.a.createElement("span",null,e.description))})))})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"phone"},"Phone"),s.a.createElement("input",{type:"text",placeholder:"Enter Phone No",className:"t_box".concat(n.phone?" error":""),name:"phone",onChange:this.onChangeHandle,value:t.phone})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"store-id"},"Store ID"),s.a.createElement("input",{type:"text",className:"t_box".concat(n.store_id?" error":""),name:"store_id",onChange:this.onChangeHandle,value:t.store_id})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"notes"},"Driver Notes"),s.a.createElement("input",{type:"text",className:"t_box",name:"note",onChange:this.onChangeHandle,value:t.note}))))),s.a.createElement(Ne.a.Footer,null,s.a.createElement(xe.a,{type:"submit",disabled:r||!!this.props.isProcessing,className:this.props.isProcessing||r?"":"active",variant:"primary"},this.props.isProcessing?"Processing..":"Submit"))))}}]),t}(r.Component),Wa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1,x:0,y:0},a.contextDiv=s.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",function(t){t.stopPropagation(),e.props.hideContextMenu()})}},{key:"componentWillReceiveProps",value:function(e){this.setState({visible:e.visible,x:e.x,y:e.y,itemObj:e.itemObj})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",function(){})}},{key:"render",value:function(){var e=this,t={position:"absolute",top:"".concat(this.state.y,"px"),left:"".concat(this.state.x+5,"px")};return Object(f.isEmpty)(this.state.itemObj)?null:s.a.createElement("div",{id:"cmenu",ref:this.contextDiv},this.state.visible?s.a.createElement("div",{className:"custom-context",id:"text",style:t},s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",onClick:function(){return e.props.handleShowUserModel("EDIT",e.state.itemObj.id)}},"Edit User"),s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",onClick:function(){return e.props.handleShowUserModel("DELETE",e.state.itemObj.id)}},"Delete User"),"true"===this.state.itemObj.active?s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",onClick:function(){return e.props.handleShowUserModel("SUSPEND",e.state.itemObj.id)}},"Suspended User"):s.a.createElement("div",{data:"ignore-outer-click",className:"custom-context-item",style:{color:"#B6B6B6"}},"Suspended User")):null)}}]),t}(r.Component),Ba=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).hideContextMenu=function(){a.setState({visible:!1,x:0,y:0})},a.state={x:"",y:"",itemObj:null,visible:!1},a.handleContextMenu=a.handleContextMenu.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleContextMenu",value:function(e,t){e.preventDefault();var a=e.clientX,r=e.pageY;this.setState({visible:!0,x:a,y:r,itemObj:t})}},{key:"render",value:function(){var e=this,t=this.props.usersList||{},a=t.count||0,r=t.active_count||0,n=t.inactive_count||0,o=t&&t.users||[];return s.a.createElement("div",{className:"users_pan"},s.a.createElement(Wa,{visible:this.state.visible,x:this.state.x,y:this.state.y,itemObj:this.state.itemObj,hideContextMenu:this.hideContextMenu,handleShowUserModel:this.props.handleShowUserModel}),s.a.createElement("div",{className:"table_sec"},this.props.isLoading?s.a.createElement("div",{className:"loader"},"Loading...."):s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"6",className:"t-titel"},s.a.createElement("div",{className:"status_count"},s.a.createElement("span",{className:"g_total"},"Total Users: ",a),s.a.createElement("span",{className:"g_users"},"Active Users: ",r),s.a.createElement("span",{className:"g_users"},"Suspended Users: ",n))))),s.a.createElement("tbody",null,s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",null,"First Name"),s.a.createElement("th",null,"Last Name"),s.a.createElement("th",null,"Email"),s.a.createElement("th",{style:{textAlign:"left"}},"Last Login: Date/Time"),s.a.createElement("th",null,"User Type"),s.a.createElement("th",null,"Suspended")),o.length>0?o.map(function(t,a){var r=me()(t.created_at).format("MM/DD - hh:mma");return s.a.createElement("tr",{key:a,className:"false"===t.active?"dis":"",onContextMenu:function(a){return e.handleContextMenu(a,t)}},s.a.createElement("td",null,t.first_name),s.a.createElement("td",null,t.last_name),s.a.createElement("td",null,t.email),s.a.createElement("td",{style:{textAlign:"left"}},r),s.a.createElement("td",{style:{textTransform:"capitalize"}},t.user_type),s.a.createElement("td",null,"true"===t.active?"False":"True"))}):s.a.createElement("tr",{className:"no-records"},s.a.createElement("td",{style:{textAlign:"center"},colSpan:"6"},"No Records")))))))}}]),t}(r.Component),Ha=a(1012),Ka=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={values:{},errors:{}},a.handleSubmit=a.handleSubmit.bind(Object(Q.a)(Object(Q.a)(a))),a.handleChange=a.handleChange.bind(Object(Q.a)(Object(Q.a)(a))),a.handleChecked=a.handleChecked.bind(Object(Q.a)(Object(Q.a)(a))),a.handleValidation=a.handleValidation.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleValidation",value:function(){var e=!1,t=this.state.values,a=this.state.errors;if(t.first_name||(e=!0,a.first_name="First name is required."),t.last_name||(e=!0,a.last_name="Last name is required."),t.email){if(t.email){/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(t.email)||(e=!0,a.email="Please enter a valid email address.")}}else e=!0,a.email="Email is required.";return t.user_type||(e=!0,a.user_type="User type is required."),this.setState({errors:a}),e}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value,s=this.state.values;s[a]=r;var n=Object(m.a)({},this.state.errors);n[a]="",this.setState({values:s,errors:n})}},{key:"handleChecked",value:function(e){var t=e.target,a=t.name,r=t.checked,s=this.state.values;s[a]=r,this.setState({values:s})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.values.id||null;if(this.handleValidation())return!1;var a=Object(m.a)({},this.state.values);if(a.active=a.active.toString(),a.show_report=a.show_report.toString(),t)this.props.updateUserData(a);else{var r=xt("foodjets_merchant")||{};a.org_id=r.org_id,a.org_name=r.org_name,a.org_user_email=r.org_email,this.props.addUserData(a)}}},{key:"componentWillReceiveProps",value:function(e){this.setState({values:e.initialData,errors:e.initialUserErrorData})}},{key:"render",value:function(){var e=this,t=!1,a=this.state,r=a.errors,n=a.values;return!(Object(f.isEmpty)(r.first_name)&&Object(f.isEmpty)(r.last_name)&&Object(f.isEmpty)(r.email)&&Object(f.isEmpty)(r.user_type))||Object(f.isEmpty)(n.first_name)||Object(f.isEmpty)(n.last_name)||Object(f.isEmpty)(n.email)||Object(f.isEmpty)(n.user_type)||(t=!0),s.a.createElement(Ne.a,{size:"md",className:"c-modal",data:"ignore-outer-click",show:this.props.show,onHide:function(){e.props.handleShowUserModel("CLOSE")}},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"EDIT"===this.props.action?"Edit User":"Add User")),s.a.createElement(Je.a,{autoComplete:"off",onSubmit:this.handleSubmit},s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"first_name"},"First Name"),s.a.createElement("input",{type:"text",placeholder:"Enter First Name",className:r.first_name?"t_box error":"t_box",name:"first_name",onChange:this.handleChange,value:n.first_name}),r.first_name&&s.a.createElement(Ha.a,{style:{display:"block"}}," ",r.first_name)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"last_name"},"Last Name"),s.a.createElement("input",{type:"text",placeholder:"Enter Last Name",className:r.last_name?"t_box error":"t_box",name:"last_name",onChange:this.handleChange,value:n.last_name}),r.last_name&&s.a.createElement(Ha.a,{style:{display:"block"}}," ",r.last_name)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("input",{type:"email",placeholder:"Enter Email",className:r.email?"t_box error":"t_box",name:"email",onChange:this.handleChange,value:n.email}),r.email&&s.a.createElement(Ha.a,{style:{display:"block"}}," ",r.email)),s.a.createElement("div",{className:"form-group dselect"},s.a.createElement("label",{htmlFor:"user_type"},"User Type"),s.a.createElement("select",{className:r.user_type?"s_box error":"s_box",name:"user_type",onChange:this.handleChange,value:n.user_type},s.a.createElement("option",{value:""},"-- Select User Type --"),s.a.createElement("option",{key:1,value:"general"},"General"),s.a.createElement("option",{key:2,value:"pharmacy"},"Pharmacy"),s.a.createElement("option",{key:3,value:"admin"},"Admin")),r.user_type&&s.a.createElement(Ha.a,{style:{display:"block"}}," ",r.user_type)),n.user_type&&"admin"===n.user_type?s.a.createElement("div",{className:"form-group"},s.a.createElement("span",{className:"c_boxgroup sreport"},s.a.createElement("label",{htmlFor:"show_report"},"Show Report"),s.a.createElement("input",{type:"checkbox",id:"show_report",name:"show_report",className:"c_box",onChange:this.handleChecked,checked:n.show_report}))):null))),s.a.createElement(Ne.a.Footer,null,s.a.createElement(xe.a,{type:"submit",className:t?"active":"",variant:"primary",disabled:!!this.props.isUserUpdating},this.props.isUserUpdating?"Processing..":"Confirm"))))}}]),t}(r.Component),Ga=a(292),Va=(a(966),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleShowLocation=function(){a.setState({show:!0})},a.select=function(e){a.setState({type:e},function(){"Users"===e&&a.props.getUsers()})},a.handleClose=function(){a.setState({show:!1})},a.state={type:"General",show:!1,showUserModel:!1,userAction:null,initialUserErrorData:{first_name:"",last_name:"",email:"",user_type:""},initialUserData:{first_name:"",last_name:"",email:"",user_type:"general",active:!0,show_report:!1}},a.handleShowUserModel=a.handleShowUserModel.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleShowUserModel",value:function(e,t){var a=this;if(t=t||null,"ADD"===(e=e||null))this.setState({userAction:e,showUserModel:!0,initialUserErrorData:{first_name:"",last_name:"",email:"",user_type:""},initialUserData:{first_name:"",last_name:"",email:"",user_type:"general",active:!0,show_report:!1}});else if("EDIT"===e){var r=this.props.usersList||{},s=r&&r.users||[],n=_.a.find(s,{id:t});if("object"===typeof n){var o=_.a.pick(n,["id","first_name","last_name","email","user_type","active","show_report"]);o.active="true"===o.active,o.show_report="true"===o.show_report,this.setState({userAction:e,showUserModel:!0,initialUserData:o,initialUserErrorData:{first_name:"",last_name:"",email:"",user_type:""}})}else console.log("The document not found")}else"SUSPEND"===e?Object(Ga.confirmAlert)({title:"Suspend this user's account?",message:"This user will not be able to access their account until their account is reinstated.",closeOnClickOutside:!1,buttons:[{label:"Cancel",onClick:function(){return console.log("Click No")}},{label:"Suspend",onClick:function(){var e=a.props.usersList||{},r=e&&e.users||[],s=_.a.find(r,{id:t});if("object"===typeof s){var n=_.a.pick(s,["id","first_name","last_name","email","user_type","show_report"]);n.active="false",a.props.suspendUser(n)}else console.log("The document not found")}}]}):"DELETE"===e?Object(Ga.confirmAlert)({title:"Delete this user's account?",message:"Deleting an account will permanently removed it from your database.",closeOnClickOutside:!1,buttons:[{label:"Cancel",onClick:function(){return console.log("Click No")}},{label:"Delete",onClick:function(){a.props.deleteUser(t)}}]}):"CLOSE"===e&&this.setState({userAction:e,showUserModel:!1})}},{key:"componentWillReceiveProps",value:function(e){e.isUserUpdating&&e.isUserUpdating!==this.props.isUserUpdating&&this.handleShowUserModel("CLOSE")}},{key:"render",value:function(){var e=this,t=this.props.userType,a=this.state,r=a.type,n=a.showUserModel,o=a.userAction,l=a.initialUserData,i=a.initialUserErrorData;return s.a.createElement("main",{className:"dash right_sec settingp"},s.a.createElement("section",{className:"con_top"},t&&"admin"===t?s.a.createElement("ul",{className:"settingtmenu"},s.a.createElement("li",{className:"General"===r?"active":"",onClick:function(){return e.select("General")}},s.a.createElement("img",{src:"/assets/general_ico.svg",alt:"Stores"})," General"),s.a.createElement("li",{className:"Users"===r?"active":"",onClick:function(){return e.select("Users")}},s.a.createElement("img",{src:"/assets/useres_ico.svg",alt:"Stores"})," Users"),s.a.createElement("li",{className:"Stores"===r?"active":"",onClick:function(){return e.select("Stores")}},s.a.createElement("img",{src:"/assets/stores_ico.svg",alt:"Stores"})," Stores")):s.a.createElement("ul",{className:"settingtmenu"},s.a.createElement("li",{className:"General"===r?"active":"",onClick:function(){return e.select("General")}},s.a.createElement("img",{src:"/assets/general_ico.svg",alt:"Stores"})," General")),"Stores"===this.state.type?s.a.createElement("button",{onClick:this.handleShowLocation,type:"button",className:"btn btn_blue userbtn"},"Add Store ",s.a.createElement("img",{src:"/assets/plus.svg",alt:""})):null,"Users"===this.state.type?s.a.createElement("button",{onClick:function(){e.handleShowUserModel("ADD")},type:"button",className:"btn btn_blue userbtn"},"Add User ",s.a.createElement("img",{src:"/assets/plus.svg",alt:""})):null,s.a.createElement(Ia,{show:this.state.show,handleClose:this.handleClose,isProcessing:this.props.isLocProcessing,addLocation:this.props.addLocation}),s.a.createElement(Ka,{action:o,isUserUpdating:this.props.isUserUpdating,addUserData:this.props.addUser,updateUserData:this.props.editUser,show:n,handleShowUserModel:this.handleShowUserModel,initialData:l,initialUserErrorData:i})),s.a.createElement("section",{className:"setting_wrap"},"General"===this.state.type?s.a.createElement("div",{className:"general_pan"},s.a.createElement(Ma,{profileData:this.props.profileData,isProcessing:this.props.isProcessing,updateProfile:this.props.updateProfile,getInfo:this.props.getInfo}),s.a.createElement(Fa,{isProcessing:this.props.isPassProcessing,changePassword:this.props.changePassword})):null,"Users"===this.state.type?s.a.createElement(Ba,{action:o,isLoading:this.props.isUserLoading,usersList:this.props.usersList,handleShowUserModel:this.handleShowUserModel}):null,"Stores"===this.state.type?s.a.createElement(za,{isLoading:this.props.isStoreLoading,isProcessing:this.props.isStoreProcessing,storesList:this.props.storesList,getStores:this.props.getStores,editStore:this.props.editStore,deleteStore:this.props.deleteStore}):null))}}]),t}(s.a.Component));Va.defaultProps={usersList:{},profileData:{},addUser:function(){},editUser:function(){},getUsers:function(){},suspendUser:function(){},deleteUser:function(){},isUserLoading:!1,isUserUpdating:!1};var Xa=Object(h.h)(Va),Ja=Object(b.b)(function(e){var t=e.settingReducer,a=e.headerReducer;return{isStoreLoading:t.isStoreLoading,isStoreProcessing:t.isStoreProcessing,isLoading:t.isLoading,isPassProcessing:t.isPassProcessing,isProcessing:t.isProcessing,profileData:t.profileData,storesList:t.storesList,isLocProcessing:t.isLocProcessing,usersList:t.usersList,userType:a.userType,isUserLoading:t.isUserLoading,isUserUpdating:t.isUserUpdating}},function(e){return{getInfo:function(t){return e(function(e){return{type:Qt,data:e}}(t))},getStores:function(t){return e(pa(t))},getUsers:function(t){return e(function(e){return{type:oa,data:e}}(t))},addUser:function(t){return e(function(e){return{type:la,data:e}}(t))},editUser:function(t){return e(function(e){return{type:ia,data:e}}(t))},suspendUser:function(t){return e(function(e){return{type:da,data:e}}(t))},deleteUser:function(t){return e(function(e){return{type:ca,data:e}}(t))},updateProfile:function(t){return e(function(e){return{type:ta,data:e}}(t))},changePassword:function(t){return e(function(e){return{type:aa,data:e}}(t))},addLocation:function(t){return e(function(e){return{type:ra,data:e}}(t))},editStore:function(t){return e(function(e){return{type:sa,data:e}}(t))},deleteStore:function(t){return e(function(e){return{type:na,data:e}}(t))}}})(Object(h.h)(function(e){var t=e.isLoading,a=e.isStoreLoading,r=e.isStoreProcessing,n=e.isPassProcessing,o=e.isProcessing,l=e.profileData,i=e.getInfo,c=e.userType,d=e.getStores,u=e.storesList,m=e.editStore,p=e.deleteStore,h=e.updateProfile,f=e.changePassword,_=e.addLocation,b=e.isLocProcessing,g=e.addUser,E=e.editUser,v=e.getUsers,y=e.suspendUser,k=e.deleteUser,S=e.usersList,O=e.isUserLoading,D=e.isUserUpdating;return s.a.createElement(Xa,{isLoading:t,isStoreLoading:a,isStoreProcessing:r,isPassProcessing:n,isProcessing:o,profileData:l,getInfo:i,userType:c,getStores:d,storesList:u,editStore:m,deleteStore:p,updateProfile:h,changePassword:f,addLocation:_,isLocProcessing:b,addUser:g,editUser:E,getUsers:v,deleteUser:k,suspendUser:y,usersList:S,isUserLoading:O,isUserUpdating:D})})),qa=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(Ja,null))}}]),t}(r.Component),Za=Object(h.h)(qa),$a="GET_REPORT",Qa="GET_ORDER",er="GET_LATE_ORDER",tr="SORT_LATE_ORDERS",ar=function(e){return{type:"GET_REPORT_ERROR",data:e}},rr=function(e){return{type:"GET_REPORT_SUCCESS",data:e}},sr=function(e){return{type:"GET_ORDER_ERROR",data:e}},nr=function(e){return{type:"GET_ORDER_SUCCESS",data:e}},or=function(e){return{type:tr,data:e}},lr=function(e){return{type:"GET_LATE_ORDER_ERROR ",data:e}},ir=function(e){return{type:"GET_LATE_ORDER_SUCCESS",data:e}},cr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleStateChange=function(e,t){e.stopPropagation();var r=a.state.filterKeys||{};-1===r.State.findIndex(function(e){return e.value===t.value})&&r.State.push({label:t.label,value:t.value}),r.State=Object(f.sortBy)(r.State,"value"),a.setState({filterKeys:r},function(){a.handleUpdateFilter()})},a.handleAreaChange=function(e,t){e.stopPropagation();var r=a.state.filterKeys||{};-1===r.Area.findIndex(function(e){return e.value===t.delivery_zone_name})&&r.Area.push({id:t.id,state:t.state,value:t.delivery_zone_name,label:"".concat(t.delivery_zone_name," (").concat(t.state,")")}),r.Area=Object(f.sortBy)(r.Area,"value"),a.setState({filterKeys:r},function(){a.handleUpdateFilter()})},a.handleStoreChange=function(e,t){e.stopPropagation();var r=a.state.filterKeys||{};-1===r.Store.findIndex(function(e){return e.value===t.label})&&r.Store.push({id:t.data.id,store_id:t.data.store_id,label:t.label,value:t.label}),r.Store=Object(f.sortBy)(r.Store,"value"),a.setState({filterKeys:r},function(){a.handleUpdateFilter()})},a.onSelectStartDate=function(e){return me()(e).format("X")>me()(a.state.endDate).format("X")?(Oe({message:"Start date should be lower than end date"}),!1):me()(a.state.endDate).diff(me()(e),"days")>366?(Oe({message:"Date range should not be greater than 1 year"}),!1):void a.setState({startDate:e},function(){a.handleUpdateFilter()})},a.onSelectEndDate=function(e){var t=me()(a.state.startDate).format("X"),r=me()(e).format("X");return a.state.startDate?me()(e).diff(a.state.startDate,"days")>366?(Oe({message:"Date range should not be greater than 1 year"}),!1):r<t?(Oe({message:"End date should be greater than start date"}),!1):void a.setState({endDate:e},function(){a.handleUpdateFilter()}):(Oe({message:"Please select start date first"}),!1)},a.onDateRange=function(e){if(me()(e.endDate).diff(me()(e.startDate),"days")>365)return Oe({message:"Date range should not be greater than 1 year"}),!1;a.setState({startDate:e.startDate,endDate:e.endDate},function(){a.handleUpdateFilter()})},a.handleTypeChange=function(e){a.setState({type:e},function(){a.handleUpdateFilter()})},a.tillDate=me()().format("YYYY-MM-DD"),a.state={sOpen:!1,aOpen:!1,stOpen:!1,showFilter:!1,showSearch:!1,filterKeys:{State:[],Area:[],Store:[]},endDate:me()().format("YYYY-MM-DD"),startDate:me()().subtract(1,"months").format("YYYY-MM-DD")},a.toggleResFilter=a.toggleResFilter.bind(Object(Q.a)(Object(Q.a)(a))),a.handleRemoveFilter=a.handleRemoveFilter.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"toggleResFilter",value:function(){this.setState({showSearch:!1,showFilter:!this.state.showFilter})}},{key:"handleRemoveFilter",value:function(e,t,a){var r=this;e.stopPropagation();var s=this.state.filterKeys||[];s[t].splice(a,1),"State"===t&&0===s[t].length&&(s.Area=[],s.Store=[]),"Area"===t&&0===s[t].length&&(s.Store=[]);var n="State"!==t?this.state.selectedState:null,o="Area"!==t?this.state.selectedArea:null,l="Store"!==t?this.state.selectedStore:null;this.setState({filterKeys:s,selectedArea:o,selectedState:n,selectedStore:l},function(){r.handleUpdateFilter()})}},{key:"handleUpdateFilter",value:function(){var e=this.state.filterKeys||{},t={},a={};if(0===e.Store.length&&0===e.Area.length&&e.State.length>0){var r=(e.State||[]).map(function(e){return{state:e.value,zone_id:[]}});r.length>0&&(a={type:"place",place:r})}if(0===e.Store.length&&e.Area.length>0){var s=[];(e.Area||[]).map(function(e){var t=s.findIndex(function(t){return t.state===e.state});t>-1?s[t].zone_id.push(e.id):s.push({state:e.state,zone_id:[e.id]})}),s.length>0&&(a={type:"place",place:s})}if(e.Store.length>0){var n=[];(e.Store||[]).forEach(function(e){n.push(e.store_id.toString()),t[e.store_id]=e.label}),n.length>0&&(a={type:"store",store_id:n})}var o=this.state.startDate,l=this.state.endDate;o&&l?(o=o,l=l):(o||l||(o=me()().subtract(1,"months").format("YYYY-MM-DD"),l=me()().format("YYYY-MM-DD")),o&&!l&&(l=o=o),l&&!o&&(o=l,l=l),this.setState({startDate:"",endDate:""})),a.start=o,a.end=l,a.user_type=this.state.type,a.type||(a.type="date"),this.props.getReport(a,{user_type:this.props.userType,type:this.state.type,startDate:o,endDate:l,filterKeys:e})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.filterData;if(Object(f.isEmpty)(t)||t.user_type!==this.props.userType){var a="admin"===this.props.userType?"general":this.props.userType;this.setState({type:a},function(){e.handleUpdateFilter()})}else{var r=t.filterKeys,s=this.state.startDate,n=this.state.endDate;this.setState({filterKeys:r,startDate:s,endDate:n,type:t.type},function(){e.handleUpdateFilter()})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.showFilter,r=(t.showSearch,[]),n=[];return this.state.filterKeys.State.forEach(function(e){r.push(e.label),n.push(e.value)}),s.a.createElement("div",null,s.a.createElement("section",{className:"con_top"},s.a.createElement("div",{className:"tab_pan-wrap"},s.a.createElement("div",{className:"tab_pan"},s.a.createElement("span",{onClick:function(){return e.handleTypeChange("general")},className:"general"===this.state.type?" active":""},"Grocery"),s.a.createElement("span",{onClick:function(){return e.handleTypeChange("pharmacy")},className:"pharmacy"===this.state.type?" active":""},"Rx"))),s.a.createElement("div",{className:"res_btn"},s.a.createElement("div",{className:"resfilter_btn ".concat(a?"showfilter":""," "),onClick:this.toggleResFilter},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Filter")),s.a.createElement(Je.a,{method:"get",action:"",autoComplete:"off",className:"resfilter_box ".concat(a?"showfilterbox":"")},s.a.createElement("div",{className:"filter_label"},"Filter by: "),s.a.createElement(et,{stateFilter:r,states:this.state.filterKeys.State,handleStateChange:this.handleStateChange,handleRemoveFilter:this.handleRemoveFilter}),s.a.createElement(tt,{area:this.state.filterKeys.Area,states:this.state.filterKeys.State,zones:this.props.zones,stateCodeFilter:n,handleAreaChange:this.handleAreaChange,handleRemoveFilter:this.handleRemoveFilter}),s.a.createElement(at,{store:this.state.filterKeys.Store,area:this.state.filterKeys.Area,stores:this.props.stores,handleStoreChange:this.handleStoreChange,handleRemoveFilter:this.handleRemoveFilter}))),s.a.createElement("section",{className:"date_range_section"},s.a.createElement("div",{className:"filter_label"},"Range: "),s.a.createElement("div",{className:"InputFromTo"},s.a.createElement("div",{className:"DayPickerInput"},s.a.createElement(Ft,{selectDate:this.state.startDate,startDate:this.state.startDate,endDate:this.state.endDate,onSelectDate:this.onSelectStartDate,onDateRange:this.onDateRange,className:"t_box",placeholder:"Start Date",tillDate:this.tillDate}))," ",s.a.createElement("span",{className:"to"},"to")," "," ",s.a.createElement("span",{className:"InputFromTo-to"},s.a.createElement("div",{className:"DayPickerInput"},s.a.createElement(Ft,{selectDate:this.state.endDate,startDate:this.state.startDate,endDate:this.state.endDate,onSelectDate:this.onSelectEndDate,onDateRange:this.onDateRange,className:"t_box",placeholder:"End Date",disabled:!this.state.startDate,tillDate:this.tillDate}))))),this.state.filterKeys.State.length>0||this.state.filterKeys.Area.length>0||this.state.filterKeys.Store.length>0?s.a.createElement("section",{className:"filter-tag_section"},this.state.filterKeys.State.length>0?this.state.filterKeys.State.map(function(t,a){return s.a.createElement("span",{key:"state-tag-".concat(a),className:"f-tag"},t.label,s.a.createElement("a",{onClick:function(t){return e.handleRemoveFilter(t,"State",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null,this.state.filterKeys.Area.length>0?this.state.filterKeys.Area.map(function(t,a){return s.a.createElement("span",{key:"area-tag-".concat(a),className:"f-tag"},t.label,s.a.createElement("a",{onClick:function(t){return e.handleRemoveFilter(t,"Area",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null,this.state.filterKeys.Store.length>0?this.state.filterKeys.Store.map(function(t,a){return s.a.createElement("span",{key:"store-tag-".concat(a),className:"f-tag"},t.label,s.a.createElement("a",{onClick:function(t){return e.handleRemoveFilter(t,"Store",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null):null)}}]),t}(r.Component),dr=a(216),ur=a(1013),mr=a(134),pr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){Object(dr.a)(this.state);var e=this.props.reportData.rerunData||{},t=e.rerun||[],a=e.chng_rerun_total_percent||0;return s.a.createElement(ur.a,{md:"6",sm:"12",className:"pr10"},s.a.createElement("div",{className:"stats_box"},s.a.createElement("h3",{className:"sec_titel"},"Reruns"),s.a.createElement("div",{className:"rwrap"},s.a.createElement("div",{className:"rinfo"},s.a.createElement("h4",null,"Total Reruns"),s.a.createElement("h2",null,e.total_rerun||0),s.a.createElement("p",null,a>0?s.a.createElement("span",{className:"rup"},"+",a.toFixed(2),"%"):null,a<0?s.a.createElement("span",{className:"gdown"},a.toFixed(2),"%"):null,0===a?s.a.createElement("span",{className:"gup"},"+0%"):null,"\xa0 last 30 days")),s.a.createElement("div",{className:"rtable"},s.a.createElement("div",{className:"rtRow rtlabel"},s.a.createElement("span",{className:"rtCol"},"Store ID"),s.a.createElement("span",{className:"rtCol"},"Reruns")),s.a.createElement("div",{className:"rtDeta"},s.a.createElement(mr.Scrollbars,null,(t||[]).map(function(e,t){return s.a.createElement("div",{key:"state-tag-".concat(t),className:"rtRow"},s.a.createElement("span",{className:"rtCol"},e.store_name," #",e.store_id),s.a.createElement("span",{className:"rtCol"},e.order_count))})))))))}}]),t}(r.Component),hr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.maxOrders=0,a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.reportData,a=e.showBy,r=t?t.ordersData:{};this.arrangeGraphData(r,a)}},{key:"componentWillReceiveProps",value:function(e){if(e.showBy!==this.props.showBy||!Object(f.isEqual)(e.reportData,this.props.reportData)){var t=e.reportData,a=e.showBy,r=t?t.ordersData:{};this.arrangeGraphData(r,a)}}},{key:"arrangeGraphData",value:function(e,t){if(e&&e.orders){var a=e.orders||[],r=this.maxOrders;r=Math.max.apply(Math,Object(ee.a)(a.map(function(e){return e.order_count}))),r=6*Math.ceil(r/6);var s=[];"date"===t&&(s=a.map(function(e){var t=e.D?me()(e.D,"YYYYMMDD").format("MMM DD"):"";return Object(m.a)({},e,{label:t,percentage:100*e.order_count/r})})),"store"===t&&(s=a.map(function(e){var t=(e.address||"").split(",");t.splice(t.length-2,2);var a=t.join(", ");return Object(m.a)({},e,{label:a,percentage:100*e.order_count/r})}));for(var n=r>0?r/6:0,o=[],l=0,i=0;i<=6;i++)o.push(l),l+=parseInt(n);this.setState({dailyArr:s,slabArr:o})}}},{key:"render",value:function(){var e=this.state,t=e.dailyArr,a=e.slabArr;return s.a.createElement("div",{className:"resscroll"},s.a.createElement("div",{className:"cLabel"},s.a.createElement("div",{className:"fcol"},"date"===this.props.showBy?"Date":"Stores"),s.a.createElement("div",{className:"mcol"}),s.a.createElement("div",{className:"lcol"},"Value")),s.a.createElement("div",{className:"cval"},s.a.createElement("div",{className:"scrollpan"},t&&t.length>0?s.a.createElement(mr.Scrollbars,null,t.map(function(e,t){return s.a.createElement("div",{key:t,className:"cValueRow"},s.a.createElement("div",{className:"fcol"},e.label),s.a.createElement("div",{className:"mcol"},s.a.createElement("span",{className:"hBar",style:{width:"".concat(e.percentage,"%")}})),s.a.createElement("div",{className:"lcol"},e.order_count))})):null),s.a.createElement("div",{className:"cGrid"},a&&a.length>0?s.a.createElement("div",{className:"mcol"},a.map(function(e,t){return s.a.createElement("span",{key:t},e)})):null)))}}]),t}(r.Component),fr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){Object(dr.a)(this.state);var e=this.props.reportData.reportTotal||{},t=e.chng_tot_orders_percent||0,a=e.chng_shopping_late_percent||0;return s.a.createElement("div",{className:"stats_Ubox mb24 dflex"},s.a.createElement("div",{className:"uppan"},s.a.createElement("h4",null,"Total Orders"),s.a.createElement("h2",null,e.total_orders),s.a.createElement("p",null,t>0?s.a.createElement("span",{className:"gup"},"+",t.toFixed(2),"%"):null,t<0?s.a.createElement("span",{className:"rdown"},t.toFixed(2),"%"):null,0===t?s.a.createElement("span",{className:"gup"},"+0%"):null,"\xa0 last 30 days")),s.a.createElement("div",{className:"uppan"},s.a.createElement("h4",null,"Shopped Late"),s.a.createElement("h2",null,e.shopping_late_percent>0?e.shopping_late_percent.toFixed(2):0,"%"),s.a.createElement("p",null,a>0?s.a.createElement("span",{className:"rup"},"+",a.toFixed(2),"%"):null,a<0?s.a.createElement("span",{className:"gdown"},a.toFixed(2),"%"):null,0===a?s.a.createElement("span",{className:"gup"},"+0%"):null,"\xa0 last 30 days")))}}]),t}(r.Component),_r=(a(423),a(286)),br=(a(425),function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.reportData,t=e.ordersData&&e.ordersData.orders?e.ordersData.orders:[],a=[],r=[],n=Object(f.groupBy)(t,function(e){return me()(e.D).format("MMM 'YY")});Object.keys(n).forEach(function(e){var t=n[e]||[];a.push(e);var s=0;t.map(function(e){parseFloat(e.order_count),s+=parseFloat(e.order_count)}),r.push(s)});var o={type:"area",scaleY:{guide:{"line-style":"dashed"}},scaleX:{"max-labels":12,labels:a},plot:{tooltip:{"font-family":"Source Sans Pro","font-size":"16px","line-height":"18px","font-weight":"600",text:"%v orders <br><span style='font-weight: 600; font-size: 14px; line-height: 18px; letter-spacing: 0.1em; color:#B6B6B6'>%data-days</span>","text-align":"center","border-radius":4,padding:"8px 16px","background-color":"#fff",color:"#545454","box-shadow":"0px 1px 5px rgba(0, 0, 0, 0.1)",border:"1px solid #E0E0E0",callout:!0}},series:[{values:r,"data-days":a}]};return s.a.createElement("div",{className:"ariachart"},s.a.createElement(_r.a,{data:o}))}}]),t}(r.Component)),gr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).openDetailsWindow=function(e){a.props.getTaskDetails({uuid:e}),a.setState({showDetails:!0})},a.backToList=function(){a.setState({showDetails:!1})},a.changePage=function(e){var t=e.currentPage;a.props.lateOrder&&!Object(f.isEmpty)(a.props.lateOrder)&&t!==a.props.lateOrder.pageno&&a.props.pageChangeLateOrders({page:t,order_by:a.props.lateOrder.sortBy,format:a.props.lateOrder.format})},a.sortBy=function(e){var t="asc";a.props.lateOrder.sortBy===e&&(t="desc"===a.props.lateOrder.format?"asc":"desc"),a.props.sortLateOrders({page:a.props.lateOrder.pageno,order_by:e,format:t})},a.state={showLateOrderModal:!1,showDetails:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.lateOrder||{},a=t.sortBy||"complete_before",r=t.format||"complete_before",n=t.tasks||{},o=JSON.parse(localStorage.getItem("states")||"{}"),l=t.count||0,i=this.props.taskDetails||{};return this.state.showDetails?s.a.createElement(Ne.a,{size:"md",className:"c-modal lomod",show:this.state.showDetails,onHide:this.props.handleCloseModal},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Late Orders")),s.a.createElement("a",{onClick:this.backToList,className:"backorder"},s.a.createElement("img",{src:"/assets/arrow-left.svg"})," Go back"),ze(i)):s.a.createElement(Ne.a,{size:"lg",className:"c-modal lorderMod",show:this.props.showLateOrderModal,onHide:this.props.handleCloseModal},s.a.createElement(Ne.a.Header,{closeButton:!0},s.a.createElement(Ne.a.Title,null,"Late Orders")),s.a.createElement(Ne.a.Body,null,this.props.isLoading?s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info"},s.a.createElement("div",{className:"loader"},"Loading...."))):s.a.createElement(we.a,{noGutters:!0},"Uncategorized"===t.listType?s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info"},s.a.createElement("div",{className:"liveOrders"},t.count," Results"),s.a.createElement("div",{className:"table_sec"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"9",className:"t-titel"},s.a.createElement("div",{className:"status_count"},s.a.createElement("span",{className:"fc_black"},"Total: ",n.total),s.a.createElement("span",{className:"fc_green"},"0-20 mins: ",n.b),s.a.createElement("span",{className:"fc_yellow"},"20-30 min: ",n.c),s.a.createElement("span",{className:"fc_read"},"30+ min: ",n.d))))),s.a.createElement(Er,{orderList:n.orders,openDetailsWindow:this.openDetailsWindow,sortBy:this.sortBy,sortByValue:a,format:r})))):null,"Statewise"===t.listType?s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info"},s.a.createElement("div",{className:"liveOrders"},t.count," Results"),Object.keys(n||{}).map(function(t,o){var l=n[t]||{};return s.a.createElement("div",{key:o,className:"table_sec"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"9",className:"t-titel"},s.a.createElement("span",{className:"tName"},l.name),s.a.createElement("div",{className:"status_count"},s.a.createElement("span",{className:"fc_black"},"Total: ",l.total),s.a.createElement("span",{className:"fc_green"},"0-20 mins: ",l.b),s.a.createElement("span",{className:"fc_yellow"},"20-30 min: ",l.c),s.a.createElement("span",{className:"fc_read"},"30+ min: ",l.d))))),s.a.createElement(Er,{orderList:l.orders,openDetailsWindow:e.openDetailsWindow,sortBy:e.sortBy,sortByValue:a,format:r})))})):null,"Zonewise"===t.listType?s.a.createElement(Te.a,{md:"12",sm:"12",className:"c_info"},s.a.createElement("div",{className:"liveOrders"},t.count," Results"),Object.keys(t.tasks||{}).map(function(n,l){var i=t.tasks[n]||[],c=o.find(function(e){return e.id===n});return s.a.createElement("div",{key:l},s.a.createElement("h3",{className:"title"},c.value||n),s.a.createElement("div",{className:"table_sec"},i.map(function(t,o){var l=t.orders||[];return s.a.createElement("table",{key:o},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"9",className:"t-titel"},s.a.createElement("span",{className:"tName"},t.name," (",n,")"),s.a.createElement("div",{className:"status_count"},s.a.createElement("span",{className:"fc_black"},"Total: ",t.total),s.a.createElement("span",{className:"fc_green"},"0-20 mins: ",t.b),s.a.createElement("span",{className:"fc_yellow"},"20-30 min: ",t.c),s.a.createElement("span",{className:"fc_read"},"30+ min: ",t.d))))),s.a.createElement(Er,{orderList:l,openDetailsWindow:e.openDetailsWindow,sortBy:e.sortBy,sortByValue:a,format:r}))})))})):null),!Object(f.isEmpty)(n)&&l>=500?s.a.createElement("div",{style:{display:this.props.isLoading?"none":""},className:"pagination_Pan"},s.a.createElement(Lt,{totalRecords:l,pageLimit:500,pageNeighbours:1,onPageChanged:this.changePage,isProcessing:this.props.isProcessing})):null))}}]),t}(r.Component);function Er(e){var t=e.orderList||[],a=e.sortByValue,r=e.format;return s.a.createElement("tbody",null,s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",{className:"order_number"===a?"sortby ".concat(r):"",onClick:function(){return e.sortBy("order_number")}},"Order Number"),s.a.createElement("th",{className:"time_diff"===a?"sortby ".concat(r):"",onClick:function(){return e.sortBy("time_diff")}},"Late by (min)"),s.a.createElement("th",{className:"store"===a?"sortby ".concat(r):"",onClick:function(){return e.sortBy("store")}},"Store"),s.a.createElement("th",{className:"cust_name"===a?"sortby ".concat(r):"",onClick:function(){return e.sortBy("cust_name")}},"Customer Name"),s.a.createElement("th",{className:"created_at"===a?"sortby ".concat(r):"",onClick:function(){return e.sortBy("created_at")}},"Order Time"),s.a.createElement("th",{className:"complete_after"===a||"complete_before"===a?"sortby ".concat(r):"",onClick:function(){return e.sortBy("complete_before")}},"Last Del Window"),s.a.createElement("th",{className:"recpnt_task_start_time"===a?"sortby ".concat(r):"",onClick:function(){return e.sortBy("recpnt_task_start_time")}},"Driver to Recipient"),s.a.createElement("th",{className:"delivery_time"===a?"sortby ".concat(r):"",onClick:function(){return e.sortBy("delivery_time")}},"Delivery Time"),s.a.createElement("th",{className:"driver_wait"===a?"sortby ".concat(r):"",onClick:function(){return e.sortBy("driver_wait")}},"Driver Wait")),t.length>0?(t||[]).map(function(t,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",{abbr:"tr"},s.a.createElement("span",{className:"round ".concat(t.lateClass)}),t.order_number,"\xa0",s.a.createElement("span",{title:"View Details",onClick:function(){return e.openDetailsWindow(t.uuid)},className:"docmodbtn"},s.a.createElement("img",{src:"/assets/doc.svg"}))),s.a.createElement("td",{abbr:"tr"},t.time_diff>0?t.time_diff:0),s.a.createElement("td",{abbr:"tr"},t.store),s.a.createElement("td",{abbr:"tr"},t.customer_name),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("span",{className:"tTip"},t.created_at)," ",s.a.createElement("label",null,t.created_at)),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("span",{className:"tTip"},t.complete_before)," ",s.a.createElement("label",null,t.complete_before)),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("span",{className:"tTip"},t.recpnt_task_start_time)," ",s.a.createElement("label",null,t.recpnt_task_start_time)),s.a.createElement("td",{abbr:"tr",className:"acell"},s.a.createElement("span",{className:"tTip"},t.delivery_time)," ",s.a.createElement("label",null,t.delivery_time)),s.a.createElement("td",{abbr:"tr"},t.driver_wait))}):s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"9"},"No Record(s)")))}var vr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleOpenModal=function(e){e.stopPropagation(),a.setState({showLateOrderModal:!0}),a.props.getLateOrders()},a.state={showLateOrderModal:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleCloseModal",value:function(){this.setState({showLateOrderModal:!1})}},{key:"render",value:function(){var e=this,t=this.state.showLateOrderModal,a=this.props,r=a.reportData,n=(a.startDate,a.endDate,r.reportTotal||{});return s.a.createElement(ur.a,{md:"6",sm:"12",className:"pl10"},s.a.createElement("div",{className:"stats_box"},s.a.createElement("h3",{className:"sec_titel"},"On Time Report"),s.a.createElement("div",{className:"otrWrap"},s.a.createElement("div",{className:"otrInfo"},s.a.createElement("h4",null,"Total Orders"),s.a.createElement("h2",null,n.total_orders),s.a.createElement("div",{className:"toWrap"},s.a.createElement("div",{className:"otrData otRound"},s.a.createElement("div",{className:"ortlabel"},s.a.createElement("span",null,"On Time")," ",n.on_time_percentage,"%"),s.a.createElement("div",{className:"ortText"},n.total_orders-n.late_orders," Responses")),s.a.createElement("div",{className:"otrData lateRound"},s.a.createElement("div",{className:"ortlabel"},s.a.createElement("span",null,"Late"),"  ",n.late_percentage,"%"),s.a.createElement("div",{className:"ortText"},n.late_orders," Responses"))),s.a.createElement("a",{className:"vlOrder",style:{cursor:"pointer"},onClick:function(t){return e.handleOpenModal(t)}},"View Late Orders")),s.a.createElement("div",{className:"otrChart"},s.a.createElement("div",{className:"chart_wrap"},s.a.createElement("svg",{viewBox:"0 0 36 36",className:"circular-chart orange_c"},s.a.createElement("path",{className:"circle-bg",d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"}),s.a.createElement("path",{className:"circle",strokeDasharray:"".concat(n.on_time_percentage,", ").concat(n.late_percentage),d:"M18 2.0845\r a 15.9155 15.9155 0 0 1 0 31.831\r a 15.9155 15.9155 0 0 1 0 -31.831"})),s.a.createElement("span",{className:"cText"},n.on_time_percentage,"%",s.a.createElement("span",null,"On Time")))))),t?s.a.createElement(gr,{showLateOrderModal:t,handleCloseModal:this.handleCloseModal.bind(this),lateOrder:this.props.lateOrder,getLateOrders:this.props.getLateOrders,getTaskDetails:this.props.getTaskDetails,taskDetails:this.props.taskDetails,sortLateOrders:this.props.sortLateOrders,isLoading:this.props.isLoading,pageChangeLateOrders:this.props.pageChangeLateOrders}):null)}}]),t}(r.Component),yr=a(1014),kr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).select=function(e){a.setState({type:e},function(){this.getOrder()})},a.handleOutsideClick=function(e){e.stopPropagation(),a.nodeState.contains(e.target)||"ignore-outer-click"===e.target.getAttribute("data")||a.state.optOpen&&a.setState({optOpen:!1})},a.getOrder=function(){var e="";e="Monthly"===a.state.type?"month":a.state.showBy,a.props.getOrder(e)},a.state={type:"Daily",optOpen:!1,showBy:"date",showByTxt:"Show by Date"},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onChangeHandle",value:function(e){"date"===e?this.setState({showBy:e,showByTxt:"Show by Date",optOpen:!this.state.optOpen},function(){this.getOrder()}):this.setState({showBy:e,showByTxt:"Show by Store",optOpen:!this.state.optOpen},function(){this.getOrder()})}},{key:"handleSelectbox",value:function(e){this.setState({optOpen:!this.state.optOpen})}},{key:"componentDidMount",value:function(){var e=this.props.showBy,t=this.state.showByTxt,a="month"===e?"Monthly":"Daily";"month"===e?(e="date",t="Show by Date"):t="date"===e?"Show by Date":"Show by Store",this.setState({type:a,showBy:e,showByTxt:t}),document.addEventListener("click",this.handleOutsideClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleOutsideClick)}},{key:"render",value:function(){var e=this,t=this.state,a=t.type,r=t.optOpen,n=t.showBy,o=t.showByTxt;return s.a.createElement("section",{className:"content"},s.a.createElement(fr,{reportData:this.props.reportData}),s.a.createElement("div",{className:"stats_box mb24"},s.a.createElement("div",{className:"barchartPan"},s.a.createElement("div",{className:"bcpTop"},s.a.createElement("div",{className:"lcol"},"Orders"),s.a.createElement("div",{className:"rcol"},s.a.createElement("span",{onClick:function(){return e.select("Daily")},className:"Daily"===a?"active":""},"Daily View"),s.a.createElement("span",{onClick:function(){return e.select("Monthly")},className:"Monthly"===a?"active":""},"Monthly View")),"Monthly"===a?s.a.createElement("div",{className:"dropPan"},s.a.createElement("div",{ref:function(t){return e.nodeState=t},className:"mText"},"Last 12 months")):s.a.createElement("div",{className:"dropPan"},s.a.createElement("div",{ref:function(t){return e.nodeState=t},className:"select-box".concat(r?" sopen":" ")},s.a.createElement("div",{className:"s-result",onClick:function(){return e.handleSelectbox(a)}},s.a.createElement("div",{className:"sVal"},o)),s.a.createElement("ul",null,s.a.createElement("li",{onClick:function(){return e.onChangeHandle("date")},data:"ignore-outer-click",className:"date"===n?"active":""},"Show by Date"),s.a.createElement("li",{onClick:function(){return e.onChangeHandle("store")},data:"ignore-outer-click",className:"store"===n?"active":""},"Show by Store"))))),this.props.isOrderLoading?s.a.createElement("div",{className:"loader"}):s.a.createElement("div",{className:"bcpButtom".concat("store"===n?" byStore":"")},"Daily"===a?s.a.createElement(hr,{reportData:this.props.reportData,showBy:n}):null,"Monthly"===a?s.a.createElement(br,{reportData:this.props.reportData}):null))),s.a.createElement(yr.a,{noGutters:!0},s.a.createElement(pr,{reportData:this.props.reportData}),s.a.createElement(vr,{startDate:this.props.startDate,endDate:this.props.endDate,reportData:this.props.reportData,isLoading:this.props.isLateOrderLoading,getLateOrders:this.props.getLateOrders,lateOrder:this.props.lateOrder,getTaskDetails:this.props.getTaskDetails,taskDetails:this.props.taskDetails,sortLateOrders:this.props.sortLateOrders,pageChangeLateOrders:this.props.pageChangeLateOrders})))}}]),t}(r.Component),Sr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).getReport=function(e,t){var r=Object(m.a)({},a.state.filterData),s=Object(m.a)({},e,{show_by:r.show_by});a.setState({filterData:s},function(){s.filter={key:"reports",value:JSON.stringify(t)},a.props.getReport(s)})},a.getOrder=function(e){var t=Object(m.a)({},a.state.filterData);t.show_by=e,a.setState({filterData:Object(m.a)({},t)},function(){a.props.getOrder(t)})},a.getLateOrders=function(){var e=Object(m.a)({},a.state.filterData);delete e.show_by,e.filter=a.props.filterData.reports,e.page=1,e.order_by="complete_after",e.format="desc",a.props.getLateOrders(e)},a.pageChangeLateOrders=function(e){var t=Object(m.a)({},a.state.filterData);delete t.show_by,t.filter=a.props.filterData.reports;var r=Object(m.a)({},t,e);a.props.getLateOrders(r)},a.sortLateOrders=function(e){var t=Object(m.a)({},a.state.filterData);delete t.show_by,t.filter=a.props.filterData.reports;var r={searchData:Object(m.a)({},t,e),unsortedLateOrders:a.props.unsortedLateOrders,count:a.props.lateOrder.count};a.props.sortLateOrders(r)},a.state={type:"general",filterData:{show_by:"date"},endDate:me()().format("YYYY-MM-DD"),startDate:me()().subtract(1,"months").format("YYYY-MM-DD")},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){this.props.getLocations()}},{key:"render",value:function(){var e=this.state,t=e.startDate,a=e.endDate,r=this.props.userType||{},n=this.props.locations||{},o=n.zones||{},l=n.stores||[],i=n.taskType||"",c=n.locations||[],d=this.props.filterData.reports||{};return this.props.isFilterLoaded?this.props.showReport&&"true"===this.props.showReport?s.a.createElement("main",{className:"dash right_sec statsp ".concat("admin"!==r?" noAdmin":"")},d?s.a.createElement(cr,{zones:o,stores:l,taskType:i,locations:c,getReport:this.getReport,handleTypeChange:this.handleTypeChange,userType:this.props.userType,filterData:d}):null,this.props.isLoading?s.a.createElement("div",{className:"loader"},"Loading...."):s.a.createElement(kr,{startDate:t,endDate:a,reportData:this.props.reportData,getOrder:this.getOrder,showBy:this.state.filterData.show_by,isOrderLoading:this.props.isOrderLoading,isLateOrderLoading:this.props.isLateOrderLoading,getLateOrders:this.getLateOrders,lateOrder:this.props.lateOrder,getTaskDetails:this.props.getTaskDetails,taskDetails:this.props.taskDetails,sortLateOrders:this.sortLateOrders,pageChangeLateOrders:this.pageChangeLateOrders})):s.a.createElement("main",{className:"dash right_sec statsp deniedp"},s.a.createElement("div",{className:"aDenied"},"Access Denied")):s.a.createElement("main",{className:"dash right_sec statsp"},s.a.createElement("div",{className:"loader"},"Loading...."))}}]),t}(s.a.Component);Sr.defaultProps={isLoading:!1,getReport:function(){},getLocations:function(){},settingsData:function(){}};var Or=Object(h.h)(Sr),Dr=Object(b.b)(function(e){var t=e.dashboardReducer,a=e.reportReducer,r=e.headerReducer;return{userType:r.userType,isLoading:a.isLoading,isOrderLoading:a.isOrderLoading,reportData:a.reportData,locations:t.locations,settingsData:r.settingsData,showReport:r.showReport,isLateOrderLoading:a.isLateOrderLoading,lateOrder:a.lateOrder,unsortedLateOrders:a.unsortedLateOrders,filterData:r.filterData,isFilterLoaded:r.isFilterLoaded,taskDetails:t.taskDetails}},function(e){return{getReport:function(t){return e(function(e){return{type:$a,data:e}}(t))},getOrder:function(t){return e(function(e){return{type:Qa,data:e}}(t))},getLocations:function(t){return e(w(t))},getLateOrders:function(t){return e(function(e){return{type:er,data:e}}(t))},sortLateOrders:function(t){return e(or(t))},getTaskDetails:function(t){return e(F(t))}}})(Object(h.h)(function(e){var t=e.userType,a=e.isLoading,r=e.isOrderLoading,n=e.locations,o=e.getReport,l=e.getOrder,i=e.reportData,c=e.settingsData,d=e.getLocations,u=e.showReport,m=e.isLateOrderLoading,p=e.getLateOrders,h=e.lateOrder,f=e.unsortedLateOrders,_=e.sortLateOrders,b=e.filterData,g=e.isFilterLoaded,E=e.taskDetails,v=e.getTaskDetails;return s.a.createElement(Or,{isLoading:a,isOrderLoading:r,userType:t,getReport:o,getOrder:l,getLocations:d,reportData:i,locations:n,settingsData:c,showReport:u,isLateOrderLoading:m,getLateOrders:p,lateOrder:h,unsortedLateOrders:f,sortLateOrders:_,filterData:b,isFilterLoaded:g,taskDetails:E,getTaskDetails:v})})),jr=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(Dr,null))}}]),t}(r.Component),Cr=Object(h.h)(jr),wr="DO_LOGIN",Tr=function(e){return{type:"DO_LOGIN_SUCCESS",data:e}},xr=function(e){return{type:"DO_LOGIN_ERROR",data:e}},Nr=a(23),Rr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t={email:a.email.value,password:a.password.value,remember:a.state.remember},r=a.validate(t),s=e.type;r.errors.password||r.errors.email||"submit"!=s||a.props.doLogin(t)},a.validate=function(e){var t=e||{},r=Object(m.a)({},a.state.defaultError),s=!1;return t.password?t.password.length<4&&t.password.length>0?(r.password=!0,s=!0):(r.password=!1,s=!1):(r.password=!0,s=!0),t.email&&a.validateEmail(t.email)?(r.email=!1,s=!1):(r.email=!0,s=!0),a.setState({defaultError:r}),{isError:s,errors:r}},a.validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e))},a.state={msg:"",remember:!1,typePass:"password",defaultError:{password:!1,email:!1}},a.handleRem=a.handleRem.bind(Object(Q.a)(Object(Q.a)(a))),a.toggleShowpass=a.toggleShowpass.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e;e=xt("foodjets_merchant")||{}||{},Object(f.isEmpty)(e)||(window.location.href="/dashboard")}},{key:"handleRem",value:function(e){e.target;this.setState(Object(Ce.a)({},e.target.name,!this.state[e.target.name]))}},{key:"toggleShowpass",value:function(){this.setState({typePass:"password"===this.state.typePass?"text":"password"})}},{key:"componentWillReceiveProps",value:function(e){e.isSuccess&&(window.location.href="/dashboard")}},{key:"render",value:function(){var e=this,t=Object(m.a)({},this.state.defaultError);return s.a.createElement("div",{className:"login_p"},s.a.createElement("div",{className:"log_left"},s.a.createElement("h4",null,"Welcome"),s.a.createElement("p",null,"Sign in to your account"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"t-email ltbox ".concat(t.email?" error":""),type:"text",ref:function(t){return e.email=t},onChange:function(t){return e.handleSubmit(t,"data")},placeholder:"Email address"})),s.a.createElement("div",{className:"input-group"},s.a.createElement("span",{className:"pass_wrap"},s.a.createElement("input",{className:"t-pass ltbox ".concat(t.password?" error":""),type:this.state.typePass,ref:function(t){return e.password=t},onChange:function(t){return e.handleSubmit(t,"data")},placeholder:"Password"}),s.a.createElement(Nr.b,{onClick:this.toggleShowpass,className:"text"===this.state.typePass?"showpass":""},s.a.createElement("img",{src:"/assets/eye.svg",alt:"eye_img"})))),s.a.createElement("div",{className:"f-pass"},s.a.createElement("span",{className:"remember_pan"},s.a.createElement("input",{type:"checkbox",id:"remember",name:"remember",className:"c_box",checked:this.state.remember,onChange:function(t){return e.handleRem(t)}})," ",s.a.createElement("label",{htmlFor:"remember"},"Remember Me"))," ",s.a.createElement(Nr.b,{className:"btn btn-link px-0",to:"/forgot-password"},"Forgot your password?")),s.a.createElement("div",{className:"sbtn_pan"},s.a.createElement("button",{className:"sbtn",disabled:!!this.props.isProcessing},this.props.isProcessing?"Processing....":"Sign In")),this.props.isError?s.a.createElement("div",{className:"aleart_pan"},s.a.createElement("div",{className:"alert_box".concat("That's not the right password. Sorry!"===this.props.loginData.message?"":" hide")},"Sorry that email and password combination isn\u2019t right."),s.a.createElement("div",{className:"alert_box".concat("We can't find an account with that email."===this.props.loginData.message?"":" hide")},"Sorry that email and password combination isn\u2019t right.")):null)),s.a.createElement("div",{className:"log_right"},s.a.createElement("img",{src:"/assets/Sign-in-bg.svg",alt:"login_img"})))}}]),t}(r.Component);Rr.defaultProps={isFetching:!1,isProcessing:!1,isError:!1,isSuccess:!1,states:[],doLogin:function(){}};var Pr=Object(h.h)(Rr),Lr=Object(b.b)(function(e){var t=e.loginReducer;return{isProcessing:t.isProcessing,isError:t.isError,isSuccess:t.isSuccess,loginData:t.loginData}},function(e){return{doLogin:function(t){return e(function(e){return{type:wr,data:e}}(t))}}})(Object(h.h)(function(e){var t=e.isProcessing,a=e.isError,r=e.isSuccess,n=e.doLogin,o=e.loginData;return s.a.createElement(Pr,{isProcessing:t,isError:a,isSuccess:r,doLogin:n,loginData:o})})),Ar=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(Lr,null))}}]),t}(r.Component),Mr=Object(h.h)(Ar),Fr="FORGOT_PASSWORD",Ur=function(e){return{type:"FORGOT_PASSWORD_SUCCESS",data:e}},Yr=function(e){return{type:"FORGOT_PASSWORD_ERROR",data:e}},zr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t={email:a.email.value};a.validate(t).errors.email||"submit"!=e.type||a.props.forgotPassword(t)},a.validate=function(e){var t=e||{},r=Object(m.a)({},a.state.defaultError),s=!1;return t.email&&a.validateEmail(t.email)?(r.email=!1,s=!1):(r.email=!0,s=!0),console.log("errors",r),a.setState({defaultError:r}),{isError:s,errors:r}},a.validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e))},a.state={msg:"",defaultError:{email:!1},isSuccess:null},a.handleSubmit=a.handleSubmit.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.forgotPasswordreset()}},{key:"componentWillReceiveProps",value:function(e){console.log("recive",e)}},{key:"render",value:function(){var e=this,t=Object(m.a)({},this.state.defaultError);return s.a.createElement("div",{className:"login_p"},s.a.createElement("div",{className:"log_left forgot-l"},this.props.isSuccess?s.a.createElement("div",{className:"aftersend"},s.a.createElement("h4",null,"Recovery Link Sent!"),s.a.createElement("p",null,"Click on the link sent to ",s.a.createElement("br",null)," your email to recover your password"),s.a.createElement("div",{className:"sbtn_pan"},s.a.createElement(Nr.b,{className:"sbtn",to:"/login"},"Back to Login"))):s.a.createElement("div",null,s.a.createElement("h4",null,"Recover My Password"),s.a.createElement("p",null,"Enter the email address associated",s.a.createElement("br",null)," with your account"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"t-email ltbox ".concat(t.email?" error":""),type:"text",ref:function(t){return e.email=t},onChange:function(t){return e.handleSubmit(t)},placeholder:"Email address"}),this.props.isError?s.a.createElement("div",{className:"invalid-msg"},this.props.forgotPasswordData.message):""),s.a.createElement("div",{className:"sbtn_pan"},s.a.createElement("button",{className:"sbtn",disabled:!!this.props.isProcessing&&!!t.email},this.props.isProcessing?"Processing....":"Recover My Password"))))),s.a.createElement("div",{className:"log_right forgot-r"},s.a.createElement("img",{src:"/assets/unlock.svg",alt:"login_img"})))}}]),t}(r.Component);zr.defaultProps={isFetching:!1,isProcessing:!1,isError:!1,isSuccess:!1,states:[],forgotPassword:function(){}};var Ir=Object(h.h)(zr),Wr=Object(b.b)(function(e){var t=e.forgotPasswordReducer;return{isProcessing:t.isProcessing,isError:t.isError,isSuccess:t.isSuccess,forgotPasswordData:t.forgotPasswordData}},function(e){return{forgotPassword:function(t){return e(function(e){return{type:Fr,data:e}}(t))},forgotPasswordreset:function(){return e({type:"FORGOT_PASSWORD_RESET"})}}})(Object(h.h)(function(e){var t=e.isProcessing,a=e.isError,r=e.isSuccess,n=e.forgotPassword,o=e.forgotPasswordData,l=e.forgotPasswordreset;return s.a.createElement(Ir,{isProcessing:t,isError:a,isSuccess:r,forgotPassword:n,forgotPasswordData:o,forgotPasswordreset:l})})),Br=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(Wr,null))}}]),t}(r.Component),Hr=Object(h.h)(Br),Kr="RESET_PASSWORD",Gr=function(e){return{type:"RESET_PASSWORD_SUCCESS",data:e}},Vr=function(e){return{type:"RESET_PASSWORD_ERROR",data:e}},Xr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){if(e.preventDefault(),a.password.value==a.confirmpassword.value||"submit"!=e.type){var t=a.password.value,r=a.confirmpassword.value,s={password:t,key:a.state.key};a.validate({password:t,confirmpassword:r}).errors.password||a.validate({password:t,confirmpassword:r}).errors.Confirmpass||"submit"!=e.type||a.props.resetPassword(s)}else a.props.passwordnotmatch()},a.validate=function(e){var t=e||{},r=Object(m.a)({},a.state.defaultError),s=!1;return t.password?(r.password=!1,s=!1):(r.password=!0,s=!0),t.confirmpassword?(r.Confirmpass=!1,s=!1):(r.Confirmpass=!0,s=!0),console.log("errors",r),a.setState({defaultError:r}),{isError:s,errors:r}},a.state={msg:"",key:"",match:!1,defaultError:{password:!1,Confirmpass:!1}},a.handleSubmit=a.handleSubmit.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.setState({key:window.location.href.split("/").slice(-2)[1]})}},{key:"componentWillReceiveProps",value:function(e){console.log("recive",e)}},{key:"render",value:function(){var e=this,t=Object(m.a)({},this.state.defaultError);return s.a.createElement("div",{className:"login_p"},s.a.createElement("div",{className:"log_left forgot-l"},this.props.isSuccess?s.a.createElement("div",{className:"aftersend"},s.a.createElement("h4",null,"Password successfully changed!"),s.a.createElement("div",{className:"sbtn_pan"},s.a.createElement(Nr.b,{className:"sbtn",to:"/login"},"Back to Login"))):s.a.createElement("div",null,s.a.createElement("h4",null,"Reset Password"),s.a.createElement("p",null,"Set your new password for your account"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"t-pass ltbox ".concat(t.password?" error":""),type:"password",ref:function(t){return e.password=t},onChange:function(t){return e.handleSubmit(t)},placeholder:"New password"})),s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"t-pass ltbox ".concat(t.Confirmpass?" error":""),type:"password",ref:function(t){return e.confirmpassword=t},onChange:function(t){return e.handleSubmit(t)},placeholder:"Confirm password"})),s.a.createElement("div",{className:"sbtn_pan"},s.a.createElement("button",{className:"sbtn",disabled:!!this.props.isProcessing},this.props.isProcessing?"Processing....":"Reset My Password")),this.props.isError?s.a.createElement("div",{className:"aleart_pan"},s.a.createElement("div",{className:"alert_box"},this.props.errMassage)):""))),s.a.createElement("div",{className:"log_right forgot-r"},s.a.createElement("img",{src:"/assets/unlock.svg",alt:"login_img"})))}}]),t}(r.Component);Xr.defaultProps={isFetching:!1,isProcessing:!1,isError:!1,isSuccess:!1,states:[],forgotPassword:function(){}};var Jr=Object(h.h)(Xr),qr=Object(b.b)(function(e){var t=e.resetPasswordReducer;return console.log(t),{isProcessing:t.isProcessing,isError:t.isError,isSuccess:t.isSuccess,forgotPasswordData:t.resetPasswordData,errMassage:t.errMassage}},function(e){return{resetPassword:function(t){return e(function(e){return{type:Kr,data:e}}(t))},passwordnotmatch:function(){return e({type:"RESET_PASSWORD_NOTMATCH",data:t});var t}}})(Object(h.h)(function(e){var t=e.isProcessing,a=e.isError,r=e.isSuccess,n=e.resetPassword,o=e.passwordnotmatch,l=e.resetPasswordData,i=e.errMassage;return s.a.createElement(Jr,{isProcessing:t,isError:a,isSuccess:r,resetPassword:n,passwordnotmatch:o,resetPasswordData:l,errMassage:i})})),Zr=(r.Component,Object(h.h)(qr)),$r=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e;e=xt("foodjets_merchant")||{}||{},Object(f.isEmpty)(e)?window.location.href="/login":window.location.href="/dashboard"}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},"Loading....")}}]),t}(r.Component),Qr=Object(h.h)($r),es=a(1015),ts=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={userData:a.props.userData,loginHeader:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.currentPage||"",t=this.state.userData||{};Object(f.isEmpty)(t)||(document.title="".concat(t.org_name," Dashboard")),Object(f.isEmpty)(t)||"/forgot-password"===e||"/login"===e||this.props.authenticate({token:t.token}),"/"!==e&&"/forgot-password"!==e&&"/login"!==e&&(this.props.getSettings(),this.setState({loginHeader:!0}))}},{key:"componentWillReceiveProps",value:function(e){(!Object(f.isEmpty)(e.authenticateData)&&!1===e.authenticateData.status||e.isAuthenticateError)&&(localStorage.removeItem("user"),localStorage.removeItem("states"),jt(),Tt("foodjets_merchant"),window.location.href="/login")}},{key:"render",value:function(){this.state.userData;var e=this.props.currentPage||"",t="";return"/"!==e&&"/forgot-password"!==e&&"/login"!==e&&("admin"===this.props.userType&&(t="Admin View"),"general"===this.props.userType&&(t="General View"),"pharmacy"===this.props.userType&&(t="Pharmacy View")),s.a.createElement("header",{className:this.state.loginHeader?"":"logHeader"},s.a.createElement(es.a,{fluid:!0,className:"p-0"},s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{xs:"6",md:"8",sm:"6",className:"text-left h_left"},this.state.loginHeader?this.props.logo&&this.props.logo.image?s.a.createElement("img",{src:"".concat(this.props.logo.path).concat(this.props.logo.image),className:"Dash_logo",alt:"Logo"}):s.a.createElement("img",{src:"/assets/m_logo.svg",className:"login_logo",alt:"Logo"}):s.a.createElement("img",{src:"/assets/foodjets.svg",className:"login_logo",alt:"Logo"})),s.a.createElement(Te.a,{xs:"6",md:"4",sm:"6",className:"h_right text-right"},t))))}}]),t}(r.Component);ts.defaultProps={isFetching:!1,isProcessing:!1,isError:!1,isSuccess:!1,settingsData:{},userType:"",authenticateData:{},userData:{},getSettings:function(){}};var as=Object(h.h)(ts),rs=Object(b.b)(function(e,t){var a=e.headerReducer;return{isProcessing:a.isProcessing,isError:a.isError,isSuccess:a.isSuccess,isAuthenticateError:a.isAuthenticateError,settingsData:a.settingsData,logo:a.logo,userType:a.userType,authenticateData:a.authenticateData,userData:t.userData,currentPage:t.currentPage}},function(e){return{getSettings:function(t){return e(Ht(t))},authenticate:function(t){return e(function(e){return{type:Bt,data:e}}(t))}}})(Object(h.h)(function(e){var t=e.isProcessing,a=e.isError,r=e.isSuccess,n=e.isAuthenticateError,o=e.getSettings,l=e.settingsData,i=e.userType,c=e.authenticate,d=e.authenticateData,u=e.userData,m=e.currentPage,p=e.logo;return s.a.createElement(as,{isProcessing:t,isError:a,isSuccess:r,isAuthenticateError:n,getSettings:o,settingsData:l,userType:i,authenticate:c,authenticateData:d,userData:u,currentPage:m,logo:p})})),ss=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(rs,{userData:this.props.user,currentPage:this.props.currentPage})}}]),t}(r.Component),ns=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={toastModalShow:!0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleCloseModal",value:function(){this.setState({toastModalShow:!1})}},{key:"componentWillReceiveProps",value:function(e){this.setState({toastModalShow:e.toastModalShow})}},{key:"render",value:function(){var e=this,t=this.state.toastModalShow,a=this.props.taskDetails||{};return console.log("taskDetails",a),s.a.createElement(Ne.a,{size:"sm",className:"tost-modal",show:t,onHide:this.props.handleCloseModal},s.a.createElement(Ne.a.Body,null,s.a.createElement(we.a,{noGutters:!0},s.a.createElement(Te.a,{md:"12",sm:"12",className:""},s.a.createElement("h4",null,"Welcome to a Fresh, Simpler Dashboard"),s.a.createElement("p",null,"We\u2019re still working on making the experience the best it can be for you so we would love to hear your feedback."),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("img",{src:"/assets/sun_ico.svg",alt:"ico"})," New light theme for easier navigation"),s.a.createElement("li",null,s.a.createElement("img",{src:"/assets/customers_ico.svg",alt:"ico"})," Revamped Feedback page with option to respond to customers"),s.a.createElement("li",null,s.a.createElement("img",{src:"/assets/tostsearch_ico.svg",alt:"ico"})," Improved search functionality to find what you need faster"))))),s.a.createElement(Ne.a.Footer,null,s.a.createElement(xe.a,{type:"submit",className:"sbtn",variant:"primary",onClick:function(t){return e.handleCloseModal()}},"Start")))}}]),t}(r.Component),os=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleCloseModal=function(){a.setState({toastModalShow:!1})},a.handleOpenModal=function(){a.setState({toastModalShow:!0})},a.state={userData:{},toastModalShow:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handlecollapse",value:function(e){document.querySelector(".section_wrap").classList.toggle("close-pan")}},{key:"componentDidMount",value:function(){window.innerWidth<1025&&document.querySelector(".section_wrap").classList.add("close-pan")}},{key:"handleLogout",value:function(){localStorage.removeItem("user"),localStorage.removeItem("states"),Tt("foodjets_merchant"),jt(),window.location.href="/login"}},{key:"render",value:function(){var e=this,t=this.state.toastModalShow,a=this.props,r=a.userData,n=(a.userType,a.currentPage);return s.a.createElement("aside",{id:"sideBar",className:"left_nav"},s.a.createElement("span",{className:"colaps",onClick:function(){return e.handlecollapse()}}),s.a.createElement("div",{className:"navaria"},s.a.createElement("div",{className:"t_menu"},s.a.createElement("div",{className:"user_sec"},s.a.createElement("div",{className:"user-name"},"Hello",s.a.createElement("span",null,r.first_name," ",r.last_name))),s.a.createElement("ul",{className:"nav"},s.a.createElement("li",{className:"/dashboard"===n?"active":""},s.a.createElement(Nr.b,{to:"/dashboard"},s.a.createElement("img",{src:"/assets/Dashboard.svg"})," Live Dashboard")),s.a.createElement("li",{className:"/task-history"===n?"active":""},s.a.createElement(Nr.b,{to:"/task-history"},s.a.createElement("img",{src:"/assets/Tasks.svg"})," All Tasks")),s.a.createElement("li",{className:"/feedback"===n?"active":""},s.a.createElement(Nr.b,{to:"/feedback"},s.a.createElement("img",{src:"/assets/Feedback.svg"})," Feedback")),this.props.showReport&&"true"===this.props.showReport?s.a.createElement("li",{className:"/reports"===n?"active":""},s.a.createElement(Nr.b,{to:"/reports"},s.a.createElement("img",{src:"/assets/Stats.svg"})," Reports")):null,s.a.createElement("li",{className:"/settings"===n?"active":""},s.a.createElement(Nr.b,{to:"/settings"},s.a.createElement("img",{src:"/assets/settings.svg"}),"  Settings")))),s.a.createElement("div",{className:"b_menu"},s.a.createElement("a",{onClick:this.handleLogout,className:"logout-btn"},"Sign Out"),s.a.createElement("div",{className:"poweredby"},s.a.createElement("span",null,"Powered by"),s.a.createElement("img",{src:"/assets/foodjets.svg"}))),t?s.a.createElement(ns,{toastModalShow:t,handleCloseModal:this.handleCloseModal}):null),s.a.createElement("div",{className:"nav_bg",onClick:function(){return e.handlecollapse()}}))}}]),t}(r.Component),ls=Object(b.b)(function(e,t){var a=e.headerReducer;return{userData:t.user,currentPage:t.currentPage,userType:a.userType,showReport:a.showReport}})(function(e){var t=e.userData,a=e.userType,r=e.currentPage,n=e.showReport;return s.a.createElement(os,{userData:t,userType:a,currentPage:r,showReport:n})}),is="GET_HISTORY",cs="EXPORT_CSV_TASK_HISTORY",ds=function(e){return{type:"GET_HISTORY_SUCCESS",data:e}},us=function(e){return{type:"GET_HISTORY_ERROR",data:e}},ms=function(e){return{type:"EXPORT_CSV_TASK_HISTORY_SUCCESS",data:e}},ps=function(e){return{type:"EXPORT_CSV_TASK_HISTORY_ERROR",data:e}},hs=function(e){function t(e){var a,r;return Object(l.a)(this,t),(r=Object(c.a)(this,Object(d.a)(t).call(this,e))).onSelectStartDate=function(e){if(me()(e).format("X")>me()(r.state.endDate).format("X"))return Oe({message:"Start date should be lower than end date"}),!1;r.setState({startDate:e},function(){r.handleGetHistory()})},r.onSelectEndDate=function(e){var t=me()(r.state.startDate).format("X"),a=me()(e).format("X");return r.state.startDate?a<t?(Oe({message:"End date should be greater than start date"}),!1):void r.setState({endDate:e},function(){r.handleGetHistory()}):(Oe({message:"Please select start date first"}),!1)},r.onDateRange=function(e){r.setState({startDate:e.startDate,endDate:e.endDate,noofdays:e.noofdays},function(){r.handleGetHistory()})},r.handleStateChange=function(e,t){e.stopPropagation();var a=r.state.filterKeys||{};-1===a.State.findIndex(function(e){return e.value===t.value})&&a.State.push({label:t.label,value:t.value}),a.State=Object(f.sortBy)(a.State,"value"),r.setState({filterKeys:a},function(){r.handleGetHistory()})},r.handleAreaChange=function(e,t){e.stopPropagation();var a=r.state.filterKeys||{};-1===a.Area.findIndex(function(e){return e.value===t.delivery_zone_name})&&a.Area.push({label:"".concat(t.delivery_zone_name," (").concat(t.state,")"),value:t.delivery_zone_name,state:t.state,id:t.id}),a.Area=Object(f.sortBy)(a.Area,"value"),r.setState({filterKeys:a},function(){r.handleGetHistory()})},r.handleStoreChange=function(e,t){e.stopPropagation();var a=r.state.filterKeys||{};-1===a.Store.findIndex(function(e){return e.value===t.label})&&a.Store.push({store_id:t.data.store_id,id:t.data.id,label:t.label,value:t.label}),a.Store=Object(f.sortBy)(a.Store,"value"),r.setState({filterKeys:a},function(){r.handleGetHistory()})},r.handleChange=function(e){r.setState({recipient_location:e})},r.handleClick=function(e){e.stopPropagation(),r.nodeSearch.contains(e.target)||r.nodeSrchButton.contains(e.target)||r.nodeResSrchButton.contains(e.target)||"autosuggest"===e.target.getAttribute("data")||"ignore-outer-click"===e.target.getAttribute("data")||e.target.getAttribute("aria-hidden")||r.state.showSearch&&r.setState({showSearch:!1})},r.handleTypeChange=function(e){r.setState({type:e},function(){r.handleGetHistory()})},r.state=(a={startDate:new Date,from:void 0,to:void 0,editShow:!1,detailsShow:!1,mapShow:!1,trackShow:!1,visible:!1,show:!1,selectedState:null,selectedArea:null,selectedStore:null,filterKeys:{State:[],Area:[],Store:[]},storeTxt:"",stOpen:!1,showSearch:!1,showFilter:!1,filteredList:{}},Object(Ce.a)(a,"startDate",me()().subtract(1,"months").format("YYYY-MM-DD")),Object(Ce.a)(a,"endDate",me()().format("YYYY-MM-DD")),Object(Ce.a)(a,"pageno",1),Object(Ce.a)(a,"noofdays",""),Object(Ce.a)(a,"type",""),a),r.handleChange=r.handleChange.bind(Object(Q.a)(Object(Q.a)(r))),r.handleFromChange=r.handleFromChange.bind(Object(Q.a)(Object(Q.a)(r))),r.handleToChange=r.handleToChange.bind(Object(Q.a)(Object(Q.a)(r))),r.timings=[],r.handleExportTaskCsv=r.handleExportTaskCsv.bind(Object(Q.a)(Object(Q.a)(r))),r.handleSearchClose=r.handleSearchClose.bind(Object(Q.a)(Object(Q.a)(r))),r.handleRemoveFilter=r.handleRemoveFilter.bind(Object(Q.a)(Object(Q.a)(r))),r.onChangeHandle=r.onChangeHandle.bind(Object(Q.a)(Object(Q.a)(r))),r.toggleCustomSearch=r.toggleCustomSearch.bind(Object(Q.a)(Object(Q.a)(r))),r.toggleResFilter=r.toggleResFilter.bind(Object(Q.a)(Object(Q.a)(r))),r.openEditWindow=r.openEditWindow.bind(Object(Q.a)(Object(Q.a)(r))),r.openDetailsWindow=r.openDetailsWindow.bind(Object(Q.a)(Object(Q.a)(r))),r.openMapWindow=r.openMapWindow.bind(Object(Q.a)(Object(Q.a)(r))),r.openTrackWindow=r.openTrackWindow.bind(Object(Q.a)(Object(Q.a)(r))),r.deleteTask=r.deleteTask.bind(Object(Q.a)(Object(Q.a)(r))),r.updateTask=r.updateTask.bind(Object(Q.a)(Object(Q.a)(r))),r.handleClose=r.handleClose.bind(Object(Q.a)(Object(Q.a)(r))),r}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleGetHistory",value:function(){var e=this.state.filterKeys||{},t="",a="",r={};if(0===e.Store.length&&0===e.Area.length&&e.State.length>0){var s=(e.State||[]).map(function(e){return e.value});s.length>0&&(t="state",a=s)}if(0===e.Store.length&&e.Area.length>0){var n=[];(e.Area||[]).map(function(e){n[e.state]?n[e.state].zone_id.push(e.id):n.push({state:e.state,zone_id:[e.id]})}),n.length>0&&(t="zone",a=n)}if(e.Store.length>0){var o=[];(e.Store||[]).forEach(function(e){o.push(e.store_id.toString()),r[e.store_id]=e.label}),o.length>0&&(t="store-id",a=o)}var l=this.state.startDate,i=this.state.endDate;l&&i?(l=l,i=i):(l||i||(l=me()().subtract(1,"months").format("YYYY-MM-DD"),i=me()().format("YYYY-MM-DD")),l&&!i&&(i=l=l),i&&!l&&(l=i,i=i),this.setState({startDate:t,endDate:a}));var c={start:l,end:i,value_one:t||"date",value_two:a,pageno:1,type:this.state.type};"store-id"===t&&(c.storeName=r),this.props.getHistory(c,{user_type:this.props.userType,type:this.state.type,startDate:l,endDate:i,filterKeys:e,pageno:1})}},{key:"openEditWindow",value:function(e,t,a){this.props.getTaskDetails({uuid:e}),this.setState({editShow:!0,mrchnt_address:t,recpnt_address:a})}},{key:"openDetailsWindow",value:function(e){this.props.getTaskDetails({uuid:e}),this.setState({detailsShow:!0})}},{key:"openMapWindow",value:function(e){this.props.getTaskDetails({uuid:e}),this.setState({mapShow:!0})}},{key:"openTrackWindow",value:function(e,t){e.stopPropagation(),this.setState({trackShow:!0,currentUrl:t.current_url,trackDriver:t.track_driver})}},{key:"updateTask",value:function(e,t){window.confirm("Do you really want to update status of this task?")&&this.props.updateTaskStatus({uuid:e,status:t})}},{key:"deleteTask",value:function(e){window.confirm("Do you really want to delete this task?")&&this.props.deleteTask({uuid:e})}},{key:"handleClose",value:function(){this.setState({visible:!1,show:!1,editShow:!1,mapShow:!1,detailsShow:!1,trackShow:!1})}},{key:"toggleCustomSearch",value:function(){this.setState({showFilter:!1,showSearch:!this.state.showSearch,sOpen:!1,aOpen:!1,stOpen:!1})}},{key:"toggleResFilter",value:function(){this.setState({showSearch:!1,showFilter:!this.state.showFilter})}},{key:"handleExportTaskCsv",value:function(){this.props.exportTaskCsv(this.props.filterData)}},{key:"handleSearchClose",value:function(){this.setState({show:!1},function(){})}},{key:"timing",value:function(e,t){for(var a=me()().format("MM/DD/YYYY"),r=me()().unix(),s="",n=me()(a+" "+e,"MM/DD/YYYY H:mm").unix(),o=me()(a+" "+t,"MM/DD/YYYY H:mm").unix(),l=[],i=[],c=n;c<o;c+=1800)l.push({label:me()(1e3*c).format("hh:mm A"),value:me()(1e3*c).format("HH:mm:ss")}),i.push({label:me()(1e3*(c+1800)).format("hh:mm A"),value:me()(1e3*(c+1800)).format("HH:mm:ss")}),r>=c&&r<=c+1800&&(s=me()(1e3*c).format("hh:mm A")+"-"+me()(1e3*(c+1800)).format("hh:mm A"));return{from:l,to:i,key:s}}},{key:"showFromMonth",value:function(){var e=this.state,t=e.from,a=e.to;t&&me()(a).diff(me()(t),"months")<2&&this.to.getDayPicker().showMonth(t)}},{key:"handleFromChange",value:function(e){this.setState({from:e})}},{key:"handleToChange",value:function(e){this.setState({to:e},this.showFromMonth)}},{key:"componentDidMount",value:function(){var e=this;this.timings=this.timing(this.props.settingsData.start_time,this.props.settingsData.end_time);var t=this.state.startDate,a=this.state.endDate,r=(this.state.pageno,this.state.filterKeys,this.props.savedFilterData);if(Object(f.isEmpty)(r)||r.user_type!==this.props.userType){var s="admin"===this.props.userType?"general":this.props.userType;this.setState({type:s},function(){e.handleGetHistory()})}else r.filterKeys,this.setState({filterKeys:r.filterKeys,startDate:t,endDate:a,type:r.type},function(){e.handleGetHistory()});document.addEventListener("click",this.handleClick)}},{key:"handleRemoveFilter",value:function(e,t,a){var r=this;e.stopPropagation();var s=this.state.filterKeys||[];if("State"===t){var n=s[t][a].value;Object(f.remove)(s.Area,function(e){return e.state===n})}s[t].splice(a,1),"State"===t&&0===s[t].length&&(s.Area=[],s.Store=[]),"Area"===t&&0===s[t].length&&(s.Store=[]);var o="State"!==t?this.state.selectedState:null,l="Area"!==t?this.state.selectedArea:null,i="Store"!==t?this.state.selectedStore:null;this.setState({filterKeys:s,selectedState:o,selectedArea:l,selectedStore:i},function(){r.handleGetHistory()})}},{key:"onChangeHandle",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(Ce.a)({},t,a),function(){})}},{key:"componentWillReceiveProps",value:function(e){e.csvUrl&&e.csvUrl!==this.props.csvUrl&&window.open(e.csvUrl.Location.filepath),this.setState({filteredList:e.filteredList})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e,t=this,a=this.props.taskHistory||{},r=0;Object(f.isEmpty)(a)||(r=a.task_count||0);var n=this.state,o=(n.from,n.to,this.props.locations,[]),l=[];return this.state.filterKeys.State.forEach(function(e){o.push(e.label),l.push(e.value)}),s.a.createElement("div",null,s.a.createElement("section",{className:"con_top"},s.a.createElement("div",{className:"tab_pan-wrap"},s.a.createElement("div",{className:"tab_pan"},s.a.createElement("span",{onClick:function(){return t.handleTypeChange("general")},className:"general"===this.state.type?" active":""},"Grocery"),s.a.createElement("span",{onClick:function(){return t.handleTypeChange("pharmacy")},className:"pharmacy"===this.state.type?" active":""},"Rx"))),s.a.createElement("div",{className:"res_btn"},s.a.createElement("div",{className:"resfilter_btn ".concat(this.state.showFilter?"showfilter":""," "),onClick:this.toggleResFilter},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Filter"),s.a.createElement("div",{ref:function(e){return t.nodeResSrchButton=e},className:"searchmod_btn ".concat(this.state.showSearch?"showpoint":""," "),onClick:this.toggleCustomSearch},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Search")),s.a.createElement(Je.a,{method:"get",action:"",autoComplete:"off",className:"resfilter_box ".concat(this.state.showFilter?"showfilterbox":"")},s.a.createElement("div",{className:"filter_label"},"Filter by: "),s.a.createElement(et,{stateFilter:o,states:this.state.filterKeys.State,handleStateChange:this.handleStateChange,handleRemoveFilter:this.handleRemoveFilter}),s.a.createElement(tt,{area:this.state.filterKeys.Area,states:this.state.filterKeys.State,zones:this.props.zones,stateCodeFilter:l,handleAreaChange:this.handleAreaChange,handleRemoveFilter:this.handleRemoveFilter}),s.a.createElement(at,{store:this.state.filterKeys.Store,area:this.state.filterKeys.Area,stores:this.props.stores,handleStoreChange:this.handleStoreChange,handleRemoveFilter:this.handleRemoveFilter})),s.a.createElement("div",{className:"search_sec"},s.a.createElement("div",{ref:function(e){return t.nodeSrchButton=e},className:"searchmod_btn ".concat(this.state.showSearch?"showpoint":""," "),onClick:this.toggleCustomSearch},s.a.createElement("img",{src:"/assets/search-ico.svg",alt:"Search_ico"})," Search"),this.props.isTaskCsvExporting?s.a.createElement("button",{type:"button",className:"btn btn-info btn-lg btn_blue"},"Exporting..."):s.a.createElement("button",{type:"button",onClick:this.handleExportTaskCsv,className:"btn btn-info btn-lg btn_blue"},"Export CSV"))),s.a.createElement("section",{className:"date_range_section"},s.a.createElement("div",{className:"filter_label"},"Range: "),s.a.createElement("div",{className:"InputFromTo"},s.a.createElement("div",{className:"DayPickerInput"},s.a.createElement(Ft,{selectDate:this.state.startDate,startDate:this.state.startDate,endDate:this.state.endDate,noofdays:this.state.noofdays,onSelectDate:this.onSelectStartDate,onDateRange:this.onDateRange,className:"t_box",placeholder:"Start Date"}))," ",s.a.createElement("span",{className:"to"},"to")," "," ",s.a.createElement("span",{className:"InputFromTo-to"},s.a.createElement("div",{className:"DayPickerInput"},s.a.createElement(Ft,{selectDate:this.state.endDate,startDate:this.state.startDate,endDate:this.state.endDate,noofdays:this.state.noofdays,onSelectDate:this.onSelectEndDate,onDateRange:this.onDateRange,className:"t_box",placeholder:"End Date",disabled:!this.state.startDate}))))),r>0?s.a.createElement("div",{className:"liveOrders"},r," Tasks"):null,this.state.filterKeys.State.length>0||this.state.filterKeys.Area.length>0||this.state.filterKeys.Store.length>0?s.a.createElement("section",{className:"filter-tag_section"},this.state.filterKeys.State.length>0?this.state.filterKeys.State.map(function(e,a){return s.a.createElement("span",{key:a,className:"f-tag"},e.label,s.a.createElement("a",{onClick:function(e){return t.handleRemoveFilter(e,"State",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null,this.state.filterKeys.Area.length>0?this.state.filterKeys.Area.map(function(e,a){return s.a.createElement("span",{key:a,className:"f-tag"},e.label,s.a.createElement("a",{onClick:function(e){return t.handleRemoveFilter(e,"Area",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null,this.state.filterKeys.Store.length>0?this.state.filterKeys.Store.map(function(e,a){return s.a.createElement("span",{key:a,className:"f-tag"},e.label,s.a.createElement("a",{onClick:function(e){return t.handleRemoveFilter(e,"Store",a)}},s.a.createElement("img",{src:"/assets/cancel-ico.svg",alt:"close"})))}):null):null,s.a.createElement("div",{ref:function(e){return t.nodeSearch=e}},s.a.createElement(Qe,(e={filteredList:this.state.filteredList,settingsData:this.props.settingsData,timings:this.timings,searchFilter:this.props.searchFilter,resetSearch:this.props.resetSearch,showSearch:this.state.showSearch,getTaskDetails:this.props.getTaskDetails,taskDetails:this.props.taskDetails,deleteTask:this.props.deleteTask,updateTaskStatus:this.props.updateTaskStatus,editTask:this.props.editTask,getTrackDetails:this.props.getTrackDetails,openEditWindow:this.openEditWindow,openDetailsWindow:this.openDetailsWindow,openMapWindow:this.openMapWindow},Object(Ce.a)(e,"deleteTask",this.deleteTask),Object(Ce.a)(e,"updateTask",this.updateTask),Object(Ce.a)(e,"openTrackWindow",this.openTrackWindow),Object(Ce.a)(e,"section","All Tasks"),e)),this.state.editShow?s.a.createElement(Me,{taskDetails:this.props.taskDetails,show:this.state.editShow,timings:this.props.timings,settingsData:this.props.settingsData,editTask:this.props.editTask,mrchnt_address:this.state.mrchnt_address,recpnt_address:this.state.recpnt_address,handleClose:this.handleClose}):null,s.a.createElement(He,{show:this.state.trackShow,currentUrl:this.state.currentUrl,trackDriver:this.state.trackDriver,handleClose:this.handleClose}),this.state.detailsShow?s.a.createElement(Ie,{show:this.state.detailsShow,taskDetails:this.props.taskDetails,handleClose:this.handleClose}):null,this.state.mapShow?s.a.createElement(Be,{show:this.state.mapShow,taskDetails:this.props.taskDetails,handleClose:this.handleClose}):null))}}]),t}(r.Component),fs=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.taskList||{};return this.props.isProcessing?s.a.createElement("div",{className:"loader"},"Loading...."):Object.keys(t||{}).map(function(a,r){var n=t[a].orders||[];return s.a.createElement("div",{key:r,className:"table_sec"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"7",className:"t-titel"},a))),s.a.createElement("tbody",null,s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Delivery Window"),s.a.createElement("th",null,"Merchant Address"),s.a.createElement("th",null,"Recipient Address"),s.a.createElement("th",null,"Driver"),s.a.createElement("th",null,"Task Status"),s.a.createElement("th",null)),n.map(function(t,a){var r=ge(t.tsk_status),n="".concat(t.mrchnt_address.number," ").concat(t.mrchnt_address.street,", ").concat(t.mrchnt_address.city),o="".concat(t.recpnt_address.number," ").concat(t.recpnt_address.street,", ").concat(t.recpnt_address.city);return s.a.createElement("tr",{key:a,onContextMenu:function(a){return e.props.handleContextMenu(a,{order_number:t.order_number,order_id:t.id,order_uuid:t.uuid,tsk_status:t.tsk_status,mrchnt_address:n,recpnt_address:o})}},s.a.createElement("td",null,t.order_number),s.a.createElement("td",null,t.complete_after," - ",t.complete_before),s.a.createElement("td",{className:"acell"},s.a.createElement("label",null,n),s.a.createElement("span",{className:"tTip"},n)),s.a.createElement("td",{className:"acell"},s.a.createElement("label",null,o),s.a.createElement("span",{className:"tTip"},o)),s.a.createElement("td",null,t.driver_name),s.a.createElement("td",null,s.a.createElement("span",{className:r},t.tsk_status)),s.a.createElement("td",null,t.track_driver&&"Completed"!==t.tsk_status?s.a.createElement("a",{onClick:function(a){return e.props.openTrackWindow(a,{current_url:t.current_url,track_driver:t.track_driver})}},t.track_driver):null))}))))})}}]),t}(r.Component),_s=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.taskList||{};return this.props.isProcessing?s.a.createElement("div",{className:"loader"},"Loading...."):Object.keys(t||{}).map(function(a,r){var n=t[a]||[];return s.a.createElement("div",{key:r},s.a.createElement("h3",{className:"title"},a),n.map(function(t,a){var r=t.orders||[];return s.a.createElement("div",{key:a,className:"table_sec"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"7",className:"t-titel"},t.name))),s.a.createElement("tbody",null,s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Delivery Window"),s.a.createElement("th",null,"Merchant Address"),s.a.createElement("th",null,"Recipient Address"),s.a.createElement("th",null,"Driver"),s.a.createElement("th",null,"Task Status"),s.a.createElement("th",null)),r.map(function(t,a){var r=ge(t.tsk_status),n="".concat(t.mrchnt_address.number," ").concat(t.mrchnt_address.street,", ").concat(t.mrchnt_address.city),o="".concat(t.recpnt_address.number," ").concat(t.recpnt_address.street,", ").concat(t.recpnt_address.city);return s.a.createElement("tr",{key:a,onContextMenu:function(a){return e.props.handleContextMenu(a,{order_number:t.order_number,order_id:t.id,order_uuid:t.uuid,tsk_status:t.tsk_status,mrchnt_address:n,recpnt_address:o})}},s.a.createElement("td",null,t.order_number),s.a.createElement("td",null,t.complete_after," - ",t.complete_before),s.a.createElement("td",{className:"acell"},s.a.createElement("label",null,n),s.a.createElement("span",{className:"tTip"},n)),s.a.createElement("td",{className:"acell"},s.a.createElement("label",null,o),s.a.createElement("span",{className:"tTip"},o)),s.a.createElement("td",null,t.driver_name),s.a.createElement("td",null,s.a.createElement("span",{className:r},t.tsk_status)),s.a.createElement("td",null,t.track_driver&&"Completed"!==t.tsk_status?s.a.createElement("a",{onClick:function(a){return e.props.openTrackWindow(a,{current_url:t.current_url,track_driver:t.track_driver})}},t.track_driver):null))}))))}))})}}]),t}(r.Component),bs=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.taskList||{};return this.props.isProcessing?s.a.createElement("div",{className:"loader"},"Loading...."):s.a.createElement("div",{className:"table_sec"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"7",className:"t-titel"},"All Tasks"))),s.a.createElement("tbody",null,s.a.createElement("tr",{className:"t-heading"},s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Delivery Window"),s.a.createElement("th",null,"Merchant Address"),s.a.createElement("th",null,"Recipient Address"),s.a.createElement("th",null,"Driver"),s.a.createElement("th",null,"Task Status"),s.a.createElement("th",null)),t.map(function(t,a){var r=Ee(t.tskStatus),n=ge(r),o="".concat(t.merchant.address.number," ").concat(t.merchant.address.street,", ").concat(t.merchant.address.city),l="".concat(t.recipients.address.number," ").concat(t.recipients.address.street,", ").concat(t.recipients.address.city),i="",c="";return""!==t.timezone?(i=he(1e3*parseInt(t.completeAfter),t.timezone,"MM/DD \xb7 hh:mma"),c=he(1e3*parseInt(t.completeBefore),t.timezone,"hh:mma")):(i=fe(1e3*parseInt(t.completeAfter),"MM/DD \xb7 hh:mma"),c=fe(1e3*parseInt(t.completeBefore),"hh:mma")),s.a.createElement("tr",{key:a,onContextMenu:function(a){return e.props.handleContextMenu(a,{order_number:t.orderNumber,order_id:t.id,order_uuid:t.uuid,tsk_status:t.tskStatus,mrchnt_address:o,recpnt_address:l})}},s.a.createElement("td",null,t.orderNumber),s.a.createElement("td",null,i," - ",c),s.a.createElement("td",{className:"acell"},s.a.createElement("label",null,o),s.a.createElement("span",{className:"tTip"},o)),s.a.createElement("td",{className:"acell"},s.a.createElement("label",null,l),s.a.createElement("span",{className:"tTip"},l)),s.a.createElement("td",null,t.driver_name),s.a.createElement("td",null,s.a.createElement("span",{className:n},r)),s.a.createElement("td",null,t.track_driver&&"Completed"!==r?s.a.createElement("a",{onClick:function(a){return e.props.openTrackWindow(a,{current_url:t.current_url,track_driver:t.track_driver})}},t.track_driver):null))}))))}}]),t}(r.Component),gs=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).hideContextMenu=function(){a.setState({visible:!1,x:0,y:0})},a.changePage=function(e){var t=e.currentPage,r=Object(m.a)({},a.props.filterData);r.pageno=t,t!==a.props.filterData.pageno&&a.props.getHistory(r,a.props.savedFilterData)},a.state={editShow:!1,detailsShow:!1,mapShow:!1,trackShow:!1,visible:!1,x:"",y:"",tasks:{},isLoading:!0,mrchnt_address:"",recpnt_address:"",filteredList:[]},a.handleContextMenu=a.handleContextMenu.bind(Object(Q.a)(Object(Q.a)(a))),a.openEditWindow=a.openEditWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.openDetailsWindow=a.openDetailsWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.openMapWindow=a.openMapWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.openTrackWindow=a.openTrackWindow.bind(Object(Q.a)(Object(Q.a)(a))),a.deleteTask=a.deleteTask.bind(Object(Q.a)(Object(Q.a)(a))),a.updateTask=a.updateTask.bind(Object(Q.a)(Object(Q.a)(a))),a.handleClose=a.handleClose.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleContextMenu",value:function(e,t){e.preventDefault();var a=e.clientX,r=e.pageY;this.setState({visible:!0,x:a,y:r,selOrder:Object(m.a)({},t)})}},{key:"openEditWindow",value:function(e,t,a){this.props.getTaskDetails({uuid:e}),this.setState({editShow:!0,mrchnt_address:t,recpnt_address:a})}},{key:"openDetailsWindow",value:function(e){this.props.getTaskDetails({uuid:e}),this.setState({detailsShow:!0})}},{key:"openMapWindow",value:function(e){this.props.getTaskDetails({uuid:e}),this.setState({mapShow:!0})}},{key:"openTrackWindow",value:function(e,t){e.stopPropagation(),this.setState({trackShow:!0,currentUrl:t.current_url,trackDriver:t.track_driver})}},{key:"updateTask",value:function(e,t){window.confirm("Do you really want to update status of this task?")&&this.props.updateTaskStatus({uuid:e,status:t})}},{key:"deleteTask",value:function(e){window.confirm("Do you really want to delete this task?")&&this.props.deleteTask({uuid:e})}},{key:"handleClose",value:function(){this.setState({visible:!1,editShow:!1,mapShow:!1,detailsShow:!1,trackShow:!1})}},{key:"render",value:function(){var e=this.props.taskHistory||{},t={},a=0,r="";Object(f.isEmpty)(e)||(t=e.tasks||{},a=e.task_count||0,r=e.list_type);var n=a;return Object(f.isEmpty)(this.props.taskHistory)?s.a.createElement("div",{className:"loader"},"Loading...."):s.a.createElement("div",null,s.a.createElement(je,{visible:this.state.visible,x:this.state.x,y:this.state.y,selOrder:this.state.selOrder,openEditWindow:this.openEditWindow,openDetailsWindow:this.openDetailsWindow,openMapWindow:this.openMapWindow,deleteTask:this.deleteTask,updateTask:this.updateTask,hideContextMenu:this.hideContextMenu}),Object(f.isEmpty)(t)?s.a.createElement("section",{className:"content"},s.a.createElement("div",{className:"no-records"},"No Records")):s.a.createElement("section",{className:"content",style:{minHeight:"400px"}},"date"===r?s.a.createElement(bs,{taskList:t,handleContextMenu:this.handleContextMenu,openTrackWindow:this.openTrackWindow,isProcessing:this.props.isProcessing}):null,"state"===r?s.a.createElement(fs,{taskList:t,handleContextMenu:this.handleContextMenu,openTrackWindow:this.openTrackWindow,isProcessing:this.props.isProcessing}):null,"zone"===r?s.a.createElement(_s,{taskList:t,handleContextMenu:this.handleContextMenu,openTrackWindow:this.openTrackWindow,isProcessing:this.props.isProcessing}):null,"store-id"===r?s.a.createElement(_s,{taskList:t,handleContextMenu:this.handleContextMenu,openTrackWindow:this.openTrackWindow,isProcessing:this.props.isProcessing}):null,n>=500?s.a.createElement("div",{className:"pagination_Pan"},s.a.createElement(Lt,{totalRecords:n,pageLimit:500,pageNeighbours:1,onPageChanged:this.changePage,isProcessing:this.props.isProcessing})):null),this.state.editShow?s.a.createElement(Me,{taskDetails:this.props.taskDetails,show:this.state.editShow,taskType:this.props.taskType,stores:this.props.stores,locations:this.props.locations,pharmacy:this.props.pharmacy,timings:this.props.timings,settingsData:this.props.settingsData,editTask:this.props.editTask,mrchnt_address:this.state.mrchnt_address,recpnt_address:this.state.recpnt_address,handleClose:this.handleClose}):null,s.a.createElement(He,{show:this.state.trackShow,currentUrl:this.state.currentUrl,trackDriver:this.state.trackDriver,handleClose:this.handleClose}),this.state.detailsShow?s.a.createElement(Ie,{show:this.state.detailsShow,taskDetails:this.props.taskDetails,handleClose:this.handleClose}):null,this.state.mapShow?s.a.createElement(Be,{show:this.state.mapShow,taskDetails:this.props.taskDetails,handleClose:this.handleClose}):null)}}]),t}(r.Component),Es=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).getHistory=function(e,t){a.setState({filterData:Object(m.a)({},e)},function(){e.filter={key:"history",value:JSON.stringify(t)},a.props.getHistory(e)})},a.state={org_id:a.props.userData?a.props.userData.org_id:"",selectedState:null,selectedArea:null,selectedStore:null,filterKeys:{State:[],Area:[],Store:[]},type:"general",searchTxt:"",sOpen:!1,selOrder:{},filterData:{}},a.timings=[],a.searchFilter=a.searchFilter.bind(Object(Q.a)(Object(Q.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"searchFilter",value:function(e){this.props.search(Object(m.a)({},e,{user_type:this.state.type,dateType:"range"}))}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){this.props.getLocations()}},{key:"render",value:function(){var e=this.props.locations||{},t=!!e.pharmacy&&e.pharmacy,a=e.stores||[],r=e.locations||[],n=e.taskType||"",o=e.zones||{},l=this.props.userType||"",i=this.props.filterData.history||{};return s.a.createElement("main",{className:"dash right_sec taskp ".concat("admin"!==l?" noAdmin":"")},this.props.isFilterLoaded?s.a.createElement(hs,{getHistory:this.getHistory,taskHistory:this.props.taskHistory,stores:a,zones:o,handleStateChange:this.handleStateChange,handleAreaChange:this.handleAreaChange,handleStoreChange:this.handleStoreChange,searchFilter:this.searchFilter,resetSearch:this.props.resetSearch,handleRemoveFilter:this.handleRemoveFilter,getLocations:this.props.getLocations,taskType:n,locations:r,pharmacy:t,timings:this.timings,filterData:this.state.filterData,userData:this.props.userData,settingsData:this.props.settingsData,createTask:this.props.createTask,filteredList:this.props.filteredList,getTaskDetails:this.props.getTaskDetails,taskDetails:this.props.taskDetails,deleteTask:this.props.deleteTask,updateTaskStatus:this.props.updateTaskStatus,editTask:this.props.editTask,getTrackDetails:this.props.getTrackDetails,isTaskProcessing:this.props.isTaskProcessing,exportTaskCsv:this.props.exportTaskCsv,csvUrl:this.props.csvUrl,isTaskCsvExporting:this.props.isTaskCsvExporting,userType:l,savedFilterData:i}):null,Object(f.isEmpty)(this.state.filterData)?s.a.createElement("div",{className:"loader"},"Loading...."):s.a.createElement(gs,{getHistory:this.getHistory,taskHistory:this.props.taskHistory,type:this.state.type,org_id:this.state.org_id,searchTxt:this.state.searchTxt,taskType:n,stores:a,locations:r,pharmacy:t,timings:this.timings,getTaskDetails:this.props.getTaskDetails,taskDetails:this.props.taskDetails,deleteTask:this.props.deleteTask,updateTaskStatus:this.props.updateTaskStatus,editTask:this.props.editTask,settingsData:this.props.settingsData,getTrackDetails:this.props.getTrackDetails,filterData:this.state.filterData,isProcessing:this.props.isProcessing,savedFilterData:this.props.filterData}))}}]),t}(r.Component);Es.defaultProps={userData:{},isFetching:!1,isProcessing:!1,isError:!1,isSuccess:!1,history:{},getHistory:function(){},exportTaskCsv:function(){},isTaskCsvExporting:!1};var vs=Object(h.h)(Es),ys=Object(b.b)(function(e,t){var a=e.dashboardReducer,r=e.taskHistoryReducer,s=e.headerReducer;return{userData:t.userData,userType:s.userType,locations:a.locations,settingsData:s.settingsData,isProcessing:r.isProcessing,isError:r.isError,isSuccess:r.isSuccess,taskHistory:r.taskHistory,taskDetails:a.taskDetails,filteredList:a.filteredList,csvUrl:r.csvUrl,isTaskCsvExporting:r.isTaskCsvExporting,filterData:s.filterData,isFilterLoaded:s.isFilterLoaded,isEditTaskProcessing:a.isEditTaskProcessing}},function(e){return{updateTaskStatus:function(t){return e(B(t))},deleteTask:function(t){return e(z(t))},getLocations:function(t){return e(w(t))},editTask:function(t){return e(P(t))},getTaskDetails:function(t){return e(F(t))},getTrackDetails:function(t){return e(M(t))},search:function(t){return e(V(t))},resetSearch:function(t){return e(G(t))},getSettings:function(t){return e(Ht(t))},getHistory:function(t){return e(function(e){return{type:is,data:e}}(t))},exportTaskCsv:function(t){return e(function(e){return{type:cs,data:e}}(t))}}})(Object(h.h)(function(e){var t=e.userData,a=e.getLocations,r=e.locations,n=e.settingsData,o=e.userType,l=e.isProcessing,i=e.isError,c=e.isSuccess,d=e.getHistory,u=e.taskHistory,m=e.getTaskDetails,p=e.taskDetails,h=e.deleteTask,f=e.editTask,_=e.updateTaskStatus,b=e.getTrackDetails,g=e.search,E=e.resetSearch,v=e.filteredList,y=e.exportTaskCsv,k=e.csvUrl,S=e.isTaskCsvExporting,O=e.getSettings,D=e.filterData,j=e.isFilterLoaded,C=e.isEditTaskProcessing;return s.a.createElement(vs,{userData:t,getLocations:a,locations:r,settingsData:n,userType:o,isProcessing:l,isError:i,isSuccess:c,getHistory:d,taskHistory:u,getTaskDetails:m,taskDetails:p,deleteTask:h,editTask:f,updateTaskStatus:_,getTrackDetails:b,search:g,resetSearch:E,filteredList:v,exportTaskCsv:y,csvUrl:k,isTaskCsvExporting:S,getSettings:O,filterData:D,isFilterLoaded:j,isEditTaskProcessing:C})})),ks=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(ys,null))}}]),t}(r.Component),Ss=Object(h.h)(ks),Os=[{path:"/",exact:!0,component:Qr},{path:"/login",component:Mr},{path:"/reset-password/:id",component:Zr},{path:"/forgot-password",component:Hr}],Ds=[{path:"/dashboard",component:ct},{path:"/feedback",component:$t},{path:"/reports",component:Cr},{path:"/settings",component:Za},{path:"/task-history",component:Ss}];function js(){var e={};if("undefined"!==typeof window){var t=Ot()||{},a=xt("foodjets_merchant")||{};if(e=a||{},t.token!=a.token)0===JSON.parse(localStorage.getItem("states")||"[]").length&&localStorage.setItem("states",JSON.stringify(ie.states||[]))}var r=Object(h.g)().pathname;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ss,{user:e,currentPage:r}),s.a.createElement(es.a,{fluid:!0,className:"p-0 section_wrap"},"/"===r||"/login"===r||"/forgot-password"===r||r.includes("/reset-password")?null:s.a.createElement(ls,{user:e,currentPage:r}),s.a.createElement(h.d,null,Ds.map(function(t){return s.a.createElement(Cs,{key:t.path,path:t.path,component:t.component,userData:e})}),Os.map(function(e){return s.a.createElement(h.b,Object.assign({key:"index ".concat(e.path)},e))}))))}function Cs(e){var t=e.component,a=Object(p.a)(e,["component"]),r=Object(m.a)({component:t},a),n=r.userData;return Object(f.isEmpty)(n)?s.a.createElement(h.a,{to:{pathname:"/login"}}):s.a.createElement(h.b,{key:r.path,path:r.path,component:function(){return s.a.createElement(r.component,{userData:n})}})}var ws=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"app header-fixed aside-menu-fixed sidebar-lg-show pace-done sidebar-lg-show"},s.a.createElement("div",{id:"notify",className:"notify"}),s.a.createElement(js,null))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ts=a(88),xs={isFetching:!1,isError:!1,isSuccess:!1,isProcessing:!1,loginData:{}},Ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DO_LOGIN":return Object(m.a)({},e,{isProcessing:!0,isError:!1,isSuccess:!1,loginData:{}});case"DO_LOGIN_SUCCESS":return console.log("Reducer : ",t.data),Object(m.a)({},e,{isProcessing:!1,isError:!1,isSuccess:!0,loginData:t.data});case"DO_LOGIN_ERROR":return Object(m.a)({},e,{isProcessing:!1,isError:!0,isSuccess:!1,loginData:t.data});default:return e}},Rs={isFetching:!1,isError:!1,isSuccess:!1,isProcessing:!1,forgotPasswordData:{}},Ps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT_PASSWORD_RESET":return Object(m.a)({},e,{isProcessing:!1,isError:!1,isSuccess:!1,forgotPasswordData:{}});case"FORGOT_PASSWORD":return Object(m.a)({},e,{isProcessing:!0,isError:!1,isSuccess:!1,forgotPasswordData:{}});case"FORGOT_PASSWORD_SUCCESS":return console.log("Reducer : ",t.data),Object(m.a)({},e,{isProcessing:!1,isError:!1,isSuccess:!0,forgotPasswordData:t.data});case"FORGOT_PASSWORD_ERROR":return Object(m.a)({},e,{isProcessing:!1,isError:!0,isSuccess:!1,forgotPasswordData:t.data});default:return e}},Ls={isFetching:!1,isError:!1,isSuccess:!1,isProcessing:!1,resetPasswordData:{},errMassage:""},As=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ls,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_PASSWORD":return Object(m.a)({},e,{isProcessing:!0,isError:!1,isSuccess:!1,resetPasswordData:{},errMassage:""});case"RESET_PASSWORD_SUCCESS":return console.log("Reducer : ",t.data),Object(m.a)({},e,{isProcessing:!1,isError:!1,isSuccess:!0,resetPasswordData:t.data,errMassage:""});case"RESET_PASSWORD_ERROR":var a=t.data.message;return Object(m.a)({},e,{isProcessing:!1,isError:!0,isSuccess:!1,resetPasswordData:{},errMassage:a});case"RESET_PASSWORD_NOTMATCH":return Object(m.a)({},e,{isProcessing:!1,isError:!0,isSuccess:!1,resetPasswordData:{},errMassage:"Password does not match"});default:return e}},Ms={isFetching:!1,isError:!1,isSuccess:!1,isProcessing:!1,settingsData:{},userType:"",authenticateData:{},showReport:"false",filterData:{},isFilterLoaded:!1},Fs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ms,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SETTINGS":return Object(m.a)({},e,{isProcessing:!0,isError:!1,isSuccess:!1,isFilterLoaded:!1,logo:{},filterData:{}});case"GET_SETTINGS_SUCCESS":return Object(m.a)({},e,{isProcessing:!1,isError:!1,isSuccess:!0,isFilterLoaded:!0,logo:t.data.logo,settingsData:t.data.settings,userType:t.data.userType,showReport:t.data.showReport,filterData:t.data.filterData});case"GET_SETTINGS_ERROR":return Object(m.a)({},e,{isProcessing:!1,isError:!0,isSuccess:!1,isFilterLoaded:!0,logo:{},settingsData:{},userType:"",showReport:"false"});case"AUTHENTICATE":return Object(m.a)({},e,{isAuthenticateError:!1});case"AUTHENTICATE_SUCCESS":return Object(m.a)({},e,{isAuthenticateError:!1,authenticateData:t.data});case"AUTHENTICATE_ERROR":return Object(m.a)({},e,{isAuthenticateError:!0,authenticateData:{}});case"SYNC_FILTER":var a=e.filterData;return a[t.data.key]=t.data.value,Object(m.a)({},e,{filterData:a});default:return e}},Us={isFetching:!1,isError:!1,isSuccess:!1,isProcessing:!1,isTaskError:!1,isTaskSuccess:!1,isTaskProcessing:!1,isEditTaskError:!1,isEditTaskSuccess:!1,isEditTaskProcessing:!1,isDetailsError:!1,isDetailsSuccess:!1,isDetailsProcessing:!1,isDeleteError:!1,isDeleteSuccess:!1,isDeleteProcessing:!1,locations:{},taskDetails:{},filteredList:{},shoppedLate:{summary:{total_orders:0,shopped_late:0,shopping_late_percent:0},type:"default"}},Ys=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Us,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LOCATIONS":return Object(m.a)({},e,{isProcessing:!0,isError:!1,isSuccess:!1});case"GET_LOCATIONS_SUCCESS":return Object(m.a)({},e,{isProcessing:!1,isError:!1,isSuccess:!0,locations:t.data});case"GET_LOCATIONS_ERROR":return Object(m.a)({},e,{isProcessing:!1,isError:!0,isSuccess:!1,locations:{}});case"CREATE_TASK":return Object(m.a)({},e,{isTaskProcessing:!0,isTaskError:!1,isTaskSuccess:!1});case"CREATE_TASK_SUCCESS":return Object(m.a)({},e,{isTaskProcessing:!1,isTaskError:!1,isTaskSuccess:!0});case"CREATE_TASK_ERROR":return Object(m.a)({},e,{isTaskProcessing:!1,isTaskError:!0,isTaskSuccess:!1});case"EDIT_TASK":return Object(m.a)({},e,{isEditTaskProcessing:!0,isEditTaskError:!1,isEditTaskSuccess:!1});case"EDIT_TASK_SUCCESS":return Object(m.a)({},e,{isEditTaskProcessing:!1,isEditTaskError:!1,isEditTaskSuccess:!0});case"EDIT_TASK_ERROR":return Object(m.a)({},e,{isEditTaskProcessing:!1,isEditTaskError:!0,isEditTaskSuccess:!1});case"GET_TASK_DETAILS":return Object(m.a)({},e,{isDetailsProcessing:!0,isDetailsError:!1,isDetailsSuccess:!1,taskDetails:{}});case"GET_TASK_DETAILS_SUCCESS":return Object(m.a)({},e,{isDetailsProcessing:!1,isDetailsError:!1,isDetailsSuccess:!0,taskDetails:t.data});case"GET_TASK_DETAILS_ERROR":return Object(m.a)({},e,{isDetailsProcessing:!1,isDetailsError:!0,isDetailsSuccess:!1,taskDetails:{}});case"DELETE_TASK":return Object(m.a)({},e,{isDeleteProcessing:!0,isDeleteError:!1,isDeleteSuccess:!1});case"DELETE_TASK_SUCCESS":return Object(m.a)({},e,{isDeleteProcessing:!1,isDeleteError:!1,isDeleteSuccess:!0});case"DELETE_TASK_ERROR":return Object(m.a)({},e,{isDeleteProcessing:!1,isDeleteError:!0,isDeleteSuccess:!1});case"UPDATE_TASK_STATUS":return Object(m.a)({},e,{isDeleteProcessing:!0,isDeleteError:!1,isDeleteSuccess:!1});case"UPDATE_TASK_STATUS_SUCCESS":return Object(m.a)({},e,{isDeleteProcessing:!1,isDeleteError:!1,isDeleteSuccess:!0});case"UPDATE_TASK_STATUS_ERROR":return Object(m.a)({},e,{isDeleteProcessing:!1,isDeleteError:!0,isDeleteSuccess:!1});case"TASK_SEARCH":return Object(m.a)({},e,{isSearching:!0});case"RESET_TASK_SEARCH":return Object(m.a)({},e,{filteredList:{}});case"TASK_SEARCH_SUCCESS":return Object(m.a)({},e,{isSearching:!1,filteredList:t.data});case"TASK_SEARCH_ERROR":return Object(m.a)({},e,{isSearching:!1,filteredList:{}});case"GET_SHOPPEDLATE":case"GET_SHOPPEDLATE_ERROR":return Object(m.a)({},e,{shoppedLate:Object(m.a)({},Us.shoppedLate)});case"GET_SHOPPEDLATE_SUCCESS":return Object(m.a)({},e,{shoppedLate:t.data});default:return e}},zs={isFetching:!1,isError:!1,isSuccess:!1,isProcessing:!1,taskHistory:{},csvUrl:{},isTaskCsvExporting:!1},Is=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_HISTORY":return Object(m.a)({},e,{isProcessing:!0,isError:!1,isSuccess:!1});case"GET_HISTORY_SUCCESS":return Object(m.a)({},e,{isProcessing:!1,isError:!1,isSuccess:!0,taskHistory:t.data});case"GET_HISTORY_ERROR":return Object(m.a)({},e,{isProcessing:!1,isError:!0,isSuccess:!1,taskHistory:{}});case"EXPORT_CSV_TASK_HISTORY":return Object(m.a)({},e,{isTaskCsvExporting:!0,isError:!1,isSuccess:!1});case"EXPORT_CSV_TASK_HISTORY_SUCCESS":return Object(m.a)({},e,{isTaskCsvExporting:!1,isError:!1,isSuccess:!0,csvUrl:t.data});case"EXPORT_CSV_TASK_HISTORY_ERROR":return Object(m.a)({},e,{isTaskCsvExporting:!1,isError:!0,isSuccess:!1,csvUrl:{}});default:return e}},Ws={locations:{},feedbackData:{},isReplying:!1,isLoading:!1,isSearching:!1,isFiltering:!1,replyResult:{},searchResultList:{},feedbackSummeryData:{}},Bs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SUMMERY":return Object(m.a)({},e,{isLoading:!0});case"GET_SUMMERY_SUCCESS":return Object(m.a)({},e,{isLoading:!1,feedbackSummeryData:t.data});case"GET_SUMMERY_ERROR":return Object(m.a)({},e,{isLoading:!1,feedbackSummeryData:{}});case"GET_FEEDBACK":return Object(m.a)({},e,{isFiltering:!0});case"GET_FEEDBACK_SUCCESS":return Object(m.a)({},e,{isFiltering:!1,feedbackData:t.data});case"GET_FEEDBACK_ERROR":return Object(m.a)({},e,{isFiltering:!1,feedbackData:{}});case"FEEDBACK_SEARCH":return Object(m.a)({},e,{isSearching:!0});case"FEEDBACK_SEARCH_SUCCESS":return Object(m.a)({},e,{isSearching:!1,searchResultList:t.data});case"FEEDBACK_SEARCH_ERROR":return Object(m.a)({},e,{isSearching:!1,searchResultList:{}});case"REPLY":return Object(m.a)({},e,{isReplying:!0});case"REPLY_SUCCESS":return Object(m.a)({},e,{isReplying:!1,replyResult:t.data});case"REPLY_ERROR":return Object(m.a)({},e,{isReplying:!1,replyResult:{}});default:return e}},Hs={profileData:{},isLoading:!1,isProcessing:!1,isPassProcessing:!1,isStoreLoading:!1,isStoreProcessing:!1,isLocProcessing:!1,isUserLoading:!1,isUserUpdating:!1,storesList:[],usersList:{}},Ks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_INFO":return Object(m.a)({},e,{isLoading:!0,profileData:{}});case"GET_INFO_ERROR":return Object(m.a)({},e,{isLoading:!1,profileData:{}});case"GET_INFO_SUCCESS":return Object(m.a)({},e,{isLoading:!1,profileData:t.data});case"GET_STORES":return Object(m.a)({},e,{isStoreLoading:!0});case"GET_STORES_ERROR":return Object(m.a)({},e,{isStoreLoading:!1,storesList:{}});case"GET_STORES_SUCCESS":return Object(m.a)({},e,{isStoreLoading:!1,storesList:t.data});case"UPDATE_PROFILE":return Object(m.a)({},e,{isProcessing:!0});case"UPDATE_PROFILE_ERROR":case"UPDATE_PROFILE_SUCCESS":return Object(m.a)({},e,{isProcessing:!1});case"CHANGE_PASS":return Object(m.a)({},e,{isPassProcessing:!0});case"CHANGE_PASS_ERROR":case"CHANGE_PASS_SUCCESS":return Object(m.a)({},e,{isPassProcessing:!1});case"ADD_LOCATION":return Object(m.a)({},e,{isLocProcessing:!0});case"ADD_LOCATION_ERROR":case"ADD_LOCATION_SUCCESS":return Object(m.a)({},e,{isLocProcessing:!1});case"EDIT_STORE":return Object(m.a)({},e,{isStoreProcessing:!0});case"EDIT_STORE_ERROR":case"EDIT_STORE_SUCCESS":return Object(m.a)({},e,{isStoreProcessing:!1});case"DELETE_STORE":return Object(m.a)({},e);case"DELETE_STORE_ERROR":return Object(m.a)({},e,{storesList:{}});case"DELETE_STORE_SUCCESS":return Object(m.a)({},e,{storesList:t.data});case"GET_USER":return Object(m.a)({},e,{isUserLoading:!0});case"GET_USER_ERROR":return Object(m.a)({},e,{isUserLoading:!1,usersList:{}});case"GET_USER_SUCCESS":return Object(m.a)({},e,{isUserLoading:!1,usersList:t.data});case"ADD_USER":return Object(m.a)({},e,{isUserUpdating:!0});case"ADD_USER_ERROR":return Object(m.a)({},e,{isUserUpdating:!1,usersList:{}});case"ADD_USER_SUCCESS":return Object(m.a)({},e,{isUserUpdating:!1,usersList:t.data});case"EDIT_USER":return Object(m.a)({},e,{isUserUpdating:!0});case"EDIT_USER_ERROR":return Object(m.a)({},e,{isUserUpdating:!1,usersList:{}});case"EDIT_USER_SUCCESS":return Object(m.a)({},e,{isUserUpdating:!1,usersList:t.data});case"DELETE_USER":return Object(m.a)({},e,{isUserUpdating:!0});case"DELETE_USER_ERROR":return Object(m.a)({},e,{isUserUpdating:!1,usersList:{}});case"DELETE_USER_SUCCESS":return Object(m.a)({},e,{isUserUpdating:!1,usersList:t.data});case"SUSPEND_USER":return Object(m.a)({},e,{isUserUpdating:!0});case"SUSPEND_USER_ERROR":return Object(m.a)({},e,{isUserUpdating:!1,usersList:{}});case"SUSPEND_USER_SUCCESS":return Object(m.a)({},e,{isUserUpdating:!1,usersList:t.data});default:return e}},Gs={reportData:{},isLoading:!1,isOrderLoading:!1,isLateOrderLoading:!1,lateOrder:{}},Vs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_REPORT":return Object(m.a)({},e,{isLoading:!0});case"GET_REPORT_ERROR":return Object(m.a)({},e,{isLoading:!1,reportData:{}});case"GET_REPORT_SUCCESS":return Object(m.a)({},e,{isLoading:!1,reportData:t.data});case"GET_ORDER":return Object(m.a)({},e,{isOrderLoading:!0});case"GET_ORDER_ERROR":return Object(m.a)({},e,{isOrderLoading:!1});case"GET_ORDER_SUCCESS":return Object(m.a)({},e,{isOrderLoading:!1,reportData:Object(m.a)({},e.reportData,{ordersData:t.data})});case"GET_LATE_ORDER":case"SORT_LATE_ORDERS":return Object(m.a)({},e,{isLateOrderLoading:!0});case"GET_LATE_ORDER_ERROR ":return Object(m.a)({},e,{isLateOrderLoading:!1,unsortedLateOrders:{},lateOrder:{}});case"GET_LATE_ORDER_SUCCESS":return Object(m.a)({},e,{isLateOrderLoading:!1,unsortedLateOrders:t.data.unsortedLateOrders,lateOrder:t.data.arrangedTasks});default:return e}},Xs=Object(Ts.c)({loginReducer:Ns,forgotPasswordReducer:Ps,resetPasswordReducer:As,headerReducer:Fs,taskHistoryReducer:Is,dashboardReducer:Ys,feedbackReducer:Bs,settingReducer:Ks,reportReducer:Vs}),Js=a(441),qs=a(16),Zs=a.n(qs),$s=a(4),Qs=a(220),en=a.n(Qs),tn=ie.ApiUrl,an=ie.ApiUrl2;function rn(){var e=arguments.length<=0?void 0:arguments[0],t=(arguments.length<=1?void 0:arguments[1])||"",a=(arguments.length<=2?void 0:arguments[2])||{},r=xt("foodjets_merchant")||{},s={Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"};r.token&&(s.Authorization="Bearer "+r.token);var n=en.a.create({headers:s}),o="",l={};switch(e){case"POST":l=JSON.stringify({jsonrpc:2,ver:1,platform:"web",brw:{os:"Win32",name:"Chrome 67"},params:a}),o=n.post(tn+t,l);break;case"PUT":l=JSON.stringify({jsonrpc:2,ver:1,platform:"web",brw:{os:"Win32",name:"Chrome 67"},params:a}),o=n.put(tn+t,l);break;case"DELETE":l=JSON.stringify({jsonrpc:2,ver:1,platform:"web",brw:{os:"Win32",name:"Chrome 67"},params:a}),o=n.delete(tn+t,l);break;case"GET":o=n.get(tn+t)}return o}function sn(){var e=arguments.length<=0?void 0:arguments[0],t=(arguments.length<=1?void 0:arguments[1])||"",a=(arguments.length<=2?void 0:arguments[2])||{},r=xt("foodjets_merchant")||{},s={Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"};r.token&&(s.Authorization="Bearer "+r.token);var n=en.a.create({headers:s}),o="";switch(e){case"POST":var l=JSON.stringify({jsonrpc:2,ver:1,platform:"web",brw:{os:"Win32",name:"Chrome 67"},params:a});o=n.post(an+t,l);break;case"PUT":l=JSON.stringify({jsonrpc:2,ver:1,platform:"web",brw:{os:"Win32",name:"Chrome 67"},params:a}),o=n.put(an+t,l);break;case"DELETE":l=JSON.stringify({jsonrpc:2,ver:1,platform:"web",brw:{os:"Win32",name:"Chrome 67"},params:a}),o=n.delete(an+t,l);break;case"GET":o=n.get(an+t)}return o}function nn(){var e=arguments.length<=0?void 0:arguments[0],t=(arguments.length<=1?void 0:arguments[1])||"",a=(arguments.length<=2?void 0:arguments[2])||{};(xt("foodjets_merchant")||{}).token;var r=en.a.create({headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}),s="";switch(e){case"POST":var n=JSON.stringify({jsonrpc:2,ver:1,platform:"web",brw:{os:"Win32",name:"Chrome 67"},params:a});s=r.post("/api2/"+t,n);break;case"GET":s=r.get("/fleet/tasks/6ae0019f/public")}return s}var on=Zs.a.mark(cn),ln=Zs.a.mark(dn);function cn(e){var t,a,r,s;return Zs.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,"","auth/login",t=e.data,a=t.remember,delete t.remember,n.next=8,Object($s.b)(rn,"POST","auth/login",t);case 8:if(!(r=n.sent).data.error){n.next=12;break}return n.next=12,Object($s.c)(xr(r.data.error));case 12:if(!r.data.result){n.next=20;break}return s=r.data.result,Se({message:"You have successfully logged In. Please wait..."}),a?(Tt("foodjets_merchant"),wt(s.user,"foodjets_merchant")):(Tt("foodjets_merchant"),Ct(s.user,"foodjets_merchant")),localStorage.setItem("states",JSON.stringify(ie.states||[])),Dt(s.user),n.next=20,Object($s.c)(Tr(s));case 20:n.next=26;break;case 22:n.prev=22,n.t0=n.catch(0),Oe(n.t0),console.log(n.t0.message);case 26:case"end":return n.stop()}},on,null,[[0,22]])}function dn(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.d)(wr,cn);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}},ln,null,[[0,5]])}var un=Zs.a.mark(pn),mn=Zs.a.mark(hn);function pn(e){var t,a;return Zs.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,"","auth/forget-password",r.next=5,Object($s.b)(rn,"POST","auth/forget-password",e.data);case 5:if(!(t=r.sent).data.error){r.next=9;break}return r.next=9,Object($s.c)(Yr(t.data.error));case 9:if(!t.data.result){r.next=13;break}return a=t.data.result,r.next=13,Object($s.c)(Ur(a));case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(0),Oe(r.t0),console.log(r.t0.message);case 19:case"end":return r.stop()}},un,null,[[0,15]])}function hn(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.d)(Fr,pn);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}},mn,null,[[0,5]])}var fn=Zs.a.mark(bn),_n=Zs.a.mark(gn);function bn(e){var t,a;return Zs.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,"","auth/reset-password",r.next=5,Object($s.b)(rn,"POST","auth/reset-password",e.data);case 5:if(!(t=r.sent).data.error){r.next=9;break}return r.next=9,Object($s.c)(Vr(t.data.error));case 9:if(!t.data.result){r.next=13;break}return a=t.data.result,r.next=13,Object($s.c)(Gr(a));case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(0),Oe(r.t0),console.log(r.t0.message);case 19:case"end":return r.stop()}},fn,null,[[0,15]])}function gn(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.e)(Kr,bn);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}},_n,null,[[0,5]])}var En=Zs.a.mark(kn),vn=Zs.a.mark(Sn),yn=Zs.a.mark(On);function kn(e){var t,a,r;return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"","auth/get-user-settings",e.next=5,Object($s.b)(sn,"GET","auth/get-user-settings");case 5:if(!(t=e.sent).data.error){e.next=9;break}return e.next=9,Object($s.c)(Gt());case 9:if(!t.data.result){e.next=16;break}return a=t.data.result,(r=a.filter||{})&&Object.keys(r||{}).forEach(function(e){r[e]=JSON.parse(r[e]||"{}")}),e.next=16,Object($s.c)(Kt({settings:a.settings||{},userType:a.user_type||"",logo:{path:a.path,image:a.logo},showReport:a.show_report,filterData:r}));case 16:e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(0),e.next=22,Object($s.c)(Gt());case 22:console.log({message:e.t0.message});case 23:case"end":return e.stop()}},En,null,[[0,18]])}function Sn(e){var t,a;return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"","auth/authenticate",e.next=5,Object($s.b)(rn,"GET","auth/authenticate");case 5:if(!(t=e.sent).data.error){e.next=9;break}return e.next=9,Object($s.c)(Xt());case 9:if(!t.data.result){e.next=13;break}return a=t.data.result,e.next=13,Object($s.c)(Vt(a));case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(0),e.next=19,Object($s.c)(Xt());case 19:console.log(e.t0.message);case 20:case"end":return e.stop()}},vn,null,[[0,15]])}function On(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.d)(Wt,kn);case 3:return e.next=5,Object($s.d)(Bt,Sn);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},yn,null,[[0,7]])}var Dn=Zs.a.mark(Mn),jn=Zs.a.mark(Fn),Cn=Zs.a.mark(Un),wn=Zs.a.mark(Yn),Tn=Zs.a.mark(zn),xn=Zs.a.mark(In),Nn=Zs.a.mark(Wn),Rn=Zs.a.mark(Bn),Pn=Zs.a.mark(Hn),Ln=Zs.a.mark(Kn),An=Zs.a.mark(Gn);function Mn(e){var t,a,r,s,n,o,l,i,c,d,u,m;return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"",t=JSON.parse(localStorage.getItem("states")||"[]"),a=t.map(function(e){return e.id}),"location/all",e.next=7,Object($s.a)([Object($s.b)(rn,"GET","location/all"),Object($s.b)(sn,"POST","location/zones",{state:a})]);case 7:if(!(r=e.sent)){e.next=29;break}if(s=r[0],n=r[1],!s.data.error){e.next=14;break}return e.next=14,Object($s.c)(x());case 14:if(!s.data.result){e.next=29;break}return o={},l="",i=!1,c=[],d=[],u=s.data.result,"pharmacy"===(m=s.data.user).user_type?(l="pharmacy",i=!0):"general"===m.user_type?(l="general",i=!1):(l="admin",i=!1),u.map(function(e,t){c[t]={id:e.id,value:t,label:e.address,data:e},""!==e.store&&null!==e.store&&(d[t]={id:e.id,zone_id:e.zone_id,value:t,label:e.store,data:e})}),d=Object(f.compact)(d),c=Object(f.compact)(c),n.data&&(o=n.data||{}),e.next=29,Object($s.c)(T({taskType:l,pharmacy:i,locations:c,stores:d,zones:o}));case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(0),Oe(e.t0),console.log(e.t0.message);case 35:case"end":return e.stop()}},Dn,null,[[0,31]])}function Fn(e){var t,a;return Zs.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,"",t="tasks/".concat(e.data.uuid),r.next=5,Object($s.b)(sn,"GET",t);case 5:if(!(a=r.sent).data.error){r.next=9;break}return r.next=9,Object($s.c)(Y());case 9:if(!a.data){r.next=12;break}return r.next=12,Object($s.c)(U(a.data));case 12:r.next=18;break;case 14:r.prev=14,r.t0=r.catch(0),Oe(r.t0.message),console.log(r.t0.message);case 18:case"end":return r.stop()}},jn,null,[[0,14]])}function Un(e){var t,a;return Zs.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,"",t="tasks/".concat(e.data.uuid),r.next=5,Object($s.b)(nn,"GET",t);case 5:(a=r.sent).data.error,a.data,r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),Oe(r.t0.message),console.log(r.t0.message);case 14:case"end":return r.stop()}},Cn,null,[[0,10]])}function Yn(e){var t;return Zs.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,"","tasks",a.next=5,Object($s.b)(rn,"POST","tasks",e.data);case 5:if(!(t=a.sent).data.error){a.next=10;break}return console.log(t.data.error),a.next=10,Object($s.c)(R());case 10:if(!t.data){a.next=14;break}return Se({message:"Task has been created successfully"}),a.next=14,Object($s.c)(N({}));case 14:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(0),Oe(a.t0.message),console.log(a.t0.message);case 20:case"end":return a.stop()}},wn,null,[[0,16]])}function zn(e){var t,a,r;return Zs.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,"",t="tasks/".concat(e.data.uuid),a={timestamp:me()().format("X")},s.next=6,Object($s.b)(rn,"DELETE",t,a);case 6:if(!(r=s.sent).data.error){s.next=10;break}return s.next=10,Object($s.c)(W());case 10:if(!r.data){s.next=14;break}return Se({message:"Task deleted successfully"}),s.next=14,Object($s.c)(I({}));case 14:s.next=20;break;case 16:s.prev=16,s.t0=s.catch(0),Oe(s.t0.message),console.log(s.t0.message);case 20:case"end":return s.stop()}},Tn,null,[[0,16]])}function In(e){var t,a,r;return Zs.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,"",t="tasks/status/".concat(e.data.uuid),a={orderStatus:{status:e.data.status}},s.next=6,Object($s.b)(rn,"PUT",t,a);case 6:if(!(r=s.sent).data.error){s.next=10;break}return s.next=10,Object($s.c)(K());case 10:if(!r.data){s.next=14;break}return Se({message:"Task status updated successfully"}),s.next=14,Object($s.c)(H({}));case 14:s.next=20;break;case 16:s.prev=16,s.t0=s.catch(0),Oe(s.t0.message),console.log(s.t0.message);case 20:case"end":return s.stop()}},xn,null,[[0,16]])}function Wn(e){var t,a,r;return Zs.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,"",t="tasks/".concat(e.data.uuid),a=Object(m.a)({},e.data.params),s.next=6,Object($s.b)(rn,"PUT",t,a);case 6:if(!(r=s.sent).data.error){s.next=10;break}return s.next=10,Object($s.c)(A());case 10:if(!r.data){s.next=14;break}return Se({message:"Task updated successfully"}),s.next=14,Object($s.c)(L({}));case 14:s.next=20;break;case 16:s.prev=16,s.t0=s.catch(0),s.t0.response&&s.t0.response.data?Oe({message:s.t0.response.data.message.cause}):Oe({message:s.t0.message}),console.log(s.t0.message);case 20:case"end":return s.stop()}},Nn,null,[[0,16]])}function Bn(e){var t,a,r,s,n;return Zs.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,"","tasks/search",t={userType:e.data.user_type,valueOne:e.data.type,valueTwo:e.data.value},e.data.dateType&&(t.dateType=e.data.dateType),o.next=7,Object($s.b)(sn,"POST","tasks/search",t);case 7:if(!(a=o.sent).data.error){o.next=11;break}return o.next=11,Object($s.c)(J());case 11:if(!a.data.result){o.next=20;break}return r=a.data.result,s={},r.tasks.length>0&&r.tasks.map(function(e,t){var a=!1,r="",n="",o="Scheduled";"tsk_proc_hld"===e.tskStatus?o="Scheduled":"tsk_proc_mrchnt"===e.tskStatus?o="Scheduled":"tsk_proc_drv"===e.tskStatus&&"drv_strt_recpnt_tsk"===e.driverStatus?o="Picked Up":"tsk_proc_drv"===e.tskStatus?o="Processing":"tsk_cmp"===e.tskStatus?o="Completed":"tsk_cncling"===e.tskStatus?o="Deleted":"tsk_cncled"===e.tskStatus&&(o="Deleted");var l=e.timeCreated.split("T")[0].split("-"),i=l[1]+"/"+l[2]+"/"+l[0],c="",d="";""!==e.timezone?(c=he(1e3*parseInt(e.completeAfter),e.timezone,"MM/DD \xb7 hh:mma"),d=he(1e3*parseInt(e.completeBefore),e.timezone,"hh:mma")):(c=fe(1e3*parseInt(e.completeAfter),"MM/DD \xb7 hh:mma"),d=fe(1e3*parseInt(e.completeBefore),"hh:mma")),!Object(f.isEmpty)(e.completionDetails.events)&&e.completionDetails.events.onflt_recpnt_sig&&(a=!0),!Object(f.isEmpty)(e.completionDetails.events)&&e.completionDetails.events.onflt_recpnt_sig&&(a=!0),e.pickup_onfleet_url&&(r="Driver to Merchant",n=e.pickup_onfleet_url),e.drop_onfleet_url&&(r="Driver to Recipient",n=e.drop_onfleet_url),s[e.state_code]?s[e.state_code][e.mkt_ofc_cty_del_zne_id]||(s[e.state_code][e.mkt_ofc_cty_del_zne_id]={name:e.mkt_ofc_cty_del_zne_name,id:e.state_code+e.mkt_ofc_cty_del_zne_id,orders:[]}):(s[e.state_code]={},s[e.state_code][e.mkt_ofc_cty_del_zne_id]={name:e.mkt_ofc_cty_del_zne_name,id:e.state_code+e.mkt_ofc_cty_del_zne_id,orders:[]}),s[e.state_code][e.mkt_ofc_cty_del_zne_id].orders.push({created_at:i,complete_after:c,complete_before:d,recpnt_address:e.recipients.address,mrchnt_address:e.merchant.address,mrchnt_notes:e.merchant.notes,recpnt_notes:e.recipients.notes,tsk_status:o,uuid:e.uuid,order_number:e.orderNumber,driver_name:e.driver_name,recipient_sig:a,timezone:e.timezone,mrchnt_location:e.merchant.location,recpnt_location:e.recipients.location,drop_onfleet_url:e.drop_onfleet_url||"",pickup_onfleet_url:e.pickup_onfleet_url||"",track_driver:r,current_url:n,tip:e.tip,state_code:e.state_code,mkt_ofc_cty_del_zne_id:e.mkt_ofc_cty_del_zne_id})}),n={},f.each(s,function(e,t){f.each(e,function(e,a){s[t][a].orders=f.sortBy(s[t][a].orders,function(e){return e.timestamp})}),n[t]=f.sortBy(s[t],function(e){return e.name})}),s=n,o.next=20,Object($s.c)(X({count:r.tasks.length,tasks:s}));case 20:o.next=26;break;case 22:o.prev=22,o.t0=o.catch(0),Oe(o.t0.message),console.log(o.t0.message);case 26:case"end":return o.stop()}},Rn,null,[[0,22]])}function Hn(e){var t,a,r,s,n,o,l,i,c;return Zs.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,t="",t="tasks/filter",a={filter:{key:"dashboard",value:JSON.stringify(e.data)}},d.next=6,Object($s.c)(Jt({key:"dashboard",value:e.data}));case 6:return d.next=8,Object($s.b)(sn,"POST",t,a);case 8:if((r=d.sent).data.error,!r.data){d.next=17;break}return s=e.data||{},n=s.filterKeys||{},o={user_type:s.type,type:"default"},Object(f.isEmpty)(n)||(0===n.Store.length&&0===n.Area.length&&n.State.length>0&&(l=(n.State||[]).map(function(e){return e.value})).length>0&&(o={type:"state",state:l}),0===n.Store.length&&n.Area.length>0&&(i=[],(n.Area||[]).map(function(e){var t=i.findIndex(function(t){return t.state===e.state});t>-1?i[t].zone_id.push(e.id):i.push({state:e.state,zone_id:[e.id]})}),i.length>0&&(o={type:"place",place:i})),n.Store.length>0&&(c=[],(n.Store||[]).forEach(function(e){c.push(e.store_id.toString())}),c.length>0&&(o={type:"store",store_id:c})),o.user_type=s.type,o.type||(o.type="default")),d.next=17,Object($s.c)(q(o));case 17:d.next=23;break;case 19:d.prev=19,d.t0=d.catch(0),Oe(d.t0),console.log(d.t0.message);case 23:case"end":return d.stop()}},Pn,null,[[0,19]])}function Kn(e){var t,a,r,s,n,o;return Zs.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,"","tasks/summary",l.next=5,Object($s.b)(sn,"POST","tasks/summary",e.data);case 5:if(!(t=l.sent).data.error){l.next=9;break}return l.next=9,Object($s.c)($());case 9:if(!t.data.result){l.next=15;break}return a=t.data.result||[],r={},a.length>0&&("default"===e.data.type&&(r=Object(m.a)({},a[0])),"state"===e.data.type&&(s={},a.map(function(e){s[e.state_code]={shopped_late:e.shopped_late,shopping_late_percent:e.shopping_late_percent,total_orders:e.total_orders}}),r=Object(m.a)({},s)),"place"===e.data.type&&(n={},a.map(function(e){n[e.state_code]?n[e.state_code][e.mkt_ofc_cty_del_zne_id]={shopped_late:e.shopped_late,shopping_late_percent:e.shopping_late_percent,total_orders:e.total_orders}:(n[e.state_code]={},n[e.state_code][e.mkt_ofc_cty_del_zne_id]={shopped_late:e.shopped_late,shopping_late_percent:e.shopping_late_percent,total_orders:e.total_orders})}),r=Object(m.a)({},n)),"store"===e.data.type&&(o={},a.map(function(e){o[e.store_id]={shopped_late:e.shopped_late,shopping_late_percent:e.shopping_late_percent,total_orders:e.total_orders}}),r=Object(m.a)({},o))),l.next=15,Object($s.c)(Z({summary:Object(m.a)({},r),type:e.data.type}));case 15:l.next=21;break;case 17:l.prev=17,l.t0=l.catch(0),Oe(l.t0.message),console.log(l.t0.message);case 21:case"end":return l.stop()}},Ln,null,[[0,17]])}function Gn(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.d)(k,Un);case 3:return e.next=5,Object($s.d)(y,Fn);case 5:return e.next=7,Object($s.d)(g,Mn);case 7:return e.next=9,Object($s.d)(S,zn);case 9:return e.next=11,Object($s.d)(O,In);case 11:return e.next=13,Object($s.d)(E,Yn);case 13:return e.next=15,Object($s.d)(v,Wn);case 15:return e.next=17,Object($s.d)(D,Bn);case 17:return e.next=19,Object($s.d)(C,Hn);case 19:return e.next=21,Object($s.d)(j,Kn);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0);case 26:case"end":return e.stop()}},An,null,[[0,23]])}var Vn=Zs.a.mark(qn),Xn=Zs.a.mark(Zn),Jn=Zs.a.mark($n);function qn(e){var t,a,r,s,n,o,l,i,c;return Zs.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,t="",t="tasks/history",a=e.data,d.next=6,Object($s.c)(Jt({key:a.filter.key||"history",value:JSON.parse(a.filter.value||"{}")}));case 6:return r={user_type:a.type,page:a.pageno,start:a.start,end:a.end,value_one:a.value_one,value_two:a.value_two,filter:a.filter},!["state","zone","store-id"].includes(r.value_one),d.next=10,Object($s.b)(sn,"POST",t,r);case 10:if(!(s=d.sent).data.error){d.next=14;break}return d.next=14,Object($s.c)(us());case 14:if(!s.data.result){d.next=20;break}return n=s.data.result,o={},"store-id"===a.value_one?(n.tasks.length>0&&(l=a.storeName,n.tasks.map(function(e,t){var a=!1,r="",s="",n="Scheduled";"tsk_proc_hld"===e.tskStatus?n="Scheduled":"tsk_proc_mrchnt"===e.tskStatus?n="Scheduled":"tsk_proc_drv"===e.tskStatus&&"drv_strt_recpnt_tsk"===e.driverStatus?n="Picked Up":"tsk_proc_drv"===e.tskStatus?n="Processing":"tsk_cmp"===e.tskStatus?n="Completed":"tsk_cncling"===e.tskStatus?n="Deleted":"tsk_cncled"===e.tskStatus&&(n="Deleted");var i=e.timeCreated.split("T")[0].split("-"),c=i[1]+"/"+i[2]+"/"+i[0],d="",u="";""!==e.timezone?(d=he(1e3*parseInt(e.completeAfter),e.timezone,"MM/DD \xb7 hh:mma"),u=he(1e3*parseInt(e.completeBefore),e.timezone,"hh:mma")):(d=fe(1e3*parseInt(e.completeAfter),"MM/DD \xb7 hh:mma"),u=fe(1e3*parseInt(e.completeBefore),"hh:mma")),!f.isEmpty(e.completionDetails.events)&&e.completionDetails.events.onflt_recpnt_sig&&(a=!0),!f.isEmpty(e.completionDetails.events)&&e.completionDetails.events.onflt_recpnt_sig&&(a=!0),e.pickup_onfleet_url&&(r="Driver to Merchant",s=e.pickup_onfleet_url),e.drop_onfleet_url&&(r="Driver to Recipient",s=e.drop_onfleet_url),o[e.state_code]?o[e.state_code][e.store_id]||(o[e.state_code][e.store_id]={name:l[e.store_id],id:e.state_code+e.store_id,orders:[]}):(o[e.state_code]={},o[e.state_code][e.store_id]={name:l[e.store_id],id:e.state_code+e.store_id,orders:[]}),o[e.state_code][e.store_id].orders.push({created_at:c,timestamp:e.completeAfter,complete_after:d,complete_before:u,recpnt_address:e.recipients.address,mrchnt_address:e.merchant.address,mrchnt_notes:e.merchant.notes,recpnt_notes:e.recipients.notes,tsk_status:n,uuid:e.uuid,order_number:e.orderNumber,driver_name:e.driver_name,recipient_sig:a,timezone:e.timezone,mrchnt_location:e.merchant.location,recpnt_location:e.recipients.location,drop_onfleet_url:e.drop_onfleet_url||"",pickup_onfleet_url:e.pickup_onfleet_url||"",track_driver:r,current_url:s,tip:e.tip,state_code:e.state_code,store_id:e.store_id,mkt_ofc_cty_del_zne_id:e.mkt_ofc_cty_del_zne_id})})),i={},f.each(o,function(e,t){f.each(e,function(e,a){o[t][a].orders=f.orderBy(o[t][a].orders,[function(e){return e.timestamp}],["desc"])}),i[t]=f.sortBy(o[t],function(e){return e.name})}),o=i):"state"===a.value_one?(n.tasks.length>0&&n.tasks.map(function(e,t){var a=!1,r="",s="",n="Scheduled";"tsk_proc_hld"===e.tskStatus?n="Scheduled":"tsk_proc_mrchnt"===e.tskStatus?n="Scheduled":"tsk_proc_drv"===e.tskStatus&&"drv_strt_recpnt_tsk"===e.driverStatus?n="Picked Up":"tsk_proc_drv"===e.tskStatus?n="Processing":"tsk_cmp"===e.tskStatus?n="Completed":"tsk_cncling"===e.tskStatus?n="Deleted":"tsk_cncled"===e.tskStatus&&(n="Deleted");var l=e.timeCreated.split("T")[0].split("-"),i=l[1]+"/"+l[2]+"/"+l[0],c="",d="";""!==e.timezone?(c=he(1e3*parseInt(e.completeAfter),e.timezone,"MM/DD \xb7 hh:mma"),d=he(1e3*parseInt(e.completeBefore),e.timezone,"hh:mma")):(c=fe(1e3*parseInt(e.completeAfter),"MM/DD \xb7 hh:mma"),d=fe(1e3*parseInt(e.completeBefore),"hh:mma")),!f.isEmpty(e.completionDetails.events)&&e.completionDetails.events.onflt_recpnt_sig&&(a=!0),!f.isEmpty(e.completionDetails.events)&&e.completionDetails.events.onflt_recpnt_sig&&(a=!0),e.pickup_onfleet_url&&(r="Driver to Merchant",s=e.pickup_onfleet_url),e.drop_onfleet_url&&(r="Driver to Recipient",s=e.drop_onfleet_url),o[e.state_code]||(o[e.state_code]={name:e.state_code,orders:[]}),o[e.state_code].orders.push({created_at:i,timestamp:e.completeAfter,complete_after:c,complete_before:d,recpnt_address:e.recipients.address,mrchnt_address:e.merchant.address,mrchnt_notes:e.merchant.notes,recpnt_notes:e.recipients.notes,tsk_status:n,uuid:e.uuid,order_number:e.orderNumber,driver_name:e.driver_name,recipient_sig:a,timezone:e.timezone,mrchnt_location:e.merchant.location,recpnt_location:e.recipients.location,drop_onfleet_url:e.drop_onfleet_url||"",pickup_onfleet_url:e.pickup_onfleet_url||"",track_driver:r,current_url:s,tip:e.tip,state_code:e.state_code,mkt_ofc_cty_del_zne_id:e.mkt_ofc_cty_del_zne_id})}),f.each(o,function(e,t){o[t].orders=f.orderBy(o[t].orders,[function(e){return e.timestamp}],["desc"])})):"zone"===a.value_one?(n.tasks.length>0&&n.tasks.map(function(e,t){var a=!1,r="",s="",n="Scheduled";"tsk_proc_hld"===e.tskStatus?n="Scheduled":"tsk_proc_mrchnt"===e.tskStatus?n="Scheduled":"tsk_proc_drv"===e.tskStatus&&"drv_strt_recpnt_tsk"===e.driverStatus?n="Picked Up":"tsk_proc_drv"===e.tskStatus?n="Processing":"tsk_cmp"===e.tskStatus?n="Completed":"tsk_cncling"===e.tskStatus?n="Deleted":"tsk_cncled"===e.tskStatus&&(n="Deleted");var l=e.timeCreated.split("T")[0].split("-"),i=l[1]+"/"+l[2]+"/"+l[0],c="",d="";""!==e.timezone?(c=he(1e3*parseInt(e.completeAfter),e.timezone,"MM/DD \xb7 hh:mma"),d=he(1e3*parseInt(e.completeBefore),e.timezone,"hh:mma")):(c=fe(1e3*parseInt(e.completeAfter),"MM/DD \xb7 hh:mma"),d=fe(1e3*parseInt(e.completeBefore),"hh:mma")),!f.isEmpty(e.completionDetails.events)&&e.completionDetails.events.onflt_recpnt_sig&&(a=!0),!f.isEmpty(e.completionDetails.events)&&e.completionDetails.events.onflt_recpnt_sig&&(a=!0),e.pickup_onfleet_url&&(r="Driver to Merchant",s=e.pickup_onfleet_url),e.drop_onfleet_url&&(r="Driver to Recipient",s=e.drop_onfleet_url),o[e.state_code]?o[e.state_code][e.mkt_ofc_cty_del_zne_id]||(o[e.state_code][e.mkt_ofc_cty_del_zne_id]={name:e.mkt_ofc_cty_del_zne_name,id:e.state_code+e.mkt_ofc_cty_del_zne_id,orders:[]}):(o[e.state_code]={},o[e.state_code][e.mkt_ofc_cty_del_zne_id]={name:e.mkt_ofc_cty_del_zne_name,id:e.state_code+e.mkt_ofc_cty_del_zne_id,orders:[]}),o[e.state_code][e.mkt_ofc_cty_del_zne_id].orders.push({created_at:i,timestamp:e.completeAfter,complete_after:c,complete_before:d,recpnt_address:e.recipients.address,mrchnt_address:e.merchant.address,mrchnt_notes:e.merchant.notes,recpnt_notes:e.recipients.notes,tsk_status:n,uuid:e.uuid,order_number:e.orderNumber,driver_name:e.driver_name,recipient_sig:a,timezone:e.timezone,mrchnt_location:e.merchant.location,recpnt_location:e.recipients.location,drop_onfleet_url:e.drop_onfleet_url||"",pickup_onfleet_url:e.pickup_onfleet_url||"",track_driver:r,current_url:s,tip:e.tip,state_code:e.state_code,mkt_ofc_cty_del_zne_id:e.mkt_ofc_cty_del_zne_id})}),c={},f.each(o,function(e,t){f.each(e,function(e,a){o[t][a].orders=f.orderBy(o[t][a].orders,[function(e){return e.timestamp}],["desc"])}),c[t]=f.sortBy(o[t],function(e){return e.name})}),o=c):o=n.tasks||[],d.next=20,Object($s.c)(ds({tasks:o,task_count:n.task_count,list_type:a.value_one}));case 20:d.next=26;break;case 22:d.prev=22,d.t0=d.catch(0),Oe(d.t0),console.log(d.t0.message);case 26:case"end":return d.stop()}},Vn,null,[[0,22]])}function Zn(e){var t,a,r;return Zs.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.data,a={user_type:t.type,page:t.pageno,start:t.start,end:t.end,value_one:t.value_one,value_two:t.value_two},s.next=5,Object($s.b)(sn,"POST","tasks/download",a);case 5:if(!(r=s.sent).data.error){s.next=9;break}return s.next=9,Object($s.c)(ps());case 9:if(!r.data.result){s.next=13;break}return s.next=13,Object($s.c)(ms(r.data.result));case 13:s.next=20;break;case 16:s.prev=16,s.t0=s.catch(0),Oe(s.t0),console.log(s.t0.message);case 20:case"end":return s.stop()}},Xn,null,[[0,16]])}function $n(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.d)(is,qn);case 3:return e.next=5,Object($s.d)(cs,Zn);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},Jn,null,[[0,7]])}var Qn=Zs.a.mark(so),eo=Zs.a.mark(no),to=Zs.a.mark(oo),ao=Zs.a.mark(lo),ro=Zs.a.mark(io);function so(e){var t;return Zs.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object($s.b)(sn,"POST","feedback/summary",e.data);case 3:if(!(t=a.sent).data.error){a.next=7;break}return a.next=7,Object($s.c)(ft());case 7:if(!t.data.result){a.next=11;break}return a.next=11,Object($s.c)(ht(t.data.result));case 11:a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),Oe(a.t0),console.log(a.t0.message);case 18:case"end":return a.stop()}},Qn,null,[[0,14]])}function no(e){var t,a;return Zs.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=Object(m.a)({},e.data,{filter:{key:"feedback",value:JSON.stringify(e.data.filter)}}),r.next=4,Object($s.c)(Jt({key:"feedback",value:e.data.filter}));case 4:return r.next=6,Object($s.b)(sn,"POST","feedback/list",t);case 6:if(!(a=r.sent).data.error){r.next=10;break}return r.next=10,Object($s.c)(bt());case 10:if(!a.data.result){r.next=14;break}return r.next=14,Object($s.c)(_t(a.data.result));case 14:r.next=21;break;case 17:r.prev=17,r.t0=r.catch(0),Oe(r.t0),console.log(r.t0.message);case 21:case"end":return r.stop()}},eo,null,[[0,17]])}function oo(e){var t;return Zs.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object($s.b)(sn,"POST","feedback/search",e.data);case 3:if(!(t=a.sent).data.error){a.next=7;break}return a.next=7,Object($s.c)(Et());case 7:if(!t.data.result){a.next=11;break}return a.next=11,Object($s.c)(gt(t.data.result));case 11:a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),Oe(a.t0),console.log(a.t0.message);case 18:case"end":return a.stop()}},to,null,[[0,14]])}function lo(e){var t,a;return Zs.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object($s.b)(sn,"POST","feedback/reply",e.data);case 3:if(!(t=r.sent).data.error){r.next=7;break}return r.next=7,Object($s.c)(yt());case 7:if(!t.data.result){r.next=15;break}return(a=Object(m.a)({},t.data.result)).task_id=e.data.task_id,a.order_number=e.data.order_number,r.next=14,Object($s.c)(vt(a));case 14:De({message:"Email sent sucessfully."});case 15:r.next=22;break;case 18:r.prev=18,r.t0=r.catch(0),Oe(r.t0),console.log(r.t0.message);case 22:case"end":return r.stop()}},ao,null,[[0,18]])}function io(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.d)(pt,lo);case 3:return e.next=5,Object($s.d)(dt,so);case 5:return e.next=7,Object($s.d)(ut,no);case 7:return e.next=9,Object($s.d)(mt,oo);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},ro,null,[[0,11]])}var co=Zs.a.mark(So),uo=Zs.a.mark(Oo),mo=Zs.a.mark(Do),po=Zs.a.mark(jo),ho=Zs.a.mark(Co),fo=Zs.a.mark(wo),_o=Zs.a.mark(To),bo=Zs.a.mark(xo),go=Zs.a.mark(No),Eo=Zs.a.mark(Ro),vo=Zs.a.mark(Po),yo=Zs.a.mark(Lo),ko=Zs.a.mark(Ao);function So(e){var t;return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.b)(rn,"GET","/auth/info");case 3:if(!(t=e.sent).data.error){e.next=7;break}return e.next=7,Object($s.c)(ua());case 7:if(!t.data.result){e.next=11;break}return e.next=11,Object($s.c)(ma(t.data.result));case 11:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),Oe(e.t0),console.log(e.t0.message);case 18:case"end":return e.stop()}},co,null,[[0,14]])}function Oo(e){var t;return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.b)(rn,"GET","/location/all");case 3:if(!(t=e.sent).data.error){e.next=7;break}return e.next=7,Object($s.c)(ha());case 7:if(!t.data.result){e.next=11;break}return e.next=11,Object($s.c)(fa(t.data.result));case 11:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),Oe(e.t0),console.log(e.t0.message);case 18:case"end":return e.stop()}},uo,null,[[0,14]])}function Do(e){var t,a,r;return Zs.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object($s.b)(rn,"PUT","auth/profile",e.data);case 3:if(!(t=s.sent).data.error){s.next=8;break}return Oe({message:t.data.error.message}),s.next=8,Object($s.c)(_a());case 8:if(!t.data.result){s.next=20;break}return Se({message:t.data.result.message}),a=xt("foodjets_merchant")||{},r=e.data,a.first_name=r.first_name,a.last_name=r.last_name,a.email=r.email,Ct(a,"foodjets_merchant"),Dt(a),s.next=20,Object($s.c)(ba({}));case 20:s.next=27;break;case 23:s.prev=23,s.t0=s.catch(0),Oe(s.t0),console.log(s.t0.message);case 27:case"end":return s.stop()}},mo,null,[[0,23]])}function jo(e){var t;return Zs.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object($s.b)(rn,"PUT","auth/password",e.data);case 3:if(!(t=a.sent).data.error){a.next=8;break}return Oe({message:t.data.error.message}),a.next=8,Object($s.c)(ga());case 8:if(!t.data.result){a.next=13;break}return Se({message:t.data.result.message}),a.next=13,Object($s.c)(Ea({}));case 13:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(0),Oe(a.t0),console.log(a.t0.message);case 20:case"end":return a.stop()}},po,null,[[0,16]])}function Co(e){var t;return Zs.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object($s.b)(rn,"POST","location",e.data);case 3:if(!(t=a.sent).data.error){a.next=8;break}return Oe({message:t.data.error.message}),a.next=8,Object($s.c)(va());case 8:if(!t.data){a.next=15;break}return Se({message:t.data.message}),a.next=13,Object($s.c)(ya({}));case 13:return a.next=15,Object($s.c)(pa());case 15:a.next=24;break;case 18:return a.prev=18,a.t0=a.catch(0),Oe({message:a.t0.message}),a.next=23,Object($s.c)(va());case 23:console.log(a.t0.message);case 24:case"end":return a.stop()}},ho,null,[[0,18]])}function wo(e){var t;return Zs.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object($s.b)(sn,"GET","auth/user-list",e.data);case 3:if(!(t=a.sent).data.error){a.next=7;break}return a.next=7,Object($s.c)(ja());case 7:if(!t.data.result){a.next=11;break}return a.next=11,Object($s.c)(Ca(t.data.result));case 11:a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),Oe(a.t0),console.log(a.t0.message);case 18:case"end":return a.stop()}},fo,null,[[0,14]])}function To(e){var t;return Zs.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object($s.b)(sn,"POST","auth/user",e.data);case 3:if(!(t=a.sent).data.error){a.next=8;break}return Oe({message:t.data.error.message}),a.next=8,Object($s.c)(wa(t.data.error.message));case 8:if(!t.data.result){a.next=13;break}return Se({message:"User added sucessfully."}),a.next=13,Object($s.c)(Ta(t.data.result));case 13:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(0),Oe(a.t0),console.log(a.t0.message);case 20:case"end":return a.stop()}},_o,null,[[0,16]])}function xo(e){var t,a,r;return Zs.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.data.id,delete(a=e.data).id,s.next=6,Object($s.b)(sn,"PUT","auth/user/"+t,a);case 6:if(!(r=s.sent).data.error){s.next=11;break}return Oe({message:r.data.error.message}),s.next=11,Object($s.c)(xa(r.data.error.message));case 11:if(!r.data.result){s.next=16;break}return Se({message:"User updated sucessfully."}),s.next=16,Object($s.c)(Na(r.data.result));case 16:s.next=23;break;case 19:s.prev=19,s.t0=s.catch(0),Oe(s.t0),console.log(s.t0.message);case 23:case"end":return s.stop()}},bo,null,[[0,19]])}function No(e){var t;return Zs.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object($s.b)(sn,"DELETE","auth/user/"+e.data);case 3:if(!(t=a.sent).data.error){a.next=8;break}return Oe({message:t.data.error.message}),a.next=8,Object($s.c)(Ra(t.data.error.message));case 8:if(!t.data.result){a.next=13;break}return Se({message:"User deleted sucessfully."}),a.next=13,Object($s.c)(Pa(t.data.result));case 13:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(0),Oe(a.t0),console.log(a.t0.message);case 20:case"end":return a.stop()}},go,null,[[0,16]])}function Ro(e){var t,a,r;return Zs.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.data.id,delete(a=e.data).id,s.next=6,Object($s.b)(sn,"PUT","auth/user/"+t,a);case 6:if(!(r=s.sent).data.error){s.next=11;break}return Oe({message:r.data.error.message}),s.next=11,Object($s.c)(La());case 11:if(!r.data.result){s.next=16;break}return Se({message:"User suspended sucessfully."}),s.next=16,Object($s.c)(Aa(r.data.result));case 16:s.next=23;break;case 19:s.prev=19,s.t0=s.catch(0),Oe(s.t0),console.log(s.t0.message);case 23:case"end":return s.stop()}},Eo,null,[[0,19]])}function Po(e){var t,a,r;return Zs.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.data.id,delete(a=e.data).id,s.next=6,Object($s.b)(rn,"PUT","location/"+t,a);case 6:if(!(r=s.sent).data.error){s.next=11;break}return Oe({message:r.data.error.message}),s.next=11,Object($s.c)(ka(r.data.error.message));case 11:if(!r.data.result){s.next=18;break}return Se({message:"Store updated sucessfully."}),s.next=16,Object($s.c)(Sa(r.data.result));case 16:return s.next=18,Object($s.c)(pa());case 18:s.next=27;break;case 21:return s.prev=21,s.t0=s.catch(0),s.next=25,Object($s.c)(Sa());case 25:Oe({message:s.t0.message}),console.log(s.t0.message);case 27:case"end":return s.stop()}},vo,null,[[0,21]])}function Lo(e){var t;return Zs.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object($s.b)(rn,"DELETE","location/"+e.data);case 3:if(!(t=a.sent).data.error){a.next=8;break}return Oe({message:t.data.error.message}),a.next=8,Object($s.c)(Oa(t.data.error.message));case 8:if(!t.data.result){a.next=15;break}return Se({message:"Store deleted sucessfully."}),a.next=13,Object($s.c)(Da(t.data.result));case 13:return a.next=15,Object($s.c)(pa());case 15:a.next=22;break;case 18:a.prev=18,a.t0=a.catch(0),Oe(a.t0),console.log(a.t0.message);case 22:case"end":return a.stop()}},yo,null,[[0,18]])}function Ao(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.d)(Qt,So);case 3:return e.next=5,Object($s.d)(ea,Oo);case 5:return e.next=7,Object($s.d)(oa,wo);case 7:return e.next=9,Object($s.d)(la,To);case 9:return e.next=11,Object($s.d)(ia,xo);case 11:return e.next=13,Object($s.d)(ca,No);case 13:return e.next=15,Object($s.d)(da,Ro);case 15:return e.next=17,Object($s.d)(ta,Do);case 17:return e.next=19,Object($s.d)(aa,jo);case 19:return e.next=21,Object($s.d)(ra,Co);case 21:return e.next=23,Object($s.d)(sa,Po);case 23:return e.next=25,Object($s.d)(na,Lo);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0),console.log(e.t0);case 30:case"end":return e.stop()}},ko,null,[[0,27]])}var Mo=Zs.a.mark(Io),Fo=Zs.a.mark(Wo),Uo=Zs.a.mark(Bo),Yo=Zs.a.mark(Ho),zo=Zs.a.mark(Ko);function Io(e){var t,a,r,s,n,o,l,i,c;return Zs.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,delete(t=Object(m.a)({},e.data)).show_by,a=Object(m.a)({},t),delete t.filter,delete e.data.filter,"month"===(r=Object(m.a)({},e.data)).show_by&&(r.start=me()().subtract(12,"months").format("YYYY-MM-DD"),r.end=me()().format("YYYY-MM-DD")),d.next=10,Object($s.c)(Jt({key:a.filter.key,value:JSON.parse(a.filter.value)}));case 10:return d.next=12,Object($s.a)([Object($s.b)(sn,"POST","reports/rerun",t),Object($s.b)(sn,"POST","reports/orders",r),Object($s.b)(sn,"POST","reports/stats-total",a)]);case 12:if(!(s=d.sent)){d.next=35;break}if(n=s[0],o=s[1],l=s[2],!(n.data.error||n.data.error||n.data.error)){d.next=20;break}return d.next=20,Object($s.c)(ar());case 20:if(!n.data.result){d.next=32;break}return(i=n.data.result).chng_rerun_total_percent=_e(i.chng_rerun_total_percent),(c=l.data.result).chng_shopping_late_percent=_e(c.chng_shopping_late_percent),c.chng_tot_orders_percent=_e(c.chng_tot_orders_percent),c.late_percentage=_e(c.late_percentage),c.on_time_percentage=_e(c.on_time_percentage),c.shopping_late_percent=_e(c.shopping_late_percent),d.next=32,Object($s.c)(rr({rerunData:i,ordersData:o.data.result,reportTotal:c}));case 32:d.next=36;break;case 35:Oe({message:"Some error occured."});case 36:d.next=42;break;case 38:d.prev=38,d.t0=d.catch(0),Oe(d.t0),console.log(d.t0.message);case 42:case"end":return d.stop()}},Mo,null,[[0,38]])}function Wo(e){var t,a;return Zs.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return"month"===(t=Object(m.a)({},e.data)).show_by&&(t.start=me()().subtract(12,"months").format("YYYY-MM-DD"),t.end=me()().format("YYYY-MM-DD")),r.prev=2,r.next=5,Object($s.b)(sn,"POST","reports/orders",t);case 5:if(!(a=r.sent).data.error){r.next=9;break}return r.next=9,Object($s.c)(sr());case 9:if(!a.data.result){r.next=13;break}return r.next=13,Object($s.c)(nr(a.data.result));case 13:r.next=20;break;case 16:r.prev=16,r.t0=r.catch(2),Oe(r.t0),console.log(r.t0.message);case 20:case"end":return r.stop()}},Fo,null,[[2,16]])}function Bo(e){var t,a,r,s;return Zs.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,delete(t=Object(m.a)({},e.data)).filter,t.order_by="complete_after",n.next=6,Object($s.b)(sn,"POST","reports/late-orders",t);case 6:if(!(a=n.sent).data.error){n.next=10;break}return n.next=10,Object($s.c)(lr());case 10:if(!a.data.result){n.next=16;break}return r=a.data.result||{},s={unsortedLateOrders:r.data,count:r.count,searchData:e.data},n.next=16,Object($s.c)(or(s));case 16:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(0),Oe(n.t0),console.log(n.t0.message);case 23:case"end":return n.stop()}},Uo,null,[[0,19]])}function Ho(e){var t,a,r,s,n,o,l,i,c,d,u,m;return Zs.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.data.searchData,a=t.filter||{},r=a.filterKeys.State||[],s=a.filterKeys.Area||[],a.filterKeys.Store||[],n=t.order_by||"complete_after",o=t.format||"asc",l=e.data.unsortedLateOrders,i={},c=e.data.count||0,d="","store"===t.type?(d="Zonewise",l.length>0&&l.map(function(e,t){i[e.state_code]?i[e.state_code][e.store_id]||(i[e.state_code][e.store_id]={name:e.store,id:e.store_id,orders:[],a:0,b:0,c:0,d:0,total:0}):(i[e.state_code]={},i[e.state_code][e.store_id]={name:e.store,id:e.store_id,orders:[],a:0,b:0,c:0,d:0,total:0}),i[e.state_code][e.store_id].total++;var a="";e.time_diff>=0&&e.time_diff<=20?(a="ready",i[e.state_code][e.store_id].b++):e.time_diff>20&&e.time_diff<=30?(a="shopping",i[e.state_code][e.store_id].c++):e.time_diff>30?(a="not_ready",i[e.state_code][e.store_id].d++):i[e.state_code][e.store_id].a++,i[e.state_code][e.store_id].orders.push({timestamp:me()(e.created_at).format("X"),created_at:pe(e.created_at),cust_name:e.cust_name.toLowerCase(),customer_name:e.cust_name,order_number:e.order_number,store:e.store,store_id:e.store_id,complete_before:pe(e.complete_before),complete_after:pe(e.complete_after),delivery_time:pe(e.delivery_time),driver_wait:e.driver_wait,recpnt_task_start_time:pe(e.recpnt_task_start_time),lateClass:a,time_diff:e.time_diff,uuid:e.uuid})}),u={},f.each(i,function(e,t){f.each(e,function(e,a){i[t][a].orders=f.orderBy(i[t][a].orders,[function(e){return e[n]}],[o])}),u[t]=f.sortBy(i[t],function(e){return e.name})}),i=u):"place"===t.type?r.length>0&&0===s.length?(d="Statewise",l.length>0&&l.map(function(e,t){i[e.state_code]||(i[e.state_code]={name:e.state_code,orders:[],a:0,b:0,c:0,d:0,total:0}),i[e.state_code].total++;var a="";e.time_diff>=0&&e.time_diff<=20?(a="ready",i[e.state_code].b++):e.time_diff>20&&e.time_diff<=30?(a="shopping",i[e.state_code].c++):e.time_diff>30?(a="not_ready",i[e.state_code].d++):i[e.state_code].a++,i[e.state_code].orders.push({timestamp:me()(e.created_at).format("X"),created_at:pe(e.created_at),cust_name:e.cust_name.toLowerCase(),customer_name:e.cust_name,order_number:e.order_number,store:e.store,store_id:e.store_id,complete_before:pe(e.complete_before),complete_after:pe(e.complete_after),delivery_time:pe(e.delivery_time),driver_wait:e.driver_wait,recpnt_task_start_time:pe(e.recpnt_task_start_time),lateClass:a,time_diff:e.time_diff,uuid:e.uuid})}),f.each(i,function(e,t){i[t].orders=f.orderBy(i[t].orders,[function(e){return e[n]}],[o])})):s.length>0&&(d="Zonewise",l.length>0&&l.map(function(e,t){i[e.state_code]?i[e.state_code][e.zone_id]||(i[e.state_code][e.zone_id]={name:e.zone_name,id:e.zone_id,orders:[],a:0,b:0,c:0,d:0,total:0}):(i[e.state_code]={},i[e.state_code][e.zone_id]={name:e.zone_name,id:e.zone_id,orders:[],a:0,b:0,c:0,d:0,total:0});var a="";i[e.state_code][e.zone_id].total++,e.time_diff>=0&&e.time_diff<=20?(i[e.state_code][e.zone_id].b++,a="ready"):e.time_diff>20&&e.time_diff<=30?(i[e.state_code][e.zone_id].c++,a="shopping"):e.time_diff>30?(i[e.state_code][e.zone_id].d++,a="not_ready"):i[e.state_code][e.zone_id].a++,i[e.state_code][e.zone_id].orders.push({timestamp:me()(e.created_at).format("X"),created_at:pe(e.created_at),cust_name:e.cust_name.toLowerCase(),customer_name:e.cust_name,order_number:e.order_number,store:e.store,store_id:e.store_id,complete_before:pe(e.complete_before),complete_after:pe(e.complete_after),delivery_time:pe(e.delivery_time),driver_wait:e.driver_wait,recpnt_task_start_time:pe(e.recpnt_task_start_time),lateClass:a,time_diff:e.time_diff,uuid:e.uuid})}),m={},f.each(i,function(e,t){f.each(e,function(e,a){i[t][a].orders=f.orderBy(i[t][a].orders,[function(e){return e[n]}],[o])}),m[t]=f.sortBy(i[t],function(e){return e.name})}),i=m):(i={a:0,b:0,c:0,d:0,total:0,orders:[]},d="Uncategorized",l.map(function(e,t){i.total++;var a="";e.time_diff>=0&&e.time_diff<=20?(i.b++,a="ready"):e.time_diff>20&&e.time_diff<=30?(a="shopping",i.c++):e.time_diff>30?(a="not_ready",i.d++):i.a++,i.orders.push({timestamp:me()(e.created_at).format("X"),created_at:pe(e.created_at),cust_name:e.cust_name.toLowerCase(),customer_name:e.cust_name,order_number:e.order_number,store:e.store,store_id:e.store_id,complete_before:pe(e.complete_before),complete_after:pe(e.complete_after),delivery_time:pe(e.delivery_time),driver_wait:e.driver_wait,recpnt_task_start_time:pe(e.recpnt_task_start_time),lateClass:a,time_diff:e.time_diff,uuid:e.uuid})}),i.orders=f.orderBy(i.orders,[function(e){return e[n]}],[o])),p.next=14,Object($s.c)(ir({unsortedLateOrders:l,arrangedTasks:{count:c,tasks:i,listType:d,pageno:t.page,sortBy:n,format:o}}));case 14:case"end":return p.stop()}},Yo)}function Ko(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object($s.d)($a,Io);case 3:return e.next=5,Object($s.d)(Qa,Wo);case 5:return e.next=7,Object($s.d)(er,Bo);case 7:return e.next=9,Object($s.d)(tr,Ho);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},zo,null,[[0,11]])}var Go=Zs.a.mark(Vo);function Vo(){return Zs.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($s.a)([Object($s.b)(dn),Object($s.b)(hn),Object($s.b)(gn),Object($s.b)(On),Object($s.b)($n),Object($s.b)(Gn),Object($s.b)(io),Object($s.b)(Ao),Object($s.b)(Ko)]);case 2:case"end":return e.stop()}},Go)}var Xo=Object(Js.a)(),Jo=Object(Ts.e)(Xs,Object(Ts.a)(Xo));Xo.run(Vo),o.a.render(s.a.createElement(b.a,{store:Jo},s.a.createElement(Nr.a,null,s.a.createElement(ws,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},354:function(e,t,a){},444:function(e,t,a){e.exports=a(1002)},669:function(e,t,a){},671:function(e,t,a){},676:function(e,t,a){},679:function(e,t,a){},693:function(e,t,a){},964:function(e,t,a){}},[[444,2,1]]]);
//# sourceMappingURL=main.b902221c.chunk.js.map